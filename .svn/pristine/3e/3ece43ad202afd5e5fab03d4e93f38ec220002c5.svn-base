
@model IEnumerable<ESimSol.BusinessObjects.NOASignatory>
@{
    ViewBag.Title = "NOASignatory List";
}

<head>
<title>Production Request</title>
   
</head>

<body>
    <div id="progressbarParent" style="width:100%;height:100%;margin:0 auto;text-align:center; margin-left: auto;margin-right: auto;left: 0;right: 0;z-index: 1;">
        <div style="margin: 0px auto;margin-top: 251px;text-align:center;width:390px;">
            <label style="font-size:18px;">Please wait</label>
            <div id="progressbar" style="width:100%;height:37px;"></div>
        </div>
    </div>

    <div class="menuMainCollectionTable" style="width:100%;height:100%;" id="divNOASignatory">
        <div  style="width:100%;height:88%">
            <fieldset>
              
                <table style="width:100%">
                    <tr>
                        <td style="width: 15%; text-align: right">
                            <label>CS No:</label>
                        </td>
                        <td style="width: 15%; text-align: left">
                            <input id="txtNOANo" style="width:100%" disabled="disabled" />
                        </td>
                        <td style="width: 15%; text-align: right">
                            <label>Date:</label>
                        </td>
                        <td style="width: 20%; text-align: left">
                            <input id="txtNOADate" style="width:80%" disabled="disabled" />
                        </td>
                        <td style="width: 15%; text-align: right">
                            <label>Prepare By:</label>
                        </td>
                        <td style="width: 30%; text-align: left">
                            <input id="txtPrepareByName" style="width:100%" disabled="disabled" />
                        </td>
                    </tr>
                </table>
                </fieldset>
            <div style="width:100%;height:90%">
                <table id="tblNOASignatorys" class="easyui-datagrid" style="width:100%;height:100%" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true" autorowheight="false" toolbar="#toolbarNOASignatory">
                    <thead>
                        <tr>
                            <th data-options="field:'Selected',checkbox:true"></th>
                            <th field="HeadName" width="20%" align="left">Head Name</th>
                            <th field="Name_Request" width="20%" align="left"> Request To </th>
                            <th field="SLNo" width="10%" align="left">Sequence</th>
                            <th field="Status" width="13%" align="right">Status</th>
                            <th field="ApproveDateSt" width="20%" align="right">ApproveDate</th>
                        </tr>
                    </thead>
                </table>
                <div id="toolbarNOASignatory">
                    <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="ReLoad()">Re-Load</a>
                    <a id="btnAddDetail" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true">New</a>
                    <a id="btnEditDetail" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true">Edit</a>
                    <a id="btnDelete" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true">Remove</a>
                    <a href="javascript:void(0)" id="btnUp" class="easyui-linkbutton" iconcls="icon-up" plain="true" onclick="UP()">Up</a>
                    <a href="javascript:void(0)" id="btnDown" class="easyui-linkbutton" iconcls="icon-down" plain="true" onclick="Down()">Down</a>
                    <a href="javascript:void(0)" id="btnRefresh" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="RefreshSequence()">Refresh</a>
                    <a id="btnCopyDetail" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" onclick="CopyDetail()" plain="true">Copy</a>
                </div>
            </div>
</div>
        <fieldset>
            <legend>Action</legend>
            <table border="0" cellpadding="0" cellspacing="0" style="float:right; width:100%;height:10%">
                <tr>
                    <td style=" float:left;  width:10%; ">
                    </td>
                    <td style="float:left;  width:20%; ">
                    </td>
                    <td style="width:70%;float:right; text-align:right">
                        <a id="btnSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save(Send Request)</a>
                        <a id="btnClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                    </td>
                </tr>
            </table>
            </fieldset>
    </div>
    <div id="winNOASignatory" style="width:550px;" class="easyui-window" title="Fabric info" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false">
        <div>
            <fieldset>
                <legend style="font-weight:bold"> Signatory entry : </legend>
                <table border="0" cellspacing="2" cellpadding="2" style="width:100%; font-size:11px; font-weight:bold">

                    <tr>
                        <td style="width:30%;text-align:right">
                            Head Name:
                        </td>

                        <td style="width:70%">
                            <input type="text" id="txtApprovalHead" style="width:70%" />
                            <a id="btnPickApprovalHead" href="javascript:void(0)" class="easyui-linkbutton ics-pick" iconcls="icon-pick" plain="true"></a>
                            <a id="btnClrApprovalHead" href="javascript:void(0)" class="easyui-linkbutton ics-pick" iconcls="icon-clear" plain="true"></a>
                        </td>
                      
                    </tr>
                    <tr>
                       
                        <td style="width:30%;text-align:right">
                            Signatory Name:
                        </td>
                        <td style="width:70%">
                            <input type="text" id="txtUserName" style="width:70%" />
                            <a id="btnPickUser" href="javascript:void(0)" class="easyui-linkbutton ics-pick" iconcls="icon-pick" plain="true"></a>
                            <a id="btnClrUser" href="javascript:void(0)" class="easyui-linkbutton ics-pick" iconcls="icon-clear" plain="true"></a>
                        </td>
                    </tr>
             
                </table>
            </fieldset>
        </div>
        <fieldset>
            <legend style="font-weight:bold"> Action : </legend>
            <table border="0" cellspacing="2" cellpadding="2" style="width:100%; font-size:11px; font-weight:bold;">
                <tr>
                    <td style="width:100%;text-align:right;">
                        <a id="btnUpdateNOASignatory" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">OK</a>
                        <a id="btnCloseNOASig" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                    </td>

                </tr>
            </table>
        </fieldset>
    </div>
 </body>

<style type="text/css">
    .lines-no .datagrid-body td {
        border-right: 1px dotted transparent;
        border-bottom: 1px dotted transparent;
    }
</style>

<script type="text/javascript">
    var _oIsAdd=false;
    var _oNOASignatory={NOASignatoryID:0,NOAID:0,RequestTo:0,ApprovalHeadID:0,HeadName:'',Name_Request:'',ApproveBy:0 };
    $(document).ready(function () {
        debugger;
        var oNOASignatorys =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
        var oNOA= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.NOA));
        $('#divNOASignatory').data('NOA', oNOA);
        LoadintoGrid(oNOASignatorys);
        $('#divNOASignatory').data('oNOASignatorys', oNOASignatorys);
        $("#progressbar").progressbar({ value: 0 });
        $("#progressbarParent").hide();
        RefreshControl(oNOA);
    });

    function RefreshControl(oNOA)
    {
        $('#txtNOANo').val(oNOA.NOANo);
        $('#txtNOADate').val(oNOA.NOADateInString);
        $('#txtPrepareByName').val(oNOA.PrepareByName);
        
    }

    $(document).keydown(function (e) { if (e.keyCode == 27) { $('div').icsWindow('close'); } });


    function LoadintoGrid(oNOASignatorys)
    {
      $('#tblNOASignatorys').datagrid({selectOnCheck:false, checkOnSelect:false})
      DynamicRefreshList(oNOASignatorys, 'tblNOASignatorys');

        for(var j =0;j<oNOASignatorys.length;j++)
        {
            if(oNOASignatorys[j].NOASignatoryID>0)
            {
                $('#tblNOASignatorys').datagrid('checkRow', j);
            }

        }
    }

    ////Start adv Searching

    function updateProgress() {
        var value =$('#progressbar').progressbar('getValue');
        if (value < 96){
            value += Math.floor(Math.random() * 10);
            $('#progressbar').progressbar('setValue', value);
        }
    }
    function hideShow(miliseconds) {
        $("#progressbarParent").hide();
    }

    function ReLoad()
    {
        var oNOASignatory=
       {
           NOAID : $('#divNOASignatory').data('NOA').NOAID,
       }
        $.ajax
        ({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/NOASignatory/GetByNOASignatory",
            traditional: true,
            data:  JSON.stringify(oNOASignatory),
            contentType: "application/json; charset=utf-8",
            success: function (data)
            {
                var oNOASignatorys = jQuery.parseJSON(data);
                if (oNOASignatorys.length > 0)
                {
                    LoadintoGrid(oNOASignatorys)
                }
                else
                {
                    oNOASignatorys=[];
                    LoadintoGrid(oNOASignatorys)
                }
            },
            error: function (xhr, status, error)
            {
                alert(error);
            }

        });
    }
    $('#btnSave').click(function(e){
        debugger;
        //if(parseInt(_oNOA.NOAID)<=0)
        //{
        //    alert("Data not found");
        //    return;
        //}
        //if(!ValidateInput())return;
        //RefreshSequence();
        var oNOASignatorys = [];
        var oNOASignatorys =   $('#tblNOASignatorys').datagrid('getChecked');


        if(oNOASignatorys.length<=0)
        {
            alert("Data not found");
            return;
        }
        if(oNOASignatorys.length>0)
        {
            for(var i = 0;i<oNOASignatorys.length;i++)
            {
                oNOASignatorys[i].SLNo = i+1;
            }
        }

        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+"/NOASignatory/SaveAll",
            traditional: true,
            data:  JSON.stringify(oNOASignatorys),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                oNOASignatorys =jQuery.parseJSON(data);
                    
                if (oNOASignatorys[0].ErrorMessage == '' || oNOASignatorys[0].ErrorMessage == null)
                {
                    LoadintoGrid(oNOASignatorys)
                    alert("Data Save  Successfully");
                }
                else
                {
                    alert(oNOASignatorys[0].ErrorMessage);
                }
            },
            error: function (xhr, status, error)
            {
                alert(xhr+'~' +status+'~'+error);
            }
        });
    });
  
    $("#btnDelete").click(function () {

        var oNOASignatory = $("#tblNOASignatorys").datagrid("getSelected");
        if (oNOASignatory == null) { alert("Please select an item from list!"); return false; }
        var nIndex=$('#tblNOASignatorys').datagrid('getRowIndex',oNOASignatory);
        if (!confirm("Confirm to Delete?")) return false;

        if(oNOASignatory.NOASignatoryID<=0)
        {
            $("#tblNOASignatorys").datagrid("deleteRow", nIndex);
        }
        else
        {
            var obj =
                     {
                         BaseAddress: _sBaseAddress,
                         Object: oNOASignatory,
                         ControllerName: "NOASignatory",
                         ActionName: "Delete",
                         TableId: "tblNOASignatorys",
                         IsWinClose: false
                     };
            $.icsDelete(obj);
        }
      
    });

    ////Sequence
    function UP()
    {
        debugger;
        var oNOASig = $('#tblNOASignatorys').datagrid('getSelected');
        if(oNOASig==null)
        {
            alert("Please select Item");
            return;
        }
        var SelectedRowIndex=$('#tblNOASignatorys').datagrid('getRowIndex',oNOASig);
        if(SelectedRowIndex==0)return;
        var oNOASigs=$('#tblNOASignatorys').datagrid('getRows');
        var oNOASigs_Temp = [];
        for(var i=0; i<oNOASigs.length; i++)
        {
            if(i==(SelectedRowIndex-1))
            {
                oNOASigs_Temp[i]=oNOASigs[i+1];
            }
            else if(i==SelectedRowIndex)
            {
                oNOASigs_Temp[i]=oNOASigs[i-1];
            }
            else
            {
                oNOASigs_Temp[i]=oNOASigs[i];
            }
            oNOASigs_Temp[i].SLNo=i+1;
        }
        LoadintoGrid(oNOASigs_Temp)
        var newSelectedRowIndex=SelectedRowIndex-1;
        $('#tblNOASignatorys').datagrid('selectRow',newSelectedRowIndex);

    }
    function Down()
    {
        var oNOASigs_Temp = [];
        debugger;
        var oNOASig = $('#tblNOASignatorys').datagrid('getSelected');
        if(oNOASig==null)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblNOASignatorys').datagrid('getRowIndex',oNOASig);
        if(SelectedRowIndex==(oNOASigs_Temp.length-1))return;
        var oNOASigs=$('#tblNOASignatorys').datagrid('getRows');
        oNOASigs_Temp = [];
        for(var i=0; i<oNOASigs.length; i++)
        {
            if(i==(SelectedRowIndex+1))
            {
                oNOASigs_Temp[i]=oNOASigs[i-1];
            }
            else if(i==SelectedRowIndex)
            {
                oNOASigs_Temp[i]=oNOASigs[i+1];
            }
            else
            {
                oNOASigs_Temp[i]=oNOASigs[i];
            }
            oNOASigs_Temp[i].SLNo=i+1;
        }
        LoadintoGrid(oNOASigs_Temp)
        var newSelectedRowIndex=SelectedRowIndex+1;
        $('#tblNOASignatorys').datagrid('selectRow',newSelectedRowIndex);
    }
    function RefreshSequence()
    {
        debugger;
        var oNOASigs =  $('#tblNOASignatorys').datagrid('getChecked');
        if(oNOASigs.length>0)
        {
            for(var i = 0;i<oNOASigs.length;i++)
            {
                oNOASigs[i].SLNo = i+1;
            }
            LoadintoGrid(oNOASigs)
        }
    }
    // end Sequence
    $('#btnClose').click(function(e){
        window.location.href = sessionStorage.getItem("BackLink");
    });

    
    $("#btnAddDetail").click(function () {
        debugger;

        //RefreshComboBoxes();
        _oIsAdd=true;
        _oNOASignatory.NOASignatoryID=0;
        _oNOASignatory.NOASignatoryID=0,
        _oNOASignatory.ApproveBy=0;
        _oNOASignatory.ApprovalHeadID=0;
        _oNOASignatory.RequestTo=0;
        _oNOASignatory.HeadName='';
        _oNOASignatory.Name_Request='';
        _oNOASignatory.NOAID=$('#divNOASignatory').data('NOA').NOAID;
        $("#txtApprovalHead").val(_oNOASignatory.HeadName);
        $("#txtUserName").val(_oNOASignatory.Name_Request);
      
        $("#winNOASignatory").icsWindow("open","Signatory for  "+$('#divNOASignatory').data('NOA').NOANo);
    });
    ///////////
    $("#btnEditDetail").click(function () {
        debugger;
        _oIsAdd=false;
        $("#winNOASignatory input").val("");
        var oNOASignatory = $("#tblNOASignatorys").datagrid("getSelected");
        if (oNOASignatory == null) { alert("Please select an item from list!"); return false; }
        var nIndex=$('#tblNOASignatorys').datagrid('getRowIndex',oNOASignatory);
       
        _oNOASignatory=oNOASignatory;
       
        $("#txtApprovalHead").val(oNOASignatory.HeadName);
        $("#txtUserName").val(oNOASignatory.Name_Request);
      
        $("#winNOASignatory").icsWindow("open","Signatory for  "+$('#divNOASignatory').data('NOA').NOANo);
    });
    $("#btnUpdateNOASignatory").click(function () {
        debugger;
       
        _oNOASignatory.HeadName=$("#txtApprovalHead").val();
        _oNOASignatory.Name_Request=$("#txtUserName").val();
        if(_oNOASignatory.ApproveBy!=0)
        {
            alert("Already approved");
            return;
        }
        if(_oNOASignatory.ApprovalHeadID==0)
        {
            alert("Head not found");
            return;
        }
        if(_oNOASignatory.RequestTo==0)
        {
            alert("Request to not found");
            return;
        }
        if(_oNOASignatory.NOAID==0)
        {
            alert("Invalid  entry");
            return;
        }

        if(_oNOASignatory.NOASignatoryID>0)
        {
            $.icsSave({
                BaseAddress: _sBaseAddress,
                Object: _oNOASignatory,
                ObjectId: _oNOASignatory.NOASignatoryID,
                ControllerName: "NOASignatory",
                ActionName: "Save",
                TableId: "tblNOASignatorys",
                IsWinClose: true,
                Message: "Data Saved Successfully."

            },function (response){
                if(response.status && response.obj!=null){
                    if(response.obj.NOASignatoryID>0){
                        _oNOASignatory=response.obj;
                        debugger;
                    }
                }
            });
        }
        else
        {
            if(_oIsAdd==true)
            {
                var oNOASignatorys= $('#tblNOASignatorys').datagrid('getRows');
                var nIndex=oNOASignatorys.length;
                $('#tblNOASignatorys').datagrid('appendRow', _oNOASignatory);
                $('#tblNOASignatorys').datagrid('selectRow', nIndex);
            }
            else
            {
                var oNOASignatory = $("#tblNOASignatorys").datagrid("getSelected");
                if (oNOASignatory == null) { alert("Please select an item from list!"); return false; }
                var nIndex=$('#tblNOASignatorys').datagrid('getRowIndex',oNOASignatory);
                $('#tblNOASignatorys').datagrid('updateRow', { index: nIndex, row: _oNOASignatory });
            }
            $("#winNOASignatory").icsWindow("close");
        }
       
    });
    $("#btnCloseNOASig").click(function () {
      
        $("#winNOASignatory").icsWindow("close");

    });

    ////

    ////--Pick-///
    $("#btnClrApprovalHead").click(function () {
        $("#txtApprovalHead").val("");
        _oNOASignatory.ApprovalHeadID=0;
       
    });
    $("#btnPickApprovalHead").click(function () {
      
        var oApprovalHead={Name:''};
        GetApprovalHead(oApprovalHead);
    });
    $("#txtApprovalHead").keydown(function (e) {
        var nkeyCode = e.keyCode || e.which;
        if(nkeyCode==13){
            var sApprovalHead=$.trim($("#txtApprovalHead").val());
            if(sApprovalHead=="" || sApprovalHead==null)
            {
                alert("Please, Type name or part of Name");
                $("#txtApprovalHead").focus();
                $("#txtApprovalHead").addClass("errorFieldBorder");
                return;
            }
            var oApprovalHead={Name:$.trim($("#txtApprovalHead").val())};
            GetApprovalHead(oApprovalHead);
        }
        else if(nkeyCode==8){
            $("#txtApprovalHead").val("");
            _oNOASignatory.ApprovalHeadID=0;
            _oNOASignatory.HeadName='';
        }
    });
    function GetApprovalHead(oApprovalHead){


        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oApprovalHead,
            ControllerName: "NOASignatory",
            ActionName: "GetsApprovalHead",
            IsWinClose: false
        };
        $("#progressbar").progressbar({ value: 0 });
        $("#progressbarParent").show();
        var intervalID = setInterval(updateProgress, 250);
        $.icsDataGets(obj, function (response) {

            clearInterval(intervalID);
            $("#progressbarParent").hide();
            if (response.status && response.objs.length > 0) {
                if (response.objs[0].ApprovalHeadID > 0) {
                    debugger;
                    var tblColums = [];
                    var oColumn = { field: "ApprovalHeadID", title: "Code", width: 50, align: "center" };tblColums.push(oColumn);
                    oColumn = { field: "Name", title: "Name", width: 200, align: "left" };tblColums.push(oColumn);

                    var oPickerParam = {
                        winid: 'winApprovalHead',
                        winclass:'clsApprovalHeadPicker',
                        winwidth: 460,
                        winheight: 460,
                        tableid: 'tblApprovalHeadPicker',
                        tablecolumns: tblColums,
                        datalist: response.objs,
                        multiplereturn: false,
                        searchingbyfieldName:'Name',
                        windowTittle: 'ApprovalHead List'
                    };
                    $.icsPicker(oPickerParam);
                    IntializePickerbutton(oPickerParam);//multiplereturn, winclassName
                }
                else { alert(response.objs[0].ErrorMessage); }
            }
            else{
                alert("No contractor found.");
            }
        });
    }
    $("#btnClrUser").click(function () {
        $("#txtUserName").val("");
        _oNOASignatory.RequestTo=0;
    });
    $("#btnPickUser").click(function () {

        var oUser = {
            UserName:  $.trim($("#txtUserName").val())
        };
        GetUsers(oUser)
    });
    $("#txtUserName").keydown(function (e) {
        var nkeyCode = e.keyCode || e.which;
        if(nkeyCode==13){
            var sUserName=$.trim($("#txtUserName").val());
            if(sUserName=="" || sUserName==null)
            {
                alert("Please, Type name or part of Name");
                $("#txtUserName").focus();
                $("#txtUserName").addClass("errorFieldBorder");
                return;
            }
            var oUser = {
                UserName:  $.trim($("#txtUserName").val())
            };
            GetUsers(oUser)
        }
        else if(nkeyCode==8){
            $("#txtUserName").val("");
            _oNOASignatory.RequestTo=0;
           
        }
    });
    function GetUsers(oUser){
        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oUser,
            ControllerName: "NOASignatory",
            ActionName: "GetUesrsByName",
            IsWinClose: false
        };
        $("#progressbar").progressbar({ value: 0 });
        $("#progressbarParent").show();
        var intervalID = setInterval(updateProgress, 250);
        $.icsDataGets(obj, function (response) {
            clearInterval(intervalID);
            $("#progressbarParent").hide();
            if (response.status && response.objs.length > 0) {
                if (response.objs[0].UserID > 0) {
                    debugger;
                    var tblColums = [];
                    var oColumn = { field: "UserName", title: "Name", width: 190, align: "left" };tblColums.push(oColumn);
                    oColumn = { field: "LogInID", title: "LogInID", width: 140, align: "left" };tblColums.push(oColumn);

                    var oPickerParam = {
                        winid: 'winUserPicker',
                        winclass:'clsUserPicker',
                        winwidth: 460,
                        winheight: 460,
                        tableid: 'tblUserPicker',
                        tablecolumns: tblColums,
                        datalist: response.objs,
                        multiplereturn: false,
                        searchingbyfieldName:'UserName',
                        windowTittle: 'User List'
                    };
                    $.icsPicker(oPickerParam);
                    IntializePickerbutton(oPickerParam);//multiplereturn, winclassName
                }
                else { alert(response.objs[0].ErrorMessage); }
            }
            else{
                alert("No User found.");
            }
        });
    }
    /// End Pick PI
    function IntializePickerbutton(oPickerobj) {
        $("#" + oPickerobj.winid).find("#btnOk").click(function () {
            //for Single Select
            SetPickerValueAssign(oPickerobj);
        });
        $(document).find('.' + oPickerobj.winclass).keydown(function (e) {
            if (e.which == 13)//enter=13
            {
                SetPickerValueAssign(oPickerobj);
            }
        });
    }

    function SetPickerValueAssign(oPickerobj) {
        debugger;
        var oreturnObj = null, oreturnobjs = [];
        if (oPickerobj.multiplereturn) {
            oreturnobjs = $('#' + oPickerobj.tableid).datagrid('getChecked');
        } else {
            oreturnObj = $('#' + oPickerobj.tableid).datagrid('getSelected');
        }
        $("#" + oPickerobj.winid).icsWindow("close");
        $("#" + oPickerobj.winid).remove();
        if (oPickerobj.winid == 'winApprovalHead') {
            if (oreturnObj != null && oreturnObj.ApprovalHeadID > 0)
            {
                $('#txtApprovalHead').val(oreturnObj.Name);
                _oNOASignatory.ApprovalHeadID= oreturnObj.ApprovalHeadID;
            }
            else{
                alert("Data not found");
            }
        }
        else if (oPickerobj.winid == 'winUserPicker')
        {
            if (oreturnObj != null && oreturnObj.UserID > 0)
            {
                $('#txtUserName').val(oreturnObj.UserName);
                _oNOASignatory.RequestTo= oreturnObj.UserID;
            }
            else{
                alert("Data not found");
            }
        }
        else
        {
            alert("Data not found");
            return false;
        }
    }

    function CopyDetail()
    {
        debugger;
        var oNOASignatory = $("#tblNOASignatorys").datagrid("getSelected");
        if (oNOASignatory == null) { alert("Please select an item from list!"); return false; }
      
        var oNOASignatory_New={
            NOASignatoryID:0,
            NOAID: oNOASignatory.NOAID,
            RequestTo:oNOASignatory.RequestTo,
            ApproveBy:0,
            ApprovalHeadID:oNOASignatory.ApprovalHeadID,
            HeadName:oNOASignatory.HeadName,
            IsApprove:false,
            Name_Request:oNOASignatory.Name_Request
        }
       
        var oNOASignatorys= $('#tblNOASignatorys').datagrid('getRows');
        var nIndex=oNOASignatorys.length;
        $('#tblNOASignatorys').datagrid('appendRow', oNOASignatory_New);
        $('#tblNOASignatorys').datagrid('selectRow', nIndex);

    }

</script>





