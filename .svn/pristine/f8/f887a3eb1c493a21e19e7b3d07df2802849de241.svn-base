@model ESimSol.BusinessObjects.Employee
<html>
<head>
    <link href="@Url.Content("~/Content/CSS/icon.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/easyui.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/Pikerstyle.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ics.customize.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.easyui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>
</head>
<body>
    @using System.Web.UI.WebControls
    @using ESimSol.BusinessObjects
    <div style="font-family: Tahoma">
        <table border="0" cellspacing="2" cellpadding="2">
            <tr>
                <td style="background-color: #CFB53B; text-align: center; width: 1000px; color: White">
                    <label id="lblHeaderName" style="font-size: 15px; font-weight: bold; text-decoration: Underline;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          width: 930px">
                        Employee Search
                    </label>
                </td>
            </tr>
        </table>
    </div>
    <div style="clear: both;">
    </div>
    <div style="width: 100%; font-family: Tahoma;">
        <div style="width: 47%; float: left;">
            <table style="width: 100%; font-size: 12px; font-weight: bold; text-align: right">
                <tr>
                    <td style="">
                        Employee Name :
                    </td>
                    <td>
                        @Html.TextBox("txtEmployeeName", " ", new { size = "36", Style = "width:295px;" })
                </td>
            </tr>
            <tr>
                <td style="">
                    Code :
                </td>
                <td>
                    @Html.TextBox("txtCode", " ", new { size = "36", Style = "width:295px;" })
            </td>
            </tr>
            <tr>
                <td style="">
                    Authentication No :
                </td>
                    <td>@Html.TextBox("txtEnrollNo", " ", new { size = "36", Style = "width:165px;" })
                    <input id="chkNotassignedyet" type="checkbox" /> Not assigned yet
                </td>
            </tr>
            <tr id="trGender">
                <td style="">
                    Gender :
                </td>
                <td>
                    <select id="cboGender" style="width:295px">
                        @* class="_select_change_Gender"*@
                    <option value="0">None</option>
                    <option value="1">Male</option>
                    <option value="2">Female</option>
                    <option value="3">Other</option>
                </select>
            </td>
            </tr>
            <tr>
                <td>
                    Attendance Scheme :
                </td>
                <td>
                    @Html.TextBox("txtAttendanceScheme", " ", new { size = "29", disabled = "disable", Style = "width:255px;" })
                    <input type="hidden" id="attendanceSchemeID" />
                    <input value="pick" type="button" id="attendanceSchemePicker" style="width: 38px"
                           onclick="attendanceSchemePicker()" />
                </td>
            </tr>
            <tr>
                <td>
                    Location :
                </td>
                <td>
                    @Html.TextBox("txtLocation", " ", new { size = "29", disabled = "disable", Style = "width:255px;" })
                <input type="hidden" id="locationID" />
                <input value="pick" type="button" id="locationPicker" style="width: 38px" onclick="LocationPicker()" />
            </td>
            </tr>
            <tr>
                <td>
                    Dept./Section :
                </td>
                <td>
                    @Html.TextBox("txtDepartment", " ", new { size = "29", disabled = "disable", Style = "width:255px;" })
                <input type="hidden" id="departmentID" />
                <input value="pick" type="button" id="departmentPicker" style="width: 38px" onclick="DepartmentPicker()" />
            </td>
            </tr>
            <tr>
                <td>
                    Designation :
                </td>
                <td>
                    @Html.TextBox("txtDesignation", " ", new { size = "29", disabled = "disable", Style = "width:255px;" })
                <input type="hidden" id="designationID" />
                <input value="pick" type="button" id="designationPicker" style="width: 38px" onclick="DesignationPicker()" />
            </td>
            </tr>

            <tr>
                <td>
                    Employee Type :
                </td>
                <td>
                    @*@Html.DropDownListFor(model => model.Employee_HRMType, new SelectList(Enum.GetValues(typeof(ICS.Base.Client.Utility.EnumEmployee_HRMType))), new { id = "cboEmployeeType", style = "width: 243px;" })*@
                    <select id="cboEmployeeType" style="width: 295px;" onchange=""></select>
                </td>
            </tr>

            <tr>
                <td>
                    Gender :
                </td>
                <td>
                    <select id="cboGender" style="width: 295px;">
                        <option value="0">None</option>
                        <option value="1">Male</option>
                        <option value="2">Female</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>
                    Current Shift :
                </td>
                <td>
                    @*@Html.DropDownListFor(model => model.Employee_HRMType, new SelectList(Enum.GetValues(typeof(ICS.Base.Client.Utility.EnumEmployee_HRMType))), new { id = "cboEmployeeType", style = "width: 243px;" })*@
                    <select id="cboShift" style="width: 295px;" onchange=""></select>
                </td>
            </tr>
            <tr>
                <td>
                    Card Status :
                </td>
                <td>
                    @Html.DropDownListFor(model => model.EmployeeCardStatus, new SelectList(Enum.GetValues(typeof(ESimSol.BusinessObjects.EnumEmployeeCardStatus))), new { id = "cboEmployeeCardStatus", style = "width: 295px;" })

                </td>
            </tr>
            <tr>
                <td>
                    Working Status :
                </td>
                <td>
                    @Html.DropDownListFor(model => model.EmployeeCardStatus, new SelectList(Enum.GetValues(typeof(ESimSol.BusinessObjects.EnumEmployeeWorkigStatus))), new { id = "cboEmployeeWorkigStatus", style = "width: 295px;" })

                </td>
            </tr>
                <tr>
                    <td>
                        Date Of Birth :
                    </td>
                    <td>
                        @*<select id="cboFloor" style="width:243px;">
                    <option value="0">None</option>
                    <option value="5">5th floor</option>
                    <option value="6">6th floor</option>
                    <option value="7">7th floor</option>
                </select>*@
                        @*<input id="chkDate" type="checkbox" />*@
                        <select id="cboDateType" style="width: 65px">
                            <option value='0'>None</option>
                            <option value='1'>Equal</option>
                            <option value='2'>Between</option>
                        </select>
                        <span id="regionDateFrom" style="padding-left: 5px;">
                            <span>
                                <select id="cboDay" style="width:40px;"></select>
                            </span>
                            <span>
                                <select id="cboMonth" style="width:50px;"></select>
                            </span>
                        </span><span id="regionDateTo" style="padding-left: 5px;">
                            <span style="padding-right: 5px;">
                                To
                            </span>
                            <span>
                                <select id="cboEndDay" style="width:40px;"></select>
                            </span>
                            <span>
                                <select id="cboEndMonth" style="width:50px;"></select>
                            </span>
                        </span><br />
                        @*<input id="dtDateOfBirth" type="text" style="width: 222px" class="easyui-datebox" required="required" data-options="formatter:icsdateformat" />*@
                    </td>
                </tr>
                <tr>
                    <td>
                        Joining Date :
                    </td>
                    <td>
                        <input type="checkbox" id="chkJoiningDate" class="chkReset" />
                        <input id="dtDateFrom" type="text" style="width: 128px;" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" />&nbsp; To &nbsp;
                        <input id="dtDateTo" type="text" style="width: 128px" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" />
                    </td>
                </tr>
<tr>
    <td></td>
    <td>
        <input type="checkbox" id="chkActive" />
        Active
        <input type="checkbox" id="chkInActive" />
        InActive
        <input type="checkbox" id="chkUser" />
        User
    </td>
</tr>
<tr>
    <td></td>
    <td>
        <input type="checkbox" id="chkOfficialNotAssign" />
        official Information is not assigned yet
    </td>
</tr>
<tr>
    <td></td>
    <td>
        <input type="checkbox" id="chkOfficialAssign" />
        official Information assigned employee
    </td>
</tr>
<tr>
    <td></td>
    <td>
        <input type="checkbox" id="chkCardNotAssigned" />
        Card is not assigned yet
    </td>
</tr>
<tr>
    <td></td>
    <td>
        <input type="checkbox" id="chkSalarystructureNotAssigned" />
        Salary structure is not assigned yet
    </td>
</tr>
@*                     <tr>
        <td colspan="2" style="text-align:center;">
          <input type="checkbox" id="chkUser"/>
            User
        </td>
    </tr>*@
<tr>
    <td></td>
    <td>
        <input type="button" value="Reset" id="btnReset" style="width: 70px" onclick="Reset()" />
        <input type="button" value="Search" id="btnSearch" style="width: 70px" />
    </td>
</tr>
</table>
</div>
<div style="width: 52%; float: right;">
    <table id="tblEmployees" title="Employee List" class="easyui-datagrid"
           style="width: 480px; height: 425px;" fitcolumns="true" rownumbers="true" pagination="false"
           singleselect="false" autorowheight="false" toolbar="#toolbar">
        <thead>
            <tr>
                <th data-options="field:'Selected',checkbox:true">
                </th>
                <th field="Code" width="200">
                    Code
                </th>
                <th field="Name" width="150">
                    Employee Name
                </th>

                @*                            <th field="LocationName" width="124">
                        Location
                    </th>*@
                <th field="DepartmentName" width="100">
                    Department
                </th>
                <th field="DesignationName" width="100">
                    Designation
                </th>
            </tr>
        </thead>
    </table>
    @* Load <input id="txtLoadRecords" type="text" style="width:40"/>Records &nbsp;
        <label id="lblcount"></label>
        <div style="float: right; margin-right : 15px;">
            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" plain="true"
            onclick="Next()">Next</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" plain="true"
               onclick="OkButtonClick()">Ok</a> <a href="javascript:void(0)" class="easyui-linkbutton"
                                                   iconcls="icon-cancel" plain="true" onclick="Close()">Close</a>
        </div>*@



    <table style="width: 485px; font-size: 12px; font-weight: bold;">
        <tr>
            <td style="text-align: left">
                @*Load <input id="txtLoadRecords" type="text" style="width:40"/>Records &nbsp; *@
                <input id="chkRange" type="checkbox" />Range
                <label id="lblRange1">
                    <input id="txtFrom" type="text" style="width:40px" />&nbsp; To &nbsp;
                </label>
                <label id="lblRange2">
                    <input id="txtTo" type="text" style="width:40px" />
                </label>
                <label id="lblcount"></label>
            </td>
            <td style="text-align: right">
                <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" plain="true" onclick="Next()">Next</a>
                <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" plain="true" onclick="OkButtonClick()">Ok</a>
                <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true" onclick="Close()">Close</a>
            </td>
        </tr>
        <tr>
            <td style="text-align: left"></td>
            <td style="text-align: right"></td>
        </tr>
    </table>

</div>
</div>
<div style="clear: both;">
</div>
</body>
</html>

<script type="text/javascript">
    var _oDepartmentRequirementPolicy=null;
    var _oEmployee;
    var _oEmployees=[];
    var _bMultipleItemReturn = false;
    var obj = window.dialogArguments;
    var _sBaseAddress = "";
    var _oWeekDays = [];
    var _oRosterPlans = [];
    var _oAttendanceCalenders = [];
    var EmployeeTypes = [];
    var _oDepartmentRequirementPolicys = [];
    var _bIsUnOfficial=false

    var _sName=" ";
    var _sCode=" ";
    var _sEnrollNo=" ";
    var _nASID="";
    var _nlocationID="";
    var _ndepartmentID="";
    var _ndesignationID="";
    var _sGender='None';
    var _nEmployeeType =0;
    var _nShift =0;
    var _bIsActive=0;
    var _bIsInactive=0;
    var _bIsUnOfficial=0;
    var _bIsOfficial=0;
    var _nLastEmployeeID=0;
    var _bIsUser=0;
    var _sEmployeeIDs="";
    var _nCardStatus=0;
    var _nCardNotAsigned=0;
    var _nWorkingStatus = 0;
    var _nSalarystructureNotAsigned = 0;
    var _bNext = false;
    var _nLoadRecords = 0;
    var _nRowLength = 0;
    var _dStartDate = "";
    var _dEndDate = "";
    var _nDateType = 0;
    var _bIsnotEnroll=false;

    $(document).ready(function () {
        //debugger;
        var obj = window.dialogArguments;
        _bMultipleItemReturn = obj.MultipleItemReturn;
        if (_bMultipleItemReturn == false) {
            $('#tblEmployees').datagrid('hideColumn', 'Selected');
        }
        _oEmployee = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
        _sBaseAddress =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        LoadEmployeeType();
        LoadCurrentShift();
        $('#txtLoadRecords').numberbox({min:0, precision:0 });
        $('#txtFrom').numberbox({min:0, precision:0 });
        $('#txtTo').numberbox({min:0, precision:0 });
        //document.getElementById('txtLoadRecords').value=50;
        //document.getElementById('txtFrom').value=1;
        //document.getElementById('txtTo').value=50;
        $('#txtFrom').numberbox('setValue',1);
        $('#txtTo').numberbox('setValue',50);
        document.getElementById("lblRange1").style.display = 'none';
        document.getElementById("trGender").style.display = 'none';
        //$('#dtDateOfBirth').datebox('setValue', icsdateformat(new Date()));
        SetDateTime();
        var oDate=new Date();
        SetStartTime(oDate);
        SetEndTime(oDate);
        var nDateType = $("#cboDateType").val();
    
        if (nDateType == 0) 
        {            
            document.getElementById("regionDateTo").style.display = 'none'; 
            document.getElementById("regionDateFrom").style.display = 'none';     
        }
        $('#dtDateFrom').datebox('setValue', icsdateformat(new Date()));
        $('#dtDateTo').datebox('setValue', icsdateformat(new Date()));
    });

    function SetDateTime()
    {
        var oDate=new Date();
        //oDate.setFullYear(2010);
        /*---------------------------------------- Start Set Year-------------------------------------------*/
        //var sYear="";
        //sYear +="<option value='0'>"+'Year'+"</option>";
        //for(var i=0; i<=50; i++)
        //{
        //    sYear += "<option value='" + (parseInt(oDate.getFullYear()) + parseInt(i)) +"'>" + (parseInt(oDate.getFullYear()) + parseInt(i)) +"</option>";
        //}
        //$('#cboYear').html(sYear);
        //$('#cboEndYear').html(sYear);
        /*---------------------------------------- End Set Year-------------------------------------------*/


        /*---------------------------------------- Start Set Month-------------------------------------------*/
        var sMonth="";
        var oMonths=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        sMonth +="<option value='0'>"+'Month'+"</option>";
        for(var i=0; i<oMonths.length; i++)
        {
            sMonth += "<option value='" +(parseInt(i)+1)+"'>" + oMonths[i] +"</option>";
        }
        $('#cboMonth').html(sMonth);
        $('#cboEndMonth').html(sMonth);
        /*---------------------------------------- End Set Month-------------------------------------------*/


        /*---------------------------------------- Start Set Date-------------------------------------------*/
        var sDay ="<option value='0'>"+'Day'+"</option>";
        $('#cboDay').html(sDay);
        $('#cboEndDay').html(sDay);
        /*---------------------------------------- End Set Date-------------------------------------------*/
    }

    //$('#cboYear').change(function(e)
    //{
    //    var nYear=$('#cboYear').val();
    //    var nMonth=$('#cboMonth').val();
    //    if(nYear>0 && nMonth>0)
    //    {
    //        $('#cboDay').html(SetDateEvent(nYear, nMonth));
    //    }

    //});

    //$('#cboEndYear').change(function(e)
    //{
    //    var nYear=$('#cboEndYear').val();
    //    var nMonth=$('#cboEndMonth').val();
    //    if(nYear>0 && nMonth>0)
    //    {
    //        $('#cboEndDay').html(SetDateEvent(nYear, nMonth));
    //    }

    //});

    $('#cboMonth').change(function(e)
    {
        //var nYear=$('#cboYear').val();
        var nMonth=$('#cboMonth').val();
        if(nMonth>0)
        {
            $('#cboDay').html(SetDateEvent(nMonth));
        }

    });

    $('#cboEndMonth').change(function(e)
    {

        //var nYear=$('#cboEndYear').val();
        var nMonth=$('#cboEndMonth').val();
        if(nMonth>0)
        {
            $('#cboEndDay').html(SetDateEvent(nMonth));
        }

    });
    
    function SetDateEvent(nMonth)
    {
        
        var oDate=new Date();
        var sDay="";
        if( parseInt(nMonth)>0)
        {
            //var nDay= new Date(parseInt(nYear), parseInt(nMonth), 0).getDate();
            var nDay=0;
            if(nMonth==1 || nMonth == 3 || nMonth == 5 || nMonth == 7 || nMonth == 8 || nMonth == 10 || nMonth == 12)
            {
                nDay = 31;
            }
            else if(nMonth==4 || nMonth == 6 || nMonth == 9 || nMonth == 11)
            {
                nDay = 30;
            }
            else if(nMonth == 2)
            {
                nDay = 29;
            }
            sDay +="<option value='0'>"+'Day'+"</option>";
            for(var i=1; i<=parseInt(nDay); i++)
            {
                if(i<10)
                {
                    sDay += "<option value='" +i+"'>" + '0'+i +"</option>";
                }
                else
                {
                    sDay += "<option value='" +i+"'>" + i +"</option>";
                }
            }
        }
        return sDay;
    }

    function SetStartTime(oDate)
    {
      
        //var nyear=oDate.getFullYear();
        var nmonth=oDate.getMonth()+1;
        var nday=oDate.getDate();
        //$('#cboYear').val(nyear);
        $('#cboMonth').val(nmonth); 
        $('#cboDay').html(SetDateEvent(nmonth)); 
        $('#cboDay').val(nday); 
    }

    function SetEndTime(oDate)
    {
        debugger;
        //var nyear=oDate.getFullYear();
        var nmonth=oDate.getMonth()+1;
        var nday=oDate.getDate();
        //$('#cboEndYear').val(nyear);
        $('#cboEndMonth').val(nmonth); 
        $('#cboEndDay').html(SetDateEvent(nmonth)); 
        $('#cboEndDay').val(nday); 

    }

    function GenerateStartTimeInString()
    {
        var sDate=  $('#cboMonth').val() +'-'+ $('#cboDay').val();
        return sDate;
    }

    function GenerateEndTimeInString()
    {
        var sDate=  $('#cboEndMonth').val() +'-'+ $('#cboEndDay').val() ;
        return sDate;
    }

    function ValidationOfStartTime()
    {
        //if($('#cboYear').val()==0)
        //{
        //    alert("Please select a year.");
        //    document.getElementById('cboYear').focus();
        //    return false;
        //}
        if($('#cboMonth').val()==0)
        {
            alert("Please select a month.");
            document.getElementById('cboMonth').focus();
            return false;
        }
        if($('#cboDay').val()==0)
        {
            alert("Please select a day.");
            document.getElementById('cboDay').focus();
            return false;
        }
        return true;
    }

    function ValidationOfEndTime()
    {
        //if($('#cboEndYear').val()==0)
        //{
        //    alert("Please select a year.");
        //    document.getElementById('cboEndYear').focus();
        //    return false;
        //}
        if($('#cboEndMonth').val()==0)
        {
            alert("Please select a month.");
            document.getElementById('cboEndMonth').focus();
            return false;
        }
        if($('#cboEndDay').val()==0)
        {
            alert("Please select a day.");
            document.getElementById('cboEndDay').focus();
            return false;
        }
        return true;
    }

    $('#cboDateType').change(function ()
    {
        debugger
        var nDateType = $("#cboDateType").val();
        if (nDateType == 0) {            
            document.getElementById("regionDateTo").style.display = 'none'; 
            document.getElementById("regionDateFrom").style.display = 'none';     
        }
        if (nDateType == 1 ) 
        {            
            document.getElementById("regionDateFrom").style.display = '';
            document.getElementById("regionDateTo").style.display = 'none';       
        }
        if (nDateType == 2 ) 
        {
            document.getElementById("regionDateFrom").style.display = '';
            document.getElementById("regionDateTo").style.display = ''; 
        }
    });


    $('#chkRange').click(function()
    {
        if(document.getElementById("chkRange").checked == true)
        {
            document.getElementById("lblRange1").style.display = '';

        }
        else
        {
            document.getElementById("lblRange1").style.display = 'none';

        }
    });

    function DepartmentPicker()
    {
        var oParameter = new Object();
        oParameter.MultipleItemReturn = false;
        var url = _sBaseAddress + "/Department/DepartmentPickerWithCheckBox?id="+0;
        var nLeft=(window.screen.width/2)-(550/2);
        var nHeight=(window.screen.height/2)-(470/2);
        var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:400;dialogTop:100;center:yes;resizable:no;status:no;scroll:no');

        if(oReturnObject!=null)
        {
            $("#txtDepartment")[0].value = oReturnObject.text;
            $("#departmentID")[0].value = oReturnObject.id;
        }
    }

    function LocationPicker() {

        var oParameter = new Object();
        oParameter.MultipleItemReturn = false;
        var url = _sBaseAddress + "/Location/LocationPickerWithCheckBox?id="+0;
        var nLeft=(window.screen.width/2)-(550/2);
        var nHeight=(window.screen.height/2)-(470/2);
        var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:400;dialogTop:100;center:yes;resizable:no;status:no;scroll:no');

        if(oReturnObject!=null)
        {
            $("#txtLocation")[0].value = oReturnObject.text;
            $("#locationID")[0].value = oReturnObject.id;
        }
    }

    function attendanceSchemePicker()
    {

        var oParameter = new Object();
        oParameter.MultipleItemReturn = false;
        var url = _sBaseAddress + "/AttendanceScheme/AttendanceSchemeSearch";
        var nLeft=(window.screen.width/2)-(850/2);
        var nHeight=(window.screen.height/2)-(423/2);
        var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:423px;dialogWidth:850px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:423px;dialogWidth:850px;dialogLeft:150;dialogRight:150;dialogTop:200;center:yes;resizable:yes;status:no;scroll:no');

        if (oReturnObject==null)return;
        $("#txtAttendanceScheme")[0].value = oReturnObject.Name;
        $("#attendanceSchemeID")[0].value = oReturnObject.AttendanceSchemeID;
    }

    function DesignationPicker()
    {

        var oParameter = new Object();
        oParameter.MultipleItemReturn = false;
        var url = _sBaseAddress + "/Designation/DesignationPickerWithCheckBox?id=0";
        var nLeft=(window.screen.width/2)-(550/2);
        var nHeight=(window.screen.height/2)-(470/2);
        var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:400;dialogTop:100;center:yes;resizable:no;status:no;scroll:no');
        if(oReturnObject!=null)
        {
            $("#txtDesignation")[0].value = oReturnObject.text;
            $("#designationID")[0].value = oReturnObject.id;
        }

    }

    function LoadEmployeeType()
    {
        var listEmployeeTypes="<option value='"+0+"'>" +"--Select Employee Types--" + "</option>";

        if(_oEmployee.EmployeeTypes.length>0)
        {
            for (var j = 0; j < _oEmployee.EmployeeTypes.length; j++)
            {
                listEmployeeTypes += "<option value='" + _oEmployee.EmployeeTypes[j].EmployeeTypeID+"'>" + _oEmployee.EmployeeTypes[j].Name+"</option>";
            }
        }
        $("#cboEmployeeType").html(listEmployeeTypes);

    }

    function LoadCurrentShift()
    {
        var list="<option value='"+0+"'>" +"--Select Shift--" + "</option>";

        if(_oEmployee.EmployeeTypes.length>0)
        {
            for (var j = 0; j < _oEmployee.Shifts.length; j++)
            {
                list += "<option value='" + _oEmployee.Shifts[j].ShiftID+"'>" + _oEmployee.Shifts[j].ShiftWithDuration+"</option>";
            }
        }
        $("#cboShift").html(list);

    }

    $('#btnSearch').click(function()
    {

        _sName=document.getElementById("txtEmployeeName").value;
        _sCode= document.getElementById("txtCode").value;
        _sEnrollNo= document.getElementById("txtEnrollNo").value;
        _bIsnotEnroll = $("#chkNotassignedyet").is(':checked');
        _nASID= document.getElementById("attendanceSchemeID").value;
        _nlocationID= document.getElementById("locationID").value;
        _ndepartmentID= document.getElementById("departmentID").value;
        _ndesignationID= document.getElementById("designationID").value;
        _nWorkingStatus = document.getElementById("cboEmployeeWorkigStatus").selectedIndex;

        var e = document.getElementById("cboGender");
        _sGender=e.options[e.selectedIndex].innerHTML;

        var et = document.getElementById("cboEmployeeType");
        _nEmployeeType = et.options[et.selectedIndex].value;

        var s = document.getElementById("cboShift");
        _nShift = s.options[s.selectedIndex].value;

        //var Floor = document.getElementById("cboFloor");
        //_sFloor=Floor.options[Floor.selectedIndex].innerHTML;
        _dStartDate = "";
        _dEndDate = "";
        _nDateType = 0;
        _dStartDate = GenerateStartTimeInString();
        _dEndDate = GenerateEndTimeInString();
        _nDateType = document.getElementById("cboDateType").selectedIndex;

        _bIsActive=0;
        _bIsInactive=0;
        _bIsUnOfficial=0
        _bIsUser=0;
        _bIsOfficial=0;
        if (document.getElementById("chkActive").checked==true)
        {_bIsActive=1;}
        if (document.getElementById("chkInActive").checked==true)
        {_bIsInactive=1;}
        if (document.getElementById("chkOfficialNotAssign").checked)
        {_bIsUnOfficial=1;}
        if (document.getElementById("chkOfficialAssign").checked)
        {_bIsOfficial=1;}
        if (document.getElementById("chkUser").checked)
        {_bIsUser=1;}
        _nCardStatus=document.getElementById("cboEmployeeCardStatus").selectedIndex;
        if (document.getElementById("chkCardNotAssigned").checked==true)
        {_nCardNotAsigned=1;}
        if (document.getElementById("chkSalarystructureNotAssigned").checked==true)
        {_nSalarystructureNotAsigned=1;}

        _nLastEmployeeID=0;
        _sEmployeeIDs="";
        Search();

    });

    function Search()
    {
        if(!_bNext)
        {
            _nRowLength = 0;
            _nLastEmployeeID = 0;
        }

        var bIsJoiningDate = $("#chkJoiningDate").is(':checked');
        var dtDateFrom = $('#dtDateFrom').datebox('getValue');
        var dtDateTo = $('#dtDateTo').datebox('getValue');
        if(bIsJoiningDate)
        {
            if(new Date(dtDateFrom)>new Date(dtDateTo))
            {
                alert("Invalid Joining Date Range!");
                return;
            }
        }

        if (_sName==" " && _sCode==" " && _sEnrollNo==" " && _nASID==""
            && _nlocationID=="" && _ndepartmentID=="" && _ndesignationID==""
            && _sGender=='None' && _nEmployeeType==0 && _nShift==0
            && _bIsActive==0 && _bIsUnOfficial==0 && _bIsInactive==0 && _bIsInactive==0
            && _bIsUser==0 && _bIsOfficial==0 && _nCardStatus==0 && _nCardNotAsigned==0 && _nWorkingStatus == 0 && _nSalarystructureNotAsigned == 0 && _nDateType == 0 && !bIsJoiningDate && !_bIsnotEnroll)
        {
            alert('Please select a criteria to search a item.');
            return;
        }

        _nLoadRecords = document.getElementById("txtTo").value;
        if(document.getElementById("chkRange").checked == true)
        {
            var RangeFrom = 0;
            var RangeTo = 0;
            RangeFrom = parseFloat(document.getElementById("txtFrom").value);
            RangeTo = parseFloat(document.getElementById("txtTo").value);

            if(RangeFrom > RangeTo)
            {
                alert("Invalid Range !");
                return;
            }
            _nRowLength = 0;
            _nLoadRecords = 0;

            _nRowLength = RangeFrom-1;
            _nLoadRecords = RangeTo - RangeFrom +1;

        }

        var sParam="";
        sParam=_sName+ '~' + _sCode+ '~' +_nASID+ '~' +_nlocationID+ '~' +_ndepartmentID+ '~' +
               _ndesignationID+ '~' +_sGender+ '~' +_nEmployeeType+ '~' +_nShift+ '~' +_bIsActive+ '~' +
               _bIsUnOfficial+ '~' +_bIsInactive+ '~' +_sEmployeeIDs+ '~' +_bIsUser+'~' +_bIsOfficial+'~' +_nCardStatus+'~'
               +_nCardNotAsigned + "~" + _nWorkingStatus+"~"+_nSalarystructureNotAsigned +"~"+_dStartDate+"~"+_dEndDate+"~"+
               _nDateType+"~"+_nRowLength+"~"+_nLoadRecords+"~"+ bIsJoiningDate + "~" + dtDateFrom + "~" + dtDateTo+"~"+_sEnrollNo+"~"+_bIsnotEnroll;

        $.ajax({
            type: "POST",
            dataType: "json",
            url: _sBaseAddress + "/Employee/EmployeeSearch",
            traditional: true,
            data:  JSON.stringify({sParam :sParam}),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var  oEmps = jQuery.parseJSON(data);
                if (oEmps != null) {
                    if(oEmps.length>0)
                    {
                        //                    if(!_bNext)
                        //                    {
                        //                        _oEmployees=[];
                        //                        RefreshList(_oEmployees);
                        //                    }
                        for (var j = 0; j < oEmps.length; j++)
                        {
                            $('#tblEmployees').datagrid('appendRow',oEmps[j]);
                        }
                    }
                    else
                    {
                        //                    if(_bNext == false)
                        //                    {
                        //                        alert("Data not found !!");
                        //                        _oEmployees=[];
                        //                        RefreshList(_oEmployees);
                        //                     }
                        //                    else
                        //                    {
                        alert("No more data found!");
                        //                    }
                    }
                    var oEmployees=$('#tblEmployees').datagrid('getRows');
                    document.getElementById("lblcount").innerHTML = " | Count ="+ oEmployees.length;
                    _bNext = false;
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }
        });
    }

    function Next()
    {
        var oEmployees =[];
        oEmployees=$('#tblEmployees').datagrid('getRows');
        _nRowLength = oEmployees.length;
        _bNext = true;

        if (oEmployees.length<=0)
        {
            alert('Please Select Criteria and click on "Search" to find information.!!');
            return;
        }
        var oEmployee=oEmployees[oEmployees.length-1];

        if (_nLastEmployeeID==oEmployee.EmployeeID)
        {
            alert('No more data found');
            return;
        }
        _nLastEmployeeID=oEmployee.EmployeeID;
        Search();
    }

    function RefreshList(oEmployee_HRMs)
    {
        var data=oEmployee_HRMs;
        data={"total":""+data.length+"","rows":data};
        $('#tblEmployees').datagrid('loadData',data);
        //$('#tblEmployees').datagrid({ selectOnCheck: false, checkOnSelect: false });
    }

    function  Reset() {
        debugger
        document.getElementById("txtEmployeeName").value=" ";
        document.getElementById("txtCode").value=" ";
        document.getElementById("txtEnrollNo").value=" ";

        document.getElementById("attendanceSchemeID").value="";
        document.getElementById("txtAttendanceScheme").value="";

        document.getElementById("locationID").value="";
        document.getElementById("txtLocation").value="";

        document.getElementById("departmentID").value="";
        document.getElementById("txtDepartment").value="";

        document.getElementById("designationID").value="";
        document.getElementById("txtDesignation").value="";

        document.getElementById("cboShift").value=0;
        document.getElementById("cboEmployeeType").value=0;
        document.getElementById("cboGender").value=0;
        document.getElementById("chkActive").checked=false;
        document.getElementById("chkOfficialNotAssign").checked=false;
        document.getElementById("chkOfficialAssign").checked=false;
        document.getElementById("cboEmployeeCardStatus").selectedIndex=0;
        document.getElementById("chkCardNotAssigned").checked=false;
        document.getElementById("cboEmployeeWorkigStatus").selectedIndex= 0;
        document.getElementById("chkSalarystructureNotAssigned").checked=false;
        //document.getElementById("cboFloor").value=0;
        document.getElementById("chkNotassignedyet").checked=false;

        var list = [];
        RefreshList(list);

        _sName=" " ;
        _sCode=" " ;
        _sEnrollNo=" ";
        _nASID="";
        _nlocationID="";
        _ndepartmentID="";
        _ndesignationID="";
        _sGender='None';
        _nEmployeeType=0;
        _nShift=0;
        _bIsActive=0;
        _bIsUnOfficial=0;
        _bIsInactive=0;
        _bIsInactive=0;
        _bIsUser=0;
        _bIsOfficial=0;
        _nCardStatus=0;
        _nCardNotAsigned=0;
        _nWorkingStatus = 0;
        _nSalarystructureNotAsigned = 0;
        document.getElementById("lblcount").innerHTML = "";
        _bIsnotEnroll=false;
    }

    function OkButtonClick()
    {


        if(_bMultipleItemReturn==true)
        {
            var oEmployee_HRMs=[];
            oEmployee_HRMs = $('#tblEmployees').datagrid('getChecked');
            if(oEmployee_HRMs.length<=0)
            {
                alert("please select atleast one item");
                return;
            }
            window.returnValue= oEmployee_HRMs;
        }
        else
        {
            var oEmployee_HRM;
            var oEmployee_HRM= $('#tblEmployees').datagrid('getSelected');

            window.returnValue= oEmployee_HRM;
        }
        window.close();

    }

    $('#chkActive').click(function ()
    {
        if (document.getElementById("chkActive").checked==true)
        {
            document.getElementById("chkInActive").checked=false;
        }

    });

    $('#chkInActive').click(function ()
    {

        if (document.getElementById("chkInActive").checked==true)
        {
            document.getElementById("chkActive").checked=false;
        }

    });

    function Close()
    {

        window.close();

    }
    $(document).keydown(function (e)
    {
        var keyCode = e.keyCode || e.which;
        if (keyCode == 27)
        {
            window.close();
        }
    });
</script>
