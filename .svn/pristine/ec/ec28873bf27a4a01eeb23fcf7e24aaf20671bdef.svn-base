<html>
<head>
    <link href="@Url.Content("~/Content/CSS/icon.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/easyui.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/Pikerstyle.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ics.customize.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.easyui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>
</head>
<body>
    <div style="height: 550px; overflow: auto">
        <div class="PageHeading">
            <table border="0">
                <tr>
                    <td style="width: 900px" class="Headline">
                        Details
                    </td>
                </tr>
            </table>
        </div>
        <div id="AssetApplicationInfo" style="overflow: auto; width: 880px">
            <fieldset>
                <legend style="font-weight: bold">Asset Unique Identification</legend>
                <table border="0">
                    <tr style="height: 25px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Product Category
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="ProductCategory">
                            </label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Manufacturer
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="Manufacturer">
                            </label>
                        </td>
                    </tr>
                    <tr style="height: 25px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Product Name
                        </td>
                        <td style="width: 195px; text-align: right; color: Black; font-weight: bold">
                            <label for="PUI" style="color: Black; font-size: small; font-weight: bold" id="ProductName">
                            </label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Origin
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="Origin">
                            </label>
                        </td>
                    </tr>
                    <tr style="height: 10px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Lot No
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="LotNo">
                            </label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Asset Type
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="AssetTypeInString">
                            </label>
                        </td>
                    </tr>
                    <tr style="height: 10px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Location
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="LocationName">
                            </label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Warranty Period
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="Warranty">
                            </label>
                            <label for="PUI" style="color: Black; font-size: small; font-weight: bold" id="WarrantyMonthYear">
                            </label>
                        </td>
                    </tr>
                    <tr style="height: 10px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Warranty Start Date
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="WarrantyStartInString">
                            </label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            End Warranty
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="WarrantyEndInString">
                            </label>
                        </td>
                    </tr>
                    <tr style="height: 10px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Serial No
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="SerialNumberOnProduct">
                                Yet to Configure</label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Tag No
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="TagNo">
                                Yet to Configure</label>
                        </td>
                    </tr>
                    <tr style="height: 25px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Acctual Asset Value
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="ActualAssetValue">
                                Yet to Configure</label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Value After Evaluation
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="ValueAfterEvaluation">
                                Yet to Configure</label>
                        </td>
                    </tr>
                    <tr style="height: 25px">
                        <td style="width: 125px; text-align: left; color: Black; font-weight: bold">
                            Description
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="Description">
                                Yet to Configure</label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right; color: Black; font-weight: bold">
                            Activity
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small; color: Black; font-weight: bold"
                                id="Activity">
                                Yet to Configure</label>
                        </td>
                    </tr>
                </table>
            </fieldset>
        </div>
        <div id="AssetInformation" style="overflow: auto; width: 880px">
            <fieldset>
                <legend style="font-weight: bold">Asset Unique History</legend>
                <table border="0" id="tblProductUniqueHistory" title="" class="easyui-datagrid" style="width: 842px;
                    height: 100px" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true"
                    autorowheight="false" toolbar="#toolbar">
                    <thead>
                        <tr>
                            <th field="CosignedName" width="275">
                                CosignedName
                            </th>
                            <th field="CurrentStateInstring" width="265">
                                Current State
                            </th>
                            <th field="PreviousStateInstring" width="255">
                                PreviousState
                            </th>
                        </tr>
                    </thead>
                </table>
            </fieldset>
        </div>
        <div id="AssetLocation" style="overflow: auto; width: 880px">
            <fieldset>
                <legend style="font-weight: bold">Asset Transfer</legend>
                <table border="0" id="tblProductUniqueLocation" title="" class="easyui-datagrid"
                    style="width: 842px; height: 100px" fitcolumns="false" rownumbers="true" pagination="false"
                    singleselect="true" autorowheight="false" toolbar="#toolbar">
                    <thead>
                        <tr>
                            <th field="CurrentLocationName" width="200">
                                Current Location
                            </th>
                            <th field="PreviousLocationName" width="150">
                                Previous Location
                            </th>
                            <th field="StartDateTimeInString" width="150">
                                StartDateTime
                            </th>
                            <th field="EndDateTimeInString" width="145">
                                EndDateTime
                            </th>
                            <th field="LocationStatusInString" width="148">
                                Status
                            </th>
                        </tr>
                    </thead>
                </table>
            </fieldset>
        </div>
        <div id="AssetEvaluation" style="overflow: auto; width: 880px">
            <fieldset>
                <legend style="font-weight: bold">Asset Evaluation</legend>
                <table>
                    <tr style="height: 25px">
                        <td style="width: 125px; text-align: left">
                            Type:
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small;" id="EvaluationType">
                                Yet to Configure</label>
                        </td>
                        <td style="width: 125px; text-align: right">
                        </td>
                        <td style="width: 125px; text-align: right">
                            Evaluation On:
                        </td>
                        <td style="width: 195px; text-align: right">
                            <label for="PUI" style="color: Highlight; font-size: small;" id="AssetType">
                                Yet to Configure</label>
                        </td>
                    </tr>
                </table>
                <table border="0" id="tblProductUniqueEvaluation" title="" class="easyui-datagrid"
                    style="width: 842px; height: 200px" fitcolumns="false" rownumbers="true" pagination="false"
                    singleselect="true" autorowheight="false" toolbar="#toolbar">
                    <thead>
                        <tr>
                            <th field="SerialNo" width="130">
                                SerialNo
                            </th>
                            <th field="EvaluationDateInString" width="205">
                                Evaluation Date
                            </th>
                            <th field="EvaluationValuePerSession" width="230">
                                Value Per Session(%)
                            </th>
                            <th field="CalculativeValue" width="230">
                                Calculative Value
                            </th>
                        </tr>
                    </thead>
                </table>
            </fieldset>
        </div>
        <div id="toolbar">
            <a id="btnEdit" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit"
                plain="true" onclick="Edit()">Edit</a>
        </div>
    </div>
</body>
</html>
<script>

var sum = 0;
$(document).ready(function () {
       debugger;   
        _oDetail =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));    
        _oProductUniqueIdentifications = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ProductUniqueIdentifications));
        _oProductUniqueHistorys = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ProductUniqueHistorys)); 
        _oProductUniqueLocationHistorys = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ProductUniqueLocationHistorys)); 
        _oProductUniqueEvaluations = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ProductUniqueEvaluations));  
        _oProductUniqueIntegrationSetups = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ProductUniqueIntegrationSetups));
         
         
         document.getElementById('WarrantyMonthYear').innerHTML = _oDetail.WarrantyOn;
         document.getElementById('ProductCategory').innerHTML = _oDetail.ProductCategoryName;
         document.getElementById('Manufacturer').innerHTML = _oDetail.Manufacturer;
         document.getElementById('ProductName').innerHTML = _oDetail.ProductName;
         document.getElementById('Origin').innerHTML = _oDetail.Origin;
         document.getElementById('LotNo').innerHTML = _oDetail.LotNo;
         document.getElementById('AssetTypeInString').innerHTML = _oDetail.AssetTypeInString;
         document.getElementById('LocationName').innerHTML = _oDetail.LocationName; 
         document.getElementById('Warranty').innerHTML = _oDetail.Warranty;
         document.getElementById('WarrantyStartInString').innerHTML = _oDetail.WarrantyStartInString;
         document.getElementById('WarrantyEndInString').innerHTML = _oDetail.WarrantyEndInString;         
         document.getElementById('SerialNumberOnProduct').innerHTML = _oDetail.SerialNumberOnProduct;
         document.getElementById('TagNo').innerHTML = _oDetail.TagNo;
         document.getElementById('ActualAssetValue').innerHTML = _oDetail.ActualAssetValue; 
         document.getElementById('ValueAfterEvaluation').innerHTML = _oDetail.ValueAfterEvaluation;
         document.getElementById('Description').innerHTML = _oDetail.Description;   
         document.getElementById('Activity').innerHTML = _oDetail.Activity;  


         
                  
         $('#tblProductUniqueHistory').datagrid('loadData',_oProductUniqueHistorys);             
         $('#tblProductUniqueEvaluation').datagrid('loadData',_oProductUniqueEvaluations);
         $('#tblProductUniqueLocation').datagrid('loadData',_oProductUniqueLocationHistorys);
         
             
             document.getElementById('EvaluationType').innerHTML = _oProductUniqueEvaluations[0].EvaluationTypeInstring; 
             document.getElementById('AssetType').innerHTML = _oProductUniqueEvaluations[0].EvaluationOnInstring; 
         
         debugger;
         for(var i=0; i<_oProductUniqueLocationHistorys.length; i++)
         {
            if(_oProductUniqueLocationHistorys[i].EndDateTimeInString  == "01 Jan 0001")
            {
                _oProductUniqueLocationHistorys[i].EndDateTimeInString = "";
            }
         }
         
}); //End of Ready Function


function Edit()
{  
    debugger;      
    var oPUEvaluation = $('#tblProductUniqueEvaluation').datagrid('getSelected'); 
      
    if(oPUEvaluation==null || oPUEvaluation.PUEID <=0)
    {
        alert("Please select an item from list!");
        return;
    }
    else
    {
        var SelectedRowIndex=$('#tblProductUniqueEvaluation').datagrid('getRowIndex',oPUEvaluation); 
        var oParameter = new Object();
        var puegid = oPUEvaluation.PUEGID;
        var url = "/ProductUniqueIdentification/EditPUEvaluation?nPUEID="+oPUEvaluation.PUEID + "&nPUIID=" + oPUEvaluation.PUIID;
        
        var oPUEReturn = window.showModalDialog(url, oParameter, 'dialogHeight:150px;dialogWidth:320px;dialogLeft:450;dialogTop:350;center:yes;resizable:no;status:no;scroll:no');
        
        
        
        
        //debugger;

        

        if(oPUEReturn!=null)
            {
                $('#tblProductUniqueEvaluation').datagrid('loadData',oPUEReturn);
            }
       else 
            {
                alert(oProductUniqueHistoryReturn[0].ErrorMessage);
            }      





//            if(oPUEpopup!=null)
//            {
//                if(oPUEpopup.PUEID>0)
//                {
//                    $('#tblProductUniqueEvaluation').datagrid('updateRow',{index: SelectedRowIndex,	row: oPUEpopup});
//                }
//            }
        
    }       
} 




</script>
