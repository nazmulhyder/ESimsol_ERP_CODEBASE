@model ESimSol.BusinessObjects.TDepartment
@{
    ViewBag.Title = "Department SetUp";
}
<head>
    <title></title>
    <script src="@Url.Content("~/Views/Department/Department.js")" type="text/javascript"></script>
</head>
<body>
    <div style="margin-left:0px;width:100%; height:100%">
        <table id="tblDepartments" title="Department List" class="easyui-treegrid" style="width:100%;height:100%"
               data-options="idField:'id',treeField:'text',rownumbers:'true', toolbar:'#toolbar'">
            <thead>
                <tr>
                    <th data-options="field:'text',width:300">Department Name</th>
                    <th data-options="field:'code',width:150">Department Code</th>
                    @*<th data-options="field:'Activity',width:200">Activity</th>*@
                </tr>
            </thead>
        </table>
        <div id="toolbar">
            @*<a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="Refresh()"></a>*@
            <input type="text" id="txtSearchByCode" placeholder="Search by Code" style="width:120px" />
            <input type="text" id="txtSearchByName" placeholder="Search by name" style="width:150px" />
            <a id="btnNewDepartment" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" >New</a>
            <a id="btnEditDepartment" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true">Edit</a>
            <a id="RemoveDepartmentFromCollection" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true">Delete</a>
            <a id="btnExport" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-down" plain="true">Export</a>

        </div>
    </div>
    <div id="winDepartment" class="easyui-window" title="Add Department" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false" style="width:650px;height:auto;padding:1px">
        <div style="margin-left:0px; height:auto; width:100%; text-align:center;">
            <table border="0" cellspacing="2" cellpadding="2">
                <tr>
                    <td style="background-color:#CFB53B; text-align:center; width:870px; color:White">
                        <label id="lblHeaderName" style="font-size:15px; font-weight:bold; text-decoration:Underline"> New Department</label>
                    </td>
                </tr>
            </table>
            <fieldset style="margin:2px">
                <table style="width:95%; font-size:12px; text-align: right">
                    <tr>
                        <td style="width:20%">Name: </td>
                        <td style="width:30%"><input type="text" id="txtDepartmentName" style="width:100%" /></td>
                        <td style="width:20%">Code: </td>
                        <td style="width:30%"><input type="text" style="width:100%" id="txtCode" disabled="disabled"></td>
                    </tr>

                    <tr>
                        <td style="width:20%">Name In Bangla: </td>
                        <td style="width:80%" colspan="3"><input type="text" id="txtDepartmentNameInBangla" style="width:100%;font-size:xx-large; font-family:'SutonnyMJ'" /></td>
                    </tr>

                    <tr>
                        <td style="width:20%">Description: </td>
                        <td style="width:80%" colspan="3"><input type="text" style="width:100%" id="txtDescription" /></td>
                    </tr>
                </table>
            </fieldset>
                    <div id="actionToolBar">
                        <div id="AddDepartment" style="float:left;  left-padding: 10px"><a id="btnAdd" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true">Add</a></div>
                        <div id="RemoveDepartment" style="float:left;  left-padding: 10px"><a id="btnRemove" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true">Remove</a></div>
                    </div>

            <table id="tblDepartment" title="Department List :" class="easyui-datagrid" style="width:100%;height:200px"
                   data-options="" singleselect="true" toolbar="#actionToolBar">
                <thead>
                    <tr>
                        <th field="Code" width="150" align="left">Code</th>
                        <th field="Name" width="240" align="left">Name</th>
                        <th field="NameInBangla" width="240" align="left">Name In Bangla</th>
                        <th field="Description" width="190" align="left">Description</th>
                    </tr>
                </thead>
            </table>

                <fieldset style="">
                    <legend style="font-weight:bold"> Action : </legend>
                    <table border="0" cellspacing="0" cellpadding="2" style="font-size:11px; width:600px; font-weight:bold">
                        <tr>
                            <td style="width:590px; text-align:right"></td>

                            <td style="width:50px"></td>
                            <td style="width:50px">
                                <a id="btnClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true" >Close</a>
                            </td>
                        </tr>
                    </table>
                </fieldset>
            
        </div>
    </div>

    <div id="winEditDepartment" class="easyui-window" title="Edit Department" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false" style="width:30%;height:auto;padding:1px">
        <table border="0" cellspacing="2" cellpadding="2">
            <tr>
                <td style="background-color:#CFB53B; text-align:center; width:500px; color:White">
                    <label id="lblHeaderName" style="font-size:15px; font-weight:bold; text-decoration:Underline"> Edit Department</label>
                </td>
            </tr>
        </table>
        <fieldset>
            <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                <tr>
                    <td style="text-align:right">
                        Code :
                    </td>
                    <td style="width:270px">
                        <input type="text" style="width:250px" id="txtEditCode" disabled="disabled">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right">
                        Name :
                    </td>
                    <td style="width:270px">
                        <input type="text" id="txtEditDepartmentName" style="width:250px" />
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right">
                        Name In Bangla:
                    </td>
                    <td style="width:270px">
                        <input type="text" id="txtEditDepartmentNameInBangla" style="width:250px;font-family:SutonnyMJ; font-size:xx-large" />
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right">
                        Description :
                    </td>
                    <td style="width:270px">
                        <input type="text" style="width:250px" id="txtEditDescription" />
                    </td>
                </tr>

            </table>
        </fieldset>

        <fieldset>
            <legend style="font-weight:bold"> Action : </legend>
            <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                <tr>
                    <td style="width:400px; text-align:right"></td>

                    <td style="width:50px">
                        <a id="btnEdit" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                    </td>
                    <td style="width:50px">
                        <a id="btnEditDepartmentClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>
</body>

<style>
    .avro {
        font-family: Kalpurush;
    }

    .bijoy {
        font-family: SutonnyMJ;
    }
</style>
<script type="text/javascript">
    var _oTDepartment=null;
    var _sBaseAddress="";
    var _COS = null;
    $(document).ready(function () {
        _sBaseAddress=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        _oTDepartment=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
        _COS =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.COS));
        
        var el = document.getElementById('txtDepartmentNameInBangla');
        var val = parseInt(el.innerText);
        var class_name;
        
        if(parseInt(_COS.Value) == 19) {
            class_name = 'bijoy';
        }
        else {
            class_name = 'avro';
        }
        el.className += ' ' + class_name;

        InitializeDepartmentsEvents();
    });


    $(document).keydown(function (e)
    {
        var keyCode = e.keyCode || e.which;
        if (keyCode == 27)
        {
            $("#winDepartment").icsWindow("close");
        }
    });

    $('#btnExport').click(function (e)
    {
        var tsv = ((new Date()).getTime()) / 1000;
        window.open(_sBaseAddress+ "/Department/PrintDepartmentXL?ts="+tsv, "_blank");

    });

</script>

