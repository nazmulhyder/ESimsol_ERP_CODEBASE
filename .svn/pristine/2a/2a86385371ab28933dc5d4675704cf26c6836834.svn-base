@{
    ViewBag.Title = "Development Recap Summary";
}
@model ESimSol.BusinessObjects.DevelopmentRecapSummary

<div style="margin-left: 0px; height: 100%; width:100%" id="divDR">     
    <label id="lblHeaderName" style="font-size:15px; font-weight:bold; text-decoration:Underline"> Development Recap Summary @TempData["numberlist"]</label>         
    <select id="cboProductCategory"  style="width:110px;font-size:12px;">     </select>           
    <select id="cboContractor"  style="width:90px;font-size:12px;">     </select>                
    <select id="cboSession"  style="width:80px;font-size:12px;">    </select>              
    <select id="cboDevelopmentType"  style="width:130px;font-size:12px;">   </select>    
    <select id="cboBrand" style="width:90px;font-size:12px;">   </select>            
    <a id="btnRefresh" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-reload" plain="true" >Refresh</a>
    <a id="btnPrint" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-print" plain="true" >Preview</a>          
    <table border="0" style="background-color:#E6E6E6; width:100%">
        <tr style="height:95%">            
            <td colspan="3" style="background-color:#FFFFFF; text-align:left; width:100%;vertical-align:top">
                <div style="width:100%; height:515px; overflow:auto">
                @foreach (var item in Model.DevelopmentRecapSummarys)
                { 
                    <fieldset style="margin-left:2px; margin-right:2px">
                    <legend style="font-weight:bold">SL No : @item.RowNumber  || Recap No : @item.DevelopmentRecapNo || Session : @item.SessionName || Style : @item.StyleNo </legend>
                    <table border="0" cellpadding="2" cellspacing="2" style="width:100%">
                        <tr>
                            <td style="width:25%">
                                <table border="0">
                                    <tr style="height:110px">
                                        <td style="vertical-align:middle; width:100%; text-align:left">
                                            <img src="@Url.Action("GetThumImage", "DevelopmentRecap", new { id = item.TechnicalSheetID })" alt="@item.StyleNo" style="width: 90%; height:230px"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="vertical-align:middle; width:100%; text-align:left">
                                           <input type="button" id="btnViewDetails~@item.DevelopmentRecapID" value="View Details" style="width:90%" />                                               
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td style="width:37.5%">
                                <div style="font-size:11px; font-weight:bold; width: 100%">
                                    <table border="0" cellpadding="2" cellspacing="2" style="width:100%">
                                        <tr>
                                            <td style="width:22%">Recap No</td>
                                            <td style="width:3%">:</td>
                                            <td style="width:75%">@item.DevelopmentRecapNo </td>
                                        </tr>
                                        <tr>
                                            <td>Collection Name</td>
                                            <td>:</td>
                                            <td>@item.CollectionName</td>
                                        </tr>
                                        <tr>
                                            <td>Buyer Name</td>
                                            <td>:</td>
                                            <td>@item.BuyerName </td>
                                        </tr>
                                        <tr>
                                            <td>Brand Name</td>
                                            <td>:</td>
                                            <td>@item.BrandName </td>
                                        </tr>
                                        <tr>
                                            <td>Factory </td>
                                            <td>:</td>
                                            <td>@item.FactoryName</td>
                                        </tr>
                                        <tr>
                                            <td>Inq Rcv Date</td>
                                            <td>:</td>
                                            <td>@item.InquiryReceivedDateInString</td>
                                        </tr>
                                        <tr>
                                            <td>GG/GSM</td>
                                            <td>:</td>
                                            <td>@item.GG</td>
                                        </tr>
                                          <tr>
                                            <td>Spcl. Finish</td>
                                            <td>:</td>
                                            <td>@item.SpecialFinish</td>
                                        </tr>
                                        <tr>
                                            <td>Awb. No</td>
                                            <td>:</td>
                                            <td>@item.AwbNo</td>
                                        </tr>
                                        <tr>
                                            <td>Weight</td>
                                            <td>:</td>
                                            <td>@item.Weight</td>
                                        </tr>
                                        <tr>
                                            <td>Knitting Ptrn</td>
                                            <td>:</td>
                                            <td>@item.KnittingPatternName</td>
                                        </tr> 
                                        <tr>
                                            <td>Color Range</td>
                                            <td>:</td>
                                            <td>@item.ColorRange</td>
                                        </tr> 
                                        <tr>
                                            <td>Devlop Type</td>
                                            <td>:</td>
                                            <td>@item.DevelopmentTypeName</td>
                                        </tr>   
                                        <tr>
                                            <td>Remark</td>
                                            <td>:</td>
                                            <td>@item.Remarks</td>
                                        </tr>                                           
                                    </table>
                                </div>
                            </td>
                            <td style="width:37.5%">
                                <div style="font-size:11px; font-weight:bold; width:100%">
                                    <table border="0" cellpadding="2" cellspacing="2" style="width:100%">
                                        <tr>
                                            <td style="width:22%">Sample Qty</td>
                                            <td style="width:3%">:</td>
                                            <td style="width:75%">@item.SampleQty.ToString() / @item.SampleSize</td>
                                        </tr>
                                        <tr>
                                            <td>Unit Price</td>
                                            <td>:</td>
                                            <td>@item.UnitPriceSt</td>
                                        </tr>
                                        <tr>
                                            <td>S. Rcv Date</td>
                                            <td>:</td>
                                            <td>@item.SampleReceivedDateInString </td>
                                        </tr>
                                        <tr>
                                            <td>S. Send Date </td>
                                            <td>:</td>
                                            <td>@item.SampleSendingDateInString</td>
                                        </tr>
                                        <tr>
                                            <td> </td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>Dead Line</td>
                                            <td>:</td>
                                            <td>@item.SendingDeadLineInString</td>
                                        </tr>
                                        <tr>
                                            <td>Merchandiser</td>
                                            <td>:</td>
                                            <td>@item.MerchandiserName</td>
                                        </tr>
                                        <tr>
                                            <td>Count</td>
                                            <td>:</td>
                                            <td>@item.Count</td>
                                        </tr>
                                        <tr>
                                            <td>Approved By</td>
                                            <td>:</td>
                                            <td>@item.ApprovedByName</td>
                                        </tr>
                                        <tr>
                                            <td>Prepared By</td>
                                            <td>:</td>
                                            <td>@item.PrepareBy</td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div>
                                                    <table border="1" cellpadding="1" cellspacing="1" style="width:100%">
                                                    <tr>
                                                        <td style="width:28%"><u> Fabrication  </u></td>
                                                        <td  style="width:72%"><u> </u></td>
                                                    </tr>                                                    
                                                    @foreach (var oYarnOption in item.DevelopmentYarnOptions)
                                                    {                                                        
                                                          <tr>
                                                            <td>@oYarnOption.FabricsOptions </td>
                                                            <td>: @oYarnOption.ProductName</td>
                                                          </tr>
                                                    } 
                                                    </table>                                               
                                                </div>
                                            </td>
                                        </tr>                                                                              
                                    </table>

                                </div>
                            </td>
                        </tr> 
                        <tr>                          
                            <td style="width:25%"></td>
                            <td colspan="2" style="width:75%">
                                <div style="font-size:11px; font-weight:bold; width:100%">
                                    <table border="0" cellpadding="2" cellspacing="2" style="width:100%">
                                        <tr>
                                            <td style="width:15%; text-align:left; vertical-align:top">Style Description :</td>                                            
                                            <td style="width:85%">@item.StyleDescription</td>
                                        </tr>                                 
                                    </table>
                                </div>
                            </td>
                        </tr>                       
                    </table>
                    </fieldset>
                }
                </div>
            </td>            
        </tr>
        <tr style="height:5%">            
            <td style="background-color:#E6E6E6; text-align:left; width:150px;">
                <label id="lblPrevious" style="font-size:12px; font-weight:bold; text-decoration:Underline; cursor:pointer; color:#0000FF"> << Previous</label>
            </td>
            <td style="background-color:#E6E6E6; text-align:left; width:600px;">  
                <input type="text" id ="numCount" style="width:40px; text-align:center; font-size:10px"/>         
            </td>
            <td style="background-color:#E6E6E6; text-align:right; width:150px;">
                <label id="lblNext" style="font-size:12px; font-weight:bold; text-decoration:Underline; cursor:pointer; color:#0000FF">  Next >> </label>
            </td>
        </tr>
    </table>    
</div>



<script type="text/javascript">
    var _sBaseAddress="";
    $(document).ready(function () {
        //debugger;
        _sBaseAddress =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        var oAuthorizationRolesMapping =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.AuthorizationRolesMapping]));
        var oDevelopmentTypes= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.DevelopmentTypes));
        var oDevelopmentRecapSummarys =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.DevelopmentRecapSummarys));
        $('#divDR').data('DevelopmentRecapSummarys',oDevelopmentRecapSummarys);
        var sReportHeader=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["ReportHeader"]));
        $('#divDR').data('ReportHeader',sReportHeader);
        var nCount=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["message"]));
        var sDevelopmentRecapIDs=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["DevelopmentRecapIDs"]));
        $('#divDR').data('DevelopmentRecapIDs',sDevelopmentRecapIDs);
        var oBrands =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.Brands));
        var nBrandID=@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["BrandID"]));
        RefreshBrandList(oBrands, nBrandID);

        var oBuyers =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ContractorList));
        var nBuyerID=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["BuyerID"]));
        RefreshBuyerList(oBuyers, nBuyerID);

        var oProductCategorys=@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.ProductCategorys));
        var nProductCategory=@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["Category"]));
        RefreshProductCategoryList(oProductCategorys, nProductCategory)

        var oBusinessSessions=@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.BusinessSessions));
        var BusinessSessionID =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["BusinessSessionID"]));
        RefreshSession(oBusinessSessions, BusinessSessionID);

        var nDevelopmentType =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["DevelopmentType"]));
        RefreshDevelopmentType(nDevelopmentType, oDevelopmentTypes);
        var nBUID = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["BUID"]));
        sessionStorage.setItem("BUID",nBUID);
        var nMenuid = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(TempData["menuid"]));
        sessionStorage.setItem("menuid",nMenuid);
    $('#numCount').numberbox({ min:10, max:100, precision:0});
    $('#numCount').numberbox('setValue', nCount);

    $('input[id*=btnViewDetails]').click(function (e) {
        //debugger;
        //alert(e.target.id);
        var id =parseInt(e.target.id.split('~')[1]);
        if(id==null || id<=0)
        {
            alert("Please select a item from list!");
            return;
        }

        var oBackLink = window.location.href;
        sessionStorage.setItem("BackLink", oBackLink);
        window.location.href =_sBaseAddress+ "/DevelopmentRecap/ViewRecapDetail?id="+id;

    });
    RefreshControlLayout(oAuthorizationRolesMapping);
});

function RefreshBuyerList(oBuyers, nBuyerID)
{
    $('#cboContractor').empty();
    var listEmployees= "<option value='"+0+"'>" +"--Select Buyer--" + "</option>";
    for (var i = 0; i < oBuyers.length; i++)
    {
        listEmployees+= "<option value='" + oBuyers[i].ContractorID + "'>" + oBuyers[i].Name + "</option>";
    }
    $("#cboContractor").html(listEmployees);
    $('#cboContractor').val(nBuyerID);
}

function RefreshBrandList(oBrands, nBrandID)
{
    $('#cboBrand').empty();
    var listEmployees= "<option value='"+0+"'>" +"--Select Brand--" + "</option>";
    for (var i = 0; i < oBrands.length; i++)
    {
        listEmployees+= "<option value='" + oBrands[i].BrandID + "'>" + oBrands[i].BrandName + "</option>";
    }
    $("#cboBrand").html(listEmployees);
    $('#cboBrand').val(nBrandID);
}

function RefreshDevelopmentType (nDevelopementType, oDevelopmentTypes)
{
    $('#cboDevelopmentType').empty();
    $("#cboDevelopmentType").icsLoadCombo({
        List: oDevelopmentTypes,
        OptionValue: "DevelopmentTypeID",
        DisplayText: "Name"

    });
    $('#cboDevelopmentType').val(nDevelopementType);
}


function RefreshProductCategoryList(oProductCategorys, nProductCategory)
{
    $('#cboProductCategory').empty();
    var listEmployees= "<option value='"+0+"'>" +"--Product Category--" + "</option>";
    for (var i = 0; i < oProductCategorys.length; i++)
    {
        listEmployees+= "<option value='" + oProductCategorys[i].ProductCategoryID + "'>" + oProductCategorys[i].ProductCategoryName + "</option>";
    }
    $("#cboProductCategory").html(listEmployees);
    $('#cboProductCategory').val(nProductCategory);
}

function RefreshSession(oBusinessSessions, BusinessSessionID)
{
    debugger;
    $('#cboSession').empty();
    var listSessions= "<option value='0'>--Session--</option>";
    var nSelectedIndex=0;
    for (var i = 0; i < oBusinessSessions.length; i++)
    {
        listSessions+= "<option value='" + oBusinessSessions[i].BusinessSessionID+"'>" + oBusinessSessions[i].SessionName+"</option>";
    }
    $("#cboSession").html(listSessions);
    $('#cboSession').val(BusinessSessionID);
}



$('#lblPrevious').click(function (e) {
    //debugger;

    var count = parseInt($('#numCount').numberbox('getValue'));
    if(count==null)
    {
        alert('Please enter a minimum 10!');
        $('#numCount').focus();
        return false;
    }
    var selectedmax=0;
    var selectedmin=0;
    var maxrow=0;
    var oDevelopmentRecapSummarys = $('#divDR').data('DevelopmentRecapSummarys');
    if(oDevelopmentRecapSummarys!=null)
    {
        if(oDevelopmentRecapSummarys.length>0)
        {
            maxrow =oDevelopmentRecapSummarys[0].MaxRowNumber;
            selectedmin =oDevelopmentRecapSummarys[0].RowNumber;
            selectedmax=oDevelopmentRecapSummarys[oDevelopmentRecapSummarys.length-1].RowNumber;
        }
    }

     var cboBuyes = document.getElementById("cboContractor");
    var nBuyerID=cboBuyes.options[cboBuyes.selectedIndex].value;
    if(parseInt(nBuyerID)<=0)
    {
        alert('Please Select a Buyer!');
        $('#cboContractor').focus();
        return false;
    }
    var sReportHeader=cboBuyes.options[cboBuyes.selectedIndex].text;
    var cboBrand = document.getElementById("cboBrand");
    var nBrandID=parseInt(cboBrand.options[cboBrand.selectedIndex].value);
    debugger;
    var cboProductCategory = document.getElementById("cboProductCategory");
    var nProductCategoryID=parseInt(cboProductCategory.options[cboProductCategory.selectedIndex].value);
    if(nProductCategoryID>0)
    {
        sReportHeader=sReportHeader+"/"+cboProductCategory.options[cboProductCategory.selectedIndex].text;
    }
    var cboSessionText=''; var nBusinessSessionID=0;
    var cboSession = document.getElementById("cboSession");
    if(parseInt(cboSession.selectedIndex)>0)
    {
        cboSessionText=cboSession.options[cboSession.selectedIndex].text;
        nBusinessSessionID=parseInt(cboSession.options[cboSession.selectedIndex].value);
        sReportHeader=sReportHeader+"/"+cboSessionText;
    }


    var cboDevelopmentTypeText='';
    var cboDevelopmentType = document.getElementById("cboDevelopmentType");
    var nDevelopmentRecapID=parseInt(cboDevelopmentType.options[cboDevelopmentType.selectedIndex].value);
    if(nDevelopmentRecapID>0)
    {
        cboDevelopmentTypeText=cboDevelopmentType.options[cboDevelopmentType.selectedIndex].text;
        sReportHeader=sReportHeader+"/"+cboDevelopmentTypeText;
    }
    $('#divDR').data('ReportHeader',sReportHeader);
    window.location.href = _sBaseAddress+"/DevelopmentRecap/ViewDevelopmentRecapSummary?ispre=1&count="+count+"&smr="+selectedmax+"&sminr="+selectedmin+"&mr="+maxrow+"&ReportHeader="+$('#divDR').data('ReportHeader')+"&BuyerID="+parseInt(nBuyerID)+"&BrandID="+parseInt(nBrandID)+"&Category="+nProductCategoryID+"&BusinessSessionID="+nBusinessSessionID+"&DevelopmentType="+nDevelopmentRecapID+"&buid="+sessionStorage.getItem("BUID")+"&menuid="+sessionStorage.getItem("menuid");
    return false;
});


$('#lblNext').click(function (e) {
    //debugger;
    var count = parseInt($('#numCount').numberbox('getValue'));
    if(count==null)
    {
        alert('Please enter a minimum 10!');
        $('#numCount').focus();
        return false;
    }
    var selectedmax=0;
    var selectedmin=0;
    var maxrow=0;
    var oDevelopmentRecapSummarys = $('#divDR').data('DevelopmentRecapSummarys');
    if(oDevelopmentRecapSummarys!=null)
    {
        if(oDevelopmentRecapSummarys.length>0)
        {
            maxrow =oDevelopmentRecapSummarys[0].MaxRowNumber;
            selectedmin =oDevelopmentRecapSummarys[0].RowNumber;
            selectedmax=oDevelopmentRecapSummarys[oDevelopmentRecapSummarys.length-1].RowNumber;
        }
    }

    var cboBuyes = document.getElementById("cboContractor");
    var nBuyerID=cboBuyes.options[cboBuyes.selectedIndex].value;
    if(parseInt(nBuyerID)<=0)
    {
        alert('Please Select a Buyer!');
        $('#cboContractor').focus();
        return false;
    }
    var sReportHeader=cboBuyes.options[cboBuyes.selectedIndex].text;

    var cboBrand = document.getElementById("cboBrand");
    var nBrandID=parseInt(cboBrand.options[cboBrand.selectedIndex].value);
    debugger;
    var cboProductCategory = document.getElementById("cboProductCategory");
    var nProductCategoryID=parseInt(cboProductCategory.options[cboProductCategory.selectedIndex].value);
    if(nProductCategoryID>0)
    {
        sReportHeader=sReportHeader+"/"+cboProductCategory.options[cboProductCategory.selectedIndex].text;
    }
    var cboSessionText=''; var nBusinessSessionID=0;
    var cboSession = document.getElementById("cboSession");
    if(parseInt(cboSession.selectedIndex)>0)
    {
        cboSessionText=cboSession.options[cboSession.selectedIndex].text;
        nBusinessSessionID=parseInt(cboSession.options[cboSession.selectedIndex].value);
        sReportHeader=sReportHeader+"/"+cboSessionText;
    }

    var cboDevelopmentTypeText='';
    var cboDevelopmentType = document.getElementById("cboDevelopmentType");
    var nDevelopmentRecapID=parseInt(cboDevelopmentType.options[cboDevelopmentType.selectedIndex].value);
    if(nDevelopmentRecapID>0)
    {
        cboDevelopmentTypeText=cboDevelopmentType.options[cboDevelopmentType.selectedIndex].text;
        sReportHeader=sReportHeader+"/"+cboDevelopmentTypeText;
    }
    $('#divDR').data('ReportHeader',sReportHeader);
    window.location.href = _sBaseAddress+"/DevelopmentRecap/ViewDevelopmentRecapSummary?ispre=0&count="+count+"&smr="+selectedmax+"&sminr="+selectedmin+"&mr="+maxrow+"&ReportHeader="+$('#divDR').data('ReportHeader')+"&BuyerID="+parseInt(nBuyerID)+"&BrandID="+parseInt(nBrandID)+"&Category="+nProductCategoryID+"&BusinessSessionID="+nBusinessSessionID+"&DevelopmentType="+nDevelopmentRecapID+"&buid="+sessionStorage.getItem("BUID")+"&menuid="+sessionStorage.getItem("menuid");
    return false;
});

$('#btnRefresh').click(function (e) {
    debugger;
    var count = parseInt($('#numCount').numberbox('getValue'));
    if(count==null)
    {
        alert('Please enter a minimum 10!');
        $('#numCount').focus();
        return false;
    }

    var selectedmax=0;
    var selectedmin=1;
    var maxrow=1;

    var cboBuyes = document.getElementById("cboContractor");
    var nBuyerID=cboBuyes.options[cboBuyes.selectedIndex].value;
    var sReportHeader = $('#divDR').data('ReportHeader');
    if(parseInt(nBuyerID)>0)
    {
        sReportHeader=cboBuyes.options[cboBuyes.selectedIndex].text;
    }
    var cboBrand = document.getElementById("cboBrand");
    var nBrandID=parseInt(cboBrand.options[cboBrand.selectedIndex].value);

    debugger;
    var cboProductCategory = document.getElementById("cboProductCategory");
    var nProductCategoryID=parseInt(cboProductCategory.options[cboProductCategory.selectedIndex].value);
    if(nProductCategoryID>0)
    {
        sReportHeader=sReportHeader+"/"+cboProductCategory.options[cboProductCategory.selectedIndex].text;
    }
    var cboSessionText=''; var nBusinessSessionID=0;
    var cboSession = document.getElementById("cboSession");
    if(parseInt(cboSession.selectedIndex)>0)
    {
        cboSessionText=cboSession.options[cboSession.selectedIndex].text;
        nBusinessSessionID=parseInt(cboSession.options[cboSession.selectedIndex].value);
        sReportHeader=sReportHeader+"/"+cboSessionText;
    }

    if(parseInt(nBuyerID) <=0 && parseInt(nProductCategoryID) <=0 && parseInt(nBusinessSessionID)<=0)
    {
        alert('Please select any One from Buyer/ProductCategory/Season!');
        $('#cboContractor').focus();
        return false;
    }

    var cboProductCategory = document.getElementById("cboProductCategory");
    var nProductCategoryID=cboProductCategory.options[cboProductCategory.selectedIndex].value;

    var cboDevelopmentTypeText='';
    var cboDevelopmentType = document.getElementById("cboDevelopmentType");
    var nDevelopmentRecapID=parseInt(cboDevelopmentType.options[cboDevelopmentType.selectedIndex].value);
    if(nDevelopmentRecapID>0)
    {
        cboDevelopmentTypeText=cboDevelopmentType.options[cboDevelopmentType.selectedIndex].text;
        sReportHeader=sReportHeader+"/"+cboDevelopmentTypeText;
    }
    $('#divDR').data('ReportHeader',sReportHeader);

    window.location.href = _sBaseAddress+"/DevelopmentRecap/ViewDevelopmentRecapSummary?ispre=0&count="+count+"&smr="+selectedmax+"&sminr="+selectedmin+"&mr="+maxrow+"&ReportHeader="+$('#divDR').data('ReportHeader')+"&BuyerID="+parseInt(nBuyerID)+"&BrandID="+parseInt(nBrandID)+"&Category="+nProductCategoryID+"&BusinessSessionID="+nBusinessSessionID+"&DevelopmentType="+nDevelopmentRecapID+"&buid="+sessionStorage.getItem("BUID")+"&menuid="+sessionStorage.getItem("menuid");
    return false;
});


$('#btnPrint').click(function (e) {
    //debugger;
    if($('#divDR').data('DevelopmentRecapIDs')==null|| $('#divDR').data('DevelopmentRecapIDs')=="0")
    {
        alert('Please Select Development Recap!');
        return false;
    }
    window.open(_sBaseAddress+'/DevelopmentRecap/PrintDevelopmentRecapSummary?RecapIDs='+$('#divDR').data('DevelopmentRecapIDs')+'&ReportHeader='+$('#divDR').data('ReportHeader'), "_blank");
});



$('#btnSearch').click(function (e) {
    debugger;
    var selectedmax=20;
    var selectedmin=1;
    var maxrow=0;
    var count = parseInt($('#numCount').numberbox('getValue'));
     if(count==null)
    {
        alert('Please enter a minimum 10!');
        $('#numCount').focus();
        return false;
    }

      var oParameter = new Object();
      oParameter.Name = "Development Advance Search";
      oParameter.MultipleItemReturn=true;
      var url = _sBaseAddress+"/DevelopmentRecap/AdvanceSearch"
      var oDevelopementRecaps = window.showModalDialog(url, oParameter, 'dialogHeight:620px;dialogWidth:730px;dialogLeft:250;dialogTop:20;center:yes;resizable:yes;status:no;scroll:no');
      debugger;
      if(oDevelopementRecaps.length>0)
      {
          var sDevelopmentRecapIDs = $('#divDR').data('DevelopmentRecapIDs');
        var ncount=0;
         for(var i =0;i<oDevelopementRecaps.length;i++)
         {
            var nDRID=oDevelopementRecaps[i].DevelopmentRecapID;
            sDevelopmentRecapIDs=sDevelopmentRecapIDs+nDRID+',';
            ncount++;
         }

         sDevelopmentRecapIDs= sDevelopmentRecapIDs.substring(0, sDevelopmentRecapIDs.length - 1);
         window.location.href = _sBaseAddress+"/DevelopmentRecap/ViewDevelopmentRecapSummary?ispre=0&count="+count+"&smr="+selectedmax+"&sminr="+selectedmin+"&mr="+maxrow+"&sDevelopmentRecapIDs="+$('#divDR').data('DevelopmentRecapIDs');
      }
    return false;
});


function RefreshControlLayout(oAuthorizationRolesMapping)
{
    $('#btnRefresh,#btnPrint').hide();
    if(PermissionChecker('DRSSearch','DevelopmentRecap',oAuthorizationRolesMapping)){$("#btnRefresh").show();}
    if(PermissionChecker('DRSPrint','DevelopmentRecap',oAuthorizationRolesMapping)){$("#btnPrint").show();}
}


</script>