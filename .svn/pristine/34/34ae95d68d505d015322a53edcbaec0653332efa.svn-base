
<html>
<head>
    <link href="@Url.Content("~/Content/CSS/icon.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/easyui.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/Pikerstyle.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ics.customize.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.easyui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ics.plugins.js")" type="text/javascript"></script>
</head>
<body>

    @model ESimSol.BusinessObjects.Employee

    <div style="font-family:Tahoma" class="menuMainCollectionTable">
        <table border="0" cellspacing="2" cellpadding="2">
            <tr>
                <td style="background-color:#CFB53B; text-align:center; width:890px; color:White">
                    <label id="lblHeaderName" style="font-size:15px; font-weight:bold; text-decoration:Underline"> Add Employee</label>
                </td>
            </tr>
        </table>
        @using (Html.BeginForm("EmployeeIU", "Employee", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            <div id="tt" class="easyui-accordion" style="width:885px;height:480px;">

                <div title="Employee" data-options="iconCls:'icon-ok'" style="overflow:auto;padding:10px;">

                    <fieldset>
                        <legend style="font-weight:bold"> Employee Informations : </legend>
                        <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                            <tr>
                                <td style="width:470px; text-align:right">
                                    <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Code :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.Code, new { style = "width: 270px;", id = "txtCode" })@*, disabled = "disabled"*@

                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Name :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.Name, new { style = "width: 270px;", id = "txtName" })*
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Nick Name :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.NickName, new { style = "width: 270px;", id = "txtNickName" })*
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Contact NO :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.ContactNo, new { style = "width: 270px;", id = "txtContactNo" })*
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Present Address :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.PresentAddress, new { style = "width: 270px;", id = "txtPresentAddress" })*
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Permanent Address :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.ParmanentAddress, new { style = "width: 270px;", id = "txtPermanentAddress" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:135px; text-align:right">
                                                Email :
                                            </td>
                                            <td style="width:280px">
                                                @Html.TextBoxFor(model => model.Email, new { style = "width: 270px;", id = "txtEmail" })
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td style="width:345px">
                                    <table>
                                        <tr>

                                            <td style="width:300px; vertical-align:bottom">
                                                <u><b>Photo</b></u>
                                            </td>
                                        </tr>

                                        <tr>
                                            @*<td style="width:80px; text-align:right"></td>*@
                                            <td style="width:300px">
                                                <div style="text-align:center; vertical-align:middle; height:150px; width:150px; border:2px solid">
                                                    <img id="imgPhotoIcon" src="@Url.Action("GetPhoto", "Employee", new { nid = Model.EmployeeID })" alt="Photo" style="width:150px; height:150px" />
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            @*<td style="width:80px; text-align:right"></td>*@
                                            <td style="width:300px">
                                                <input type="button" value="Clear" id="btnPhotoClear" />
                                                <input id="filePhoto" type="file" name="file1" onchange="readPhotoURL(this);" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </table>
                    </fieldset>
                    @Html.HiddenFor(model => model.EmployeeID)
                    @Html.HiddenFor(model => model.Gender)
                    @Html.HiddenFor(model => model.MaritalStatus)
                    @Html.HiddenFor(model => model.DateOfBirth)
                    <fieldset>
                        <legend style="font-weight:bold"> Action : </legend>
                        <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                            <tr>
                                <td style="width:785px; text-align:right"></td>

                                <td style="width:50px"></td>
                                <td style="width:50px">
                                    @*                           <a id="btnEmployeeSave" type="submit" href="javascript:void(0)"
                                        class="easyui-linkbutton" iconCls="icon-save" plain="true">Save</a>*@
                                    <input id="btnSaveEmployee" type="submit" value="Save" style="width:75px; font-weight:bold" />
                                </td>
                            </tr>
                        </table>
                    </fieldset>

                </div> @*Employee Basic*@
                <div title="Employee Details" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Employee Details : </legend>
                        <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                            <tr>
                                <td style="width:135px; text-align:right">
                                    Gender :
                                </td>
                                <td style="width:280px">
                                    <select id="cboGender" style="width:280px" class="_select_change_Gender">
                                        <option value="0">None</option>
                                        <option value="1">Male</option>
                                        <option value="2">Female</option>
                                        <option value="3">Other</option>
                                    </select>
                                </td>
                                <td style="width:55px"></td>
                                <td style="width:115px; text-align:right">
                                    Marital Status :
                                </td>
                                <td style="width:280px">
                                    <select id="cboMaritalStatus" style="width:280px" class="_select_change_MaritalStatus">
                                        <option value="0">None</option>
                                        <option value="1">Single</option>
                                        <option value="2">Married</option>
                                        <option value="3">Divorced</option>
                                        <option value="3">Widow</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td style="width:135px; text-align:right">
                                    Father's Name :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.FatherName, new { style = "width: 280px;", id = "txtFatherName" })
                                </td>
                                <td style="width:55px"></td>
                                <td style="width:115px; text-align:right">
                                    Mother's Name :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.MotherName, new { style = "width: 280px;", id = "txtMotherName" })
                                </td>
                            </tr>
                            <tr>
                                <td style="width:135px; text-align:right">
                                    Date Of Birth :
                                </td>
                                <td style="width:280px">
                                    @*@Html.TextBoxFor(model => model.DateOfBirth, new { style = "width: 280px;", id = "txtDateOfBirth" }) *@
                                    <input id="txtDateOfBirth" type="text" class="easyui-datebox" style="width: 270px;"
                                           data-options="formatter:icsdateformat,parser:icsdateparser" />*
                                </td>
                                <td style="width:55px"></td>
                                <td style="width:115px; text-align:right">
                                    Identification Mark :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.IdentificationMart, new { style = "width: 280px;", id = "txtIdentificationMart" })
                                </td>
                            </tr>
                            <tr>
                                <td style="width:135px; text-align:right">
                                    Blood Group :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.BloodGroup, new { style = "width: 280px;", id = "txtBloodGroup" })
                                </td>
                                <td style="width:55px"></td>
                                <td style="width:115px; text-align:right">
                                    Weight :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.Weight, new { style = "width: 280px;", id = "txtWeight" })
                                </td>
                            </tr>
                            <tr>
                                <td style="width:135px; text-align:right">
                                    Height :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.Height, new { style = "width: 280px;", id = "txtHeight" })
                                </td>
                                <td style="width:55px"></td>
                                <td style="width:115px; text-align:right">
                                    Note :
                                </td>
                                <td style="width:280px">
                                    @Html.TextBoxFor(model => model.Note, new { style = "width: 280px;", id = "txtNote" })
                                </td>
                            </tr>
                            <tr>
                                <td style="width:135px; text-align:right">
                                    DesignationType :
                                </td>
                                <td style="width:280px">
                                    @Html.DropDownListFor(model => model.EmployeeDesignationType, new SelectList(Enum.GetValues(typeof(ESimSol.BusinessObjects.EnumEmployeeType))), new { id = "cboEmployeeDesignationType", style = "width: 280px;" })
                                </td>
                                <td style="width:55px"></td>
                                <td style="width:115px; text-align:right"></td>
                                <td style="width:280px"></td>
                            </tr>
                        </table>
                    </fieldset>
                    <fieldset>
                        <legend style="font-weight:bold"> Action : </legend>
                        <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                            <tr>
                                <td style="width:785px; text-align:right"></td>

                                <td style="width:50px"></td>
                                <td style="width:50px">
                                    @*                           <a id="btnEmployeeSave" type="submit" href="javascript:void(0)"
                                        class="easyui-linkbutton" iconCls="icon-save" plain="true">Save</a>*@
                                    <input id="btnSaveEmployeeDetails" type="button" value="Save" style="width:75px; font-weight:bold" />
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                </div> @*Employee Details*@
                <div title="Educational Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Education </legend>
                        <table id="tblEmployeEducation" title="Employee Education" class="easyui-datagrid" style="width:830px;height:250px"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#EmployeeEducationtoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="Degree" width="160" align="left">Degree</th>
                                    <th field="Major" width="120" align="left">Major</th>
                                    <th field="Session" width="120" align="left">Session</th>
                                    <th field="PassingYear" width="120" align="left">PassingYear</th>
                                    <th field="BoardUniversity" width="160" align="left">Board/University</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="EmployeeEducationtoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12px;"><a id="btnAddToList" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="AddEmployeeEducation()">New</a></td>
                                <td style="width:40px;font-size:12px;"><a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeEducation()">Edit</a></td>
                                <td style="width:40px;font-size:12px;"><a id="btnDeleteRME" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeEducation()">Remove</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Educational Information*@
                <div title="Experience Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Experience </legend>
                        <table id="tblEmployeExperience" title="Employee Experience" class="easyui-datagrid" style="width:830px;height:250px"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#EmployeeExperiencetoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="Organization" width="160" align="left">Organization</th>
                                    <th field="OrganizationType" width="120" align="left">Type</th>
                                    <th field="Designation" width="120" align="left">Designation</th>
                                    <th field="DurationString" width="120" align="left">Duration</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="EmployeeExperiencetoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12;"><a id="btnAddToList" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="AddEmployeeExperience()">New</a></td>
                                <td style="width:40px;font-size:12;"><a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeExperience()">Edit</a></td>
                                <td style="width:40px;font-size:12;"><a id="btnDeleteRME" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeExperience()">Remove</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Experience Information*@
                <div title="Training Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Training </legend>
                        <table id="tblEmployeTraining" title="Employee Training" class="easyui-datagrid" style="width:830px;height:250px"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#EmployeeTrainingtoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="CourseName" width="160" align="left">CourseName</th>
                                    <th field="Specification" width="120" align="left">Specification</th>
                                    <th field="DurationString" width="120" align="left">DurationString</th>
                                    <th field="PassingDateInString" width="120" align="left">PassingYear</th>
                                    <th field="CertifyBodyVendor" width="160" align="left">CertifyBodyVendor</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="EmployeeTrainingtoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12;"><a id="btnAddToList" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="AddEmployeeTraining()">New</a></td>
                                <td style="width:40px;font-size:12;"><a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeTraining()">Edit</a></td>
                                <td style="width:40px;font-size:12;"><a id="btnDeleteRME" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeTraining()">Remove</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Training Information*@
                <div title="Reference Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Reference </legend>
                        <table id="tblEmployeReference" title="Employee Reference" class="easyui-datagrid" style="width:830px;height:250px;"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#EmployeeReferencetoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="Name" width="160" align="left">Name</th>
                                    <th field="Organization" width="120" align="left">Organization</th>
                                    <th field="Designation" width="120" align="left">Designation</th>
                                    <th field="Relation" width="120" align="left">Relation</th>
                                    <th field="ContactNo" width="160" align="left">ContactNo</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="EmployeeReferencetoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12px;"><a id="btnAddToList" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="AddEmployeeReference()">New</a></td>
                                <td style="width:40px;font-size:12px;"><a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeReference()">Edit</a></td>
                                <td style="width:40px;font-size:12px;"><a id="btnDeleteRME" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeReference()">Remove</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Reference Information*@
                <div title="Bank Account Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Bank Account </legend>
                        <table id="tblEmployeBankAccount" title="Employee Bank Account" class="easyui-datagrid" style="width:830px;height:250px;"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#EmployeeBankAccounttoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="BankBranchName" width="160" align="left">Bank</th>
                                    <th field="AccountName" width="120" align="left">Account Name</th>
                                    <th field="AccountNo" width="120" align="left">AC NO</th>
                                    <th field="Activity" width="120" align="left">Activity</th>
                                    <th field="Description" width="160" align="left">Description</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="EmployeeBankAccounttoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12;"><a id="btnAddBAC" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="AddEmployeeBankAccount()">New</a></td>
                                @*<td style="width:40px;font-size:12;"><a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="EditEmployeeBankAccount()">Edit</a></td>*@
                                <td style="width:40px;font-size:12;"><a id="btnDeleteBAC" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeBankAccount()">Remove</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Bank Account Information*@
                <div title="Authentication Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Authentication </legend>
                        <table id="tblEmployeAuthentication" title="Employee Authentication" class="easyui-datagrid" style="width:830px;height:250px;"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#EmployeAuthenticationtoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="CardNo" width="160" align="left">Card/EnrollNo</th>
                                    <th field="Activity" width="120" align="left">Activity</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="EmployeAuthenticationtoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12;"><a id="btnAddBAC" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true" onclick="AddEmployeeAuthentication()">New</a></td>
                                <td style="width:40px;font-size:12;"><a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeAuthentication()">Edit</a></td>
                                <td style="width:40px;font-size:12;"><a id="btnDeleteBAC" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeAuthentication()">Remove</a></td>
                                <td style="width:40px;font-size:12;"><a id="btnDeleteBAC" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="EmployeeAuthenticationActivity()">Activity</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Authentication Information*@
                <div title="Nominee Information" data-options="iconCls:'icon-ok'" style="padding:10px;">
                    <fieldset>
                        <legend style="font-weight:bold"> Nominee </legend>
                        <table id="tblEmployeNominee" title="Employee Nominee" class="easyui-datagrid" style="width:830px;height:250px;"
                               data-options="
                    singleSelect: true,
                    fitColumns:false,
                    rownumbers:true,
                    pagination:false,
                    autoRowHeight:false,
                    toolbar: '#tblEmployeNomineetoolbar'
                ">
                            <thead>
                                <tr>
                                    <th field="Name" width="200" align="left">Name</th>
                                    <th field="Address" width="250" align="left">Address</th>
                                    <th field="ContactNo" width="150" align="left">Contact No</th>
                                    <th field="Email" width="150" align="left">Email</th>
                                </tr>
                            </thead>
                        </table>
                    </fieldset>
                    <div id="tblEmployeNomineetoolbar" style="text-align:left;">
                        <table>
                            <tr>
                                <td style="width:40px;font-size:12px;"><a id="btnNewNominee" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true">New</a></td>
                                <td style="width:40px;font-size:12px;"><a id="btnEditNominee" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true">Edit</a></td>
                                <td style="width:40px;font-size:12px;"><a id="btnDeleteNominee" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true">Remove</a></td>
                            </tr>
                        </table>
                    </div>

                </div> @*Nominee Information*@

            </div>
        }
        <fieldset>
            <legend style="font-weight:bold"> Action : </legend>
            <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                <tr>
                    <td style="width:785px; text-align:right"></td>
                    <td style="width:50px"></td>
                    <td style="width:50px">
                        <a id="btnClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true" onclick="Close()">Close</a>
                    </td>
                </tr>
            </table>
        </fieldset>

        <div id="winEmployeeNominee" class="easyui-window winstyle" title="Nominee" style="width:480px; height:237px" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false">
            <fieldset>
                <legend style="font-weight:bold"></legend>
                <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                    <tr>
                        <td style="width:200px; text-align:right">
                            Name :
                        </td>
                        <td style="width:300px">
                            <input id="txtNomineeName" type="text" style="width: 300px;" />
                        </td>
                    </tr>
                    <tr>
                        <td style="width:200px; text-align:right">
                            Address :
                        </td>
                        <td style="width:300px">
                            <input id="txtNomineeAddress" type="text" style="width: 300px;" />
                        </td>
                    </tr>
                    <tr>
                        <td style="width:200px; text-align:right">
                            Contact No :
                        </td>
                        <td style="width:300px">
                            <input id="txtNomineeContactNo" type="text" style="width: 300px;" />
                        </td>
                    </tr>
                    <tr>
                        <td style="width:200px; text-align:right">
                            Email :
                        </td>
                        <td style="width:300px">
                            <input id="txtNomineeEmail" type="email" style="width: 300px;" />
                        </td>
                    </tr>
                </table>
            </fieldset>

            <fieldset>
                <legend style="font-weight:bold"> Action : </legend>
                <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                    <tr>
                        <td style="width:400px; text-align:right"></td>

                        <td style="width:50px">
                            <a id="btnNomineeSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                        </td>
                        <td style="width:50px">
                            <a id="btnCloseNomineeAdd" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                        </td>
                    </tr>
                </table>
            </fieldset>
        </div>

    </div>

</body>
</html>

<script type="text/javascript">
    var _oEmployee=null;
    var _oEmployeeNominees=[];

    $(document).ready(function () {
        debugger;
        _sBaseAddress =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        _oEmployee =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
        _oEmployeeNominees= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@ViewBag.EmployeeNominees));
        if (_oEmployee.ErrorMessage!='N/A' && _oEmployee.ErrorMessage!='' && _oEmployee.ErrorMessage!=null)
        {
            alert(_oEmployee.ErrorMessage);
        }
        if (_oEmployee.EmployeeID>0)
        {
            SetEmployeeFields();
            LoadEmployeeEducationGrid();
            LoadEmployeeExperienceGrid();
            LoadEmployeeTrainingGrid();
            LoadEmployeeReferenceGrid();
            LoadEmployeeBankAccountGrid();
            LoadEmployeeAuthenticationGrid();
            $('#txtDateOfBirth').datebox('setValue', _oEmployee.DateOfBirthInString);

        }else{
            $('#txtDateOfBirth').datebox('setValue', icsdateformat(new Date()));
        }
        if(_oEmployeeNominees!= null)
        {
            LoadEmployeeNomineeGrid();
        }
    });

    ///Image
    function readPhotoURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#imgPhotoIcon')
                .attr('src', e.target.result)
                .width(150)
                .height(150);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    $('#btnPhotoClear').click(function (e) {
        var oldInput = document.getElementById("filePhoto");
        var newInput = document.createElement("input");

        newInput.type = "file";
        newInput.id = oldInput.id;
        newInput.name = oldInput.name;
        newInput.className = oldInput.className;
        newInput.style.cssText = oldInput.style.cssText;
        newInput.onchange = oldInput.onchange;
        oldInput.parentNode.replaceChild(newInput, oldInput);
        document.getElementById('imgPhotoIcon').src = '#';

        if (_oEmployee.EmployeeID > 0) {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: _sBaseAddress + "/Employee/DeleteImage",
                traditional: true,
                data: JSON.stringify(_oEmployee),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    //debugger;
                    var sFeedBack = jQuery.parseJSON(data);
                },
                error: function (xhr, status, error) {
                    alert(error);
                }

            });
        }
    });

    function icsdateformat(date) {
        debugger;
        var mthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        var y = date.getFullYear();
        var m = date.getMonth();
        var d = date.getDate();
        //return m+'/'+d+'/'+y;
        var result = d + ' ' + mthNames[m] + ' ' + y;
        return result
    }

    //ADDEDITDELETE

    $('#btnSaveEmployee').click(function (e) {
        if (!ValidateInputEmployee()) return false;
    });

    function ValidateInputEmployee() {
        if (document.getElementById("txtName").value == null || document.getElementById("txtName").value == "") {
            alert("Please enter name!");
            $('#txtName').focus();
            return false;
        }

        if (document.getElementById("txtContactNo").value == null || document.getElementById("txtContactNo").value == "") {
            alert("Please enter contact number!");
            $('#txtContactNo').focus();
            return false;
        }
        if (document.getElementById("txtPresentAddress").value == null || document.getElementById("txtPresentAddress").value == "") {
            alert("Please enter Present Address!");
            $('#txtPresentAddress').focus();
            return false;
        }
        return true;
    }

    function RefreshEmployee()
    {
        var e = document.getElementById("cboGender");
        var sGender=e.options[e.selectedIndex].innerHTML;
        var edo = document.getElementById("cboMaritalStatus");
        var sMaritalStatus = edo.options[edo.selectedIndex].innerHTML;
        var edt = document.getElementById("cboEmployeeDesignationType");
        var nEmployeeDesignationType = edt.options[edt.selectedIndex].value;

        var oEmployee= {
            EmployeeID : _oEmployee.EmployeeID,
            Name : _oEmployee.Name,
            Code : _oEmployee.Code,
            NickName : _oEmployee.NickName,
            ContactNo : _oEmployee.ContactNo,
            ParmanentAddress : _oEmployee.ParmanentAddress,
            PresentAddress : _oEmployee.PresentAddress,
            Email : _oEmployee.Email,
            Gender :sGender,
            MaritalStatus : sMaritalStatus,
            FatherName : $('#txtFatherName').val(),
            MotherName : $('#txtMotherName').val(),
            DateOfBirth : $('#txtDateOfBirth').datebox('getValue'),//_oEmployee.DateOfBirth,
            BloodGroup : $('#txtBloodGroup').val(),
            Height : $('#txtHeight').val(),
            Weight : $('#txtWeight').val(),
            IdentificationMart : $('#txtIdentificationMart').val(),
            Note : $('#txtNote').val(),
            EmployeeDesignationType : nEmployeeDesignationType
        };
        return oEmployee;
    }

    $('#btnSaveEmployeeDetails').click(function (e) {
        if (_oEmployee.EmployeID<=0)
        {
            alert('Please add Employee basic first.!!');
        }
        if (!ValidateInputEmployee()) return false;
        var oEmp=RefreshEmployee();

        $.ajax({
            type: "POST",
            dataType: "json",
            url: _sBaseAddress+ '/Employee/EmployeeDetailUpdate',
            traditional: true,
            data:  JSON.stringify(oEmp),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                _oEmployee = jQuery.parseJSON(data);
                if (_oEmployee.ErrorMessage!='N/A' && _oEmployee.ErrorMessage!='' && _oEmployee.ErrorMessage!=null)
                {
                    alert(_oEmployee.ErrorMessage);
                }
                else
                {
                    alert('Employee Basic Save Successfully.!!');
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }
        });

    });

    function SetEmployeeFields(){

        var Gender = document.getElementById('cboGender');
        for (var i = 0; i < Gender.options.length; i++) {
            if (Gender.options[i].text == _oEmployee.Gender) {
                Gender.selectedIndex = i;
                break;
            }
        }

        var MS = document.getElementById('cboMaritalStatus');
        for (var i = 0; i < MS.options.length; i++) {
            if (MS.options[i].text == _oEmployee.MaritalStatus) {
                MS.selectedIndex = i;
                break;
            }
        }
    }

    /**************Employee Education*************/
    function AddEmployeeEducation()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeEducation?nEmployeeID="+_oEmployee.EmployeeID+"&nid=0";
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(270/2);
        var oEmployeeEducation = window.showModalDialog(url, oParameter, 'dialogHeight:270px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeEducation = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeEducation!=null)
        {
            if(oEmployeeEducation.EmployeeEducationID>0)
            {
                //                var oEmployees = $('#tblEmployeEducation').datagrid('getRows');
                //                var nIndex=oEmployees.length;

                $('#tblEmployeEducation').datagrid('appendRow',oEmployeeEducation);
                $('#tblEmployeEducation').datagrid('selectRow', nIndex);
            }
        }
    }

    function EditEmployeeEducation()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeEducation= $('#tblEmployeEducation').datagrid('getSelected');
        if(oEmployeeEducation==null || oEmployeeEducation.EmployeeEducationID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblEmployeEducation').datagrid('getRowIndex',oEmployeeEducation);

        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeEducation?nEmployeeID="+_oEmployee.EmployeeID+"&nid="+oEmployeeEducation.EmployeeEducationID;
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(270/2);
        var oEmployeeEducation = window.showModalDialog(url, oParameter, 'dialogHeight:270px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeEducation = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeEducation!=null)
        {
            if(oEmployeeEducation.EmployeeEducationID>0)
            {
                $('#tblEmployeEducation').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeEducation});
            }
        }
    }

    function DeleteEmployeeEducation()
    {
        //debugger;
        var oEmployeeEducation= $('#tblEmployeEducation').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeEducation==null || oEmployeeEducation.EmployeeEducationID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeEducation').datagrid('getRowIndex',oEmployeeEducation);

        if (oEmployeeEducation.EmployeeEducationID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeEducationDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeEducation),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    oEmployeeEducation = jQuery.parseJSON(data);
                    if (oEmployeeEducation.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeEducation').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oEmployeeEducation.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }
    function LoadEmployeeEducationGrid()
    {
        data={"total":""+_oEmployee.EmployeeEducations.length+"","rows":_oEmployee.EmployeeEducations};
        $('#tblEmployeEducation').datagrid('loadData',data);
    }

    /**************End Employee Education*************/

    /**************Employee Experience*************/
    function AddEmployeeExperience()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeExperience?nEmployeeID="+_oEmployee.EmployeeID+"&nid=0";
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(340/2);
        var oEmployeeExperience = window.showModalDialog(url, oParameter, 'dialogHeight:340px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeExperience = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeExperience!=null)
        {
            if(oEmployeeExperience.EmployeeExperienceID>0)
            {
                $('#tblEmployeExperience').datagrid('appendRow',oEmployeeExperience);
                $('#tblEmployeExperience').datagrid('selectRow', nIndex);
            }
        }
    }

    function EditEmployeeExperience()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeExperience= $('#tblEmployeExperience').datagrid('getSelected');
        if(oEmployeeExperience==null || oEmployeeExperience.EmployeeExperienceID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblEmployeExperience').datagrid('getRowIndex',oEmployeeExperience);

        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeExperience?nEmployeeID="+_oEmployee.EmployeeID+"&nid="+oEmployeeExperience.EmployeeExperienceID;
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(340/2);
        var oEmployeeExperience = window.showModalDialog(url, oParameter, 'dialogHeight:340px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');

        //var oEmployeeExperience = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeExperience!=null)
        {
            if(oEmployeeExperience.EmployeeExperienceID>0)
            {
                $('#tblEmployeExperience').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeExperience});
            }
        }
    }

    function DeleteEmployeeExperience()
    {
        //debugger;
        var oEmployeeExperience= $('#tblEmployeExperience').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeExperience==null || oEmployeeExperience.EmployeeExperienceID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeExperience').datagrid('getRowIndex',oEmployeeExperience);

        if (oEmployeeExperience.EmployeeExperienceID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeExperienceDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeExperience),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    oEmployeeExperience = jQuery.parseJSON(data);
                    if (oEmployeeExperience.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeExperience').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oEmployeeExperience.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }
    function LoadEmployeeExperienceGrid()
    {
        data={"total":""+_oEmployee.EmployeeExperiences.length+"","rows":_oEmployee.EmployeeExperiences};
        $('#tblEmployeExperience').datagrid('loadData',data);
    }

    /**************End Employee Experience*************/

    /**************Employee Training*************/
    function AddEmployeeTraining()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeTraining?nEmployeeID="+_oEmployee.EmployeeID+"&nid=0";
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(395/2);
        var oEmployeeTraining = window.showModalDialog(url, oParameter, 'dialogHeight:395px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeTraining = window.showModalDialog(url, oParameter, 'dialogHeight:395px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeTraining!=null)
        {
            if(oEmployeeTraining.EmployeeTrainingID>0)
            {
                $('#tblEmployeTraining').datagrid('appendRow',oEmployeeTraining);
                $('#tblEmployeTraining').datagrid('selectRow', nIndex);
            }
        }
    }

    function EditEmployeeTraining()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeTraining= $('#tblEmployeTraining').datagrid('getSelected');
        if(oEmployeeTraining==null || oEmployeeTraining.EmployeeTrainingID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblEmployeTraining').datagrid('getRowIndex',oEmployeeTraining);

        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeTraining?nEmployeeID="+_oEmployee.EmployeeID+"&nid="+oEmployeeTraining.EmployeeTrainingID;
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(395/2);
        var oEmployeeTraining = window.showModalDialog(url, oParameter, 'dialogHeight:395px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeTraining = window.showModalDialog(url, oParameter, 'dialogHeight:395px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeTraining!=null)
        {
            if(oEmployeeTraining.EmployeeTrainingID>0)
            {
                $('#tblEmployeTraining').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeTraining});
            }
        }
    }

    function DeleteEmployeeTraining()
    {
        //debugger;
        var oEmployeeTraining= $('#tblEmployeTraining').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeTraining==null || oEmployeeTraining.EmployeeTrainingID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeTraining').datagrid('getRowIndex',oEmployeeTraining);

        if (oEmployeeTraining.EmployeeTrainingID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeTrainingDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeTraining),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    oEmployeeTraining = jQuery.parseJSON(data);
                    if (oEmployeeTraining.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeTraining').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oEmployeeTraining.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }
    function LoadEmployeeTrainingGrid()
    {
        data={"total":""+_oEmployee.EmployeeTrainings.length+"","rows":_oEmployee.EmployeeTrainings};
        $('#tblEmployeTraining').datagrid('loadData',data);
    }

    /**************End Employee Training*************/

    /**************Employee Reference*************/
    function AddEmployeeReference()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeReference?nEmployeeID="+_oEmployee.EmployeeID+"&nid=0";
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(310/2);
        var oEmployeeReference =window.showModalDialog(url, oParameter, 'dialogHeight:310px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeReference = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeReference!=null)
        {
            if(oEmployeeReference.EmployeeReferenceID>0)
            {
                //                var oEmployees = $('#tblEmployeEducation').datagrid('getRows');
                //                var nIndex=oEmployees.length;

                $('#tblEmployeReference').datagrid('appendRow',oEmployeeReference);
                $('#tblEmployeReference').datagrid('selectRow', nIndex);
            }
        }
    }

    function EditEmployeeReference()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeReference= $('#tblEmployeReference').datagrid('getSelected');
        if(oEmployeeReference==null || oEmployeeReference.EmployeeReferenceID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblEmployeReference').datagrid('getRowIndex',oEmployeeReference);

        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeReference?nEmployeeID="+_oEmployee.EmployeeID+"&nid="+oEmployeeReference.EmployeeReferenceID;

        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(310/2);
        var oEmployeeReference =window.showModalDialog(url, oParameter, 'dialogHeight:310px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeReference = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeReference!=null)
        {
            if(oEmployeeReference.EmployeeReferenceID>0)
            {
                $('#tblEmployeReference').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeReference});
            }
        }
    }

    function DeleteEmployeeReference()
    {
        //debugger;
        var oEmployeeReference= $('#tblEmployeReference').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeReference==null || oEmployeeReference.EmployeeReferenceID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeReference').datagrid('getRowIndex',oEmployeeReference);

        if (oEmployeeReference.EmployeeReferenceID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeReferenceDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeReference),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    oEmployeeEducation = jQuery.parseJSON(data);
                    if (oEmployeeReference.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeReference').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oEmployeeReference.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }
    function LoadEmployeeReferenceGrid()
    {
        data={"total":""+_oEmployee.EmployeeReferences.length+"","rows":_oEmployee.EmployeeReferences};
        $('#tblEmployeReference').datagrid('loadData',data);
    }

    /**************End Employee Reference*************/

    /**************Employee BankAccount*************/
    function AddEmployeeBankAccount()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeBankAccount?nEmployeeID="+_oEmployee.EmployeeID+"&nid=0";
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(280/2);
        var oEmployeeBankAccount = window.showModalDialog(url, oParameter, 'dialogHeight:280px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeBankAccount = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeBankAccount!=null)
        {
            if(oEmployeeBankAccount.EmployeeBankACID>0)
            {
                $('#tblEmployeBankAccount').datagrid('appendRow',oEmployeeBankAccount);
                $('#tblEmployeBankAccount').datagrid('selectRow', nIndex);
            }
        }
    }

    function EditEmployeeBankAccount()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeBankAccount= $('#tblEmployeBankAccount').datagrid('getSelected');
        if(oEmployeeBankAccount==null || oEmployeeBankAccount.EmployeeBankACID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblEmployeBankAccount').datagrid('getRowIndex',oEmployeeBankAccount);

        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeBankAccount?nEmployeeID="+_oEmployee.EmployeeID+"&nid="+oEmployeeBankAccount.EmployeeBankACID;
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(280/2);
        var oEmployeeBankAccount = window.showModalDialog(url, oParameter, 'dialogHeight:280px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeBankAccount = window.showModalDialog(url, oParameter, 'dialogHeight:352px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeBankAccount!=null)
        {
            if(oEmployeeBankAccount.EmployeeBankACID>0)
            {
                $('#tblEmployeBankAccount').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeBankAccount});
            }
        }
    }

    function DeleteEmployeeBankAccount()
    {
        //debugger;
        var oEmployeeBankAccount= $('#tblEmployeBankAccount').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeBankAccount==null || oEmployeeBankAccount.EmployeeBankACID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeBankAccount').datagrid('getRowIndex',oEmployeeBankAccount);

        if (oEmployeeBankAccount.EmployeeBankACID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeBankAccountDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeBankAccount),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    oEmployeeBankAccount = jQuery.parseJSON(data);
                    if (oEmployeeBankAccount.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeBankAccount').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oEmployeeBankAccount.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }
    function LoadEmployeeBankAccountGrid()
    {
        data={"total":""+_oEmployee.EmployeeBankAccounts.length+"","rows":_oEmployee.EmployeeBankAccounts};
        $('#tblEmployeBankAccount').datagrid('loadData',data);
    }

    /**************End Employee BankAccount*************/

    /**************Employee Authentication*************/
    function AddEmployeeAuthentication()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeAuthentication?nEmployeeID="+_oEmployee.EmployeeID+"&nid=0";
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(158/2);
        var oEmployeeAuthentication = window.showModalDialog(url, oParameter, 'dialogHeight:158px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeAuthentication = window.showModalDialog(url, oParameter, 'dialogHeight:152px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeAuthentication!=null)
        {
            if(oEmployeeAuthentication.EmployeeAuthenticationID>0)
            {
                //                var oEmployees = $('#tblEmployeEducation').datagrid('getRows');
                //                var nIndex=oEmployees.length;

                $('#tblEmployeAuthentication').datagrid('appendRow',oEmployeeAuthentication);
                $('#tblEmployeAuthentication').datagrid('selectRow', nIndex);
            }
        }
    }

    function EditEmployeeAuthentication()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeAuthentication= $('#tblEmployeAuthentication').datagrid('getSelected');
        if(oEmployeeAuthentication==null || oEmployeeAuthentication.EmployeeAuthenticationID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        var SelectedRowIndex=$('#tblEmployeAuthentication').datagrid('getRowIndex',oEmployeeAuthentication);

        var oParameter = new Object();
        oParameter.Name = _oEmployee.Name+"["+_oEmployee.Code+"]";
        var url =_sBaseAddress+ "/Employee/View_EmployeeAuthentication?nEmployeeID="+_oEmployee.EmployeeID+"&nid="+oEmployeeAuthentication.EmployeeAuthenticationID;
        var nLeft=(window.screen.width/2)-(505/2);
        var nHeight=(window.screen.height/2)-(158/2);
        var oEmployeeAuthentication = window.showModalDialog(url, oParameter, 'dialogHeight:158px;dialogWidth:505px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
        //var oEmployeeAuthentication = window.showModalDialog(url, oParameter, 'dialogHeight:152px;dialogWidth:505px;dialogLeft:500;dialogTop:200;center:yes;resizable:no;status:no;scroll:no');
        //debugger
        if(oEmployeeAuthentication!=null)
        {
            if(oEmployeeAuthentication.EmployeeAuthenticationID>0)
            {
                $('#tblEmployeAuthentication').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeAuthentication});
            }
        }
    }

    function DeleteEmployeeAuthentication()
    {
        //debugger;
        var oEmployeeAuthentication= $('#tblEmployeAuthentication').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeAuthentication==null || oEmployeeAuthentication.EmployeeAuthenticationID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeAuthentication').datagrid('getRowIndex',oEmployeeAuthentication);

        if (oEmployeeAuthentication.EmployeeAuthenticationID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeAuthenticationDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeAuthentication),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    oEmployeeAuthentication = jQuery.parseJSON(data);
                    if (oEmployeeAuthentication.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeAuthentication').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oEmployeeAuthentication.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }

    function EmployeeAuthenticationActivity()
    {
        debugger;
        var oEmployeeAuthentication= $('#tblEmployeAuthentication').datagrid('getSelected');
        oEmployeeAuthentication.IsActive=(!oEmployeeAuthentication.IsActive);
        var SelectedRowIndex=$('#tblEmployeAuthentication').datagrid('getRowIndex',oEmployeeAuthentication);
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Employee/EmployeeAuthenticationIU",
            traditional: true,
            data:  JSON.stringify(oEmployeeAuthentication),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                oEmployeeAuthentication = jQuery.parseJSON(data);
                if (oEmployeeAuthentication.ErrorMessage=="") {
                    $('#tblEmployeAuthentication').datagrid('updateRow',{index: SelectedRowIndex,	row: oEmployeeAuthentication});
                }
                else {
                    alert(oEmployeeAuthentication.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    }

    function LoadEmployeeAuthenticationGrid()
    {
        data={"total":""+_oEmployee.EmployeeAuthentications.length+"","rows":_oEmployee.EmployeeAuthentications};
        $('#tblEmployeAuthentication').datagrid('loadData',data);
    }

    /**************End Employee BankAccount*************/
    function Close() {
        window.returnValue = _oEmployee;
        window.close();
    }

    /**************Employee Nominee Start*************/
    $("#btnNewNominee").click(function () {
        debugger
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        $("#txtNomineeName").val("");
        $("#txtNomineeAddress").val("");
        $("#txtNomineeEmail").val("");
        $("#txtNomineeContactNo").val("");

        _nEmployeeNomineeID = 0;
        $("#winEmployeeNominee").icsWindow("open", "Add Nominee for "+_oEmployee.Name+"["+_oEmployee.Code+"]");
    });

    $("#btnEditNominee").click(function () {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return;
        }
        var oEmployeeNominee= $('#tblEmployeNominee').datagrid('getSelected');
        if(oEmployeeNominee==null || oEmployeeNominee.ENID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        $("#winEmployeeNominee").icsWindow("open", "Edit Nominee for "+_oEmployee.Name+"["+_oEmployee.Code+"]");
        var obj =
        {
            BaseAddress: _sBaseAddress,
            Object: oEmployeeNominee,
            ControllerName: "Employee",
            ActionName: "GetEmployeeNominee",
            IsWinClose: false
        };
        $.icsDataGet(obj, function (response) {
            if (response.status && response.obj != null) {
                if (response.obj.ENID > 0) {
                    $("#txtNomineeName").val(response.obj.Name);
                    $("#txtNomineeAddress").val(response.obj.Address);
                    $("#txtNomineeContactNo").val(response.obj.ContactNo);
                    $("#txtNomineeEmail").val(response.obj.Email);
                    _nEmployeeNomineeID = response.obj.ENID;
                }
                else {
                    alert(response.obj.ErrorMessage);
                }
            }
            else { alert("No information found."); }
        });
    });

    $("#btnCloseNomineeAdd").click(function () {
        $("#winEmployeeNominee").icsWindow("close");
    });

    function ValidateInput_Nominee()
    {
        if($("#txtNomineeName").val()==null || $("#txtNomineeName").val()=="")
        {
            alert("Please enter Name!");
            $('#txtNomineeName').focus();
            return false;
        }
        //if($("#txtNomineeAddress").val()==null || $("#txtNomineeAddress").val()=="")
        //{
        //    alert("Please enter Address!");
        //    $('#txtNomineeAddress').focus();
        //    return false;
        //}
        //if($("#txtNomineeContactNo").val()==null || $("#txtNomineeContactNo").val()=="")
        //{
        //    alert("Please enter Contact No!");
        //    $('#txtNomineeContactNo').focus();
        //    return false;
        //}
        //if($("#txtNomineeEmail").val()==null || $("#txtNomineeEmail").val()=="")
        //{
        //    alert("Please enter Email!");
        //    $('#txtNomineeEmail').focus();
        //    return false;
        //}
        return true;
    }

    function RefreshObject_Nominee()
    {
        var oEmployeeNominee= {
            ENID : _nEmployeeNomineeID,
            EmployeeID : _oEmployee.EmployeeID,
            Name :$("#txtNomineeName").val(),
            Address :$("#txtNomineeAddress").val(),
            ContactNo :$("#txtNomineeContactNo").val(),
            Email :$("#txtNomineeEmail").val(),
        };
        return oEmployeeNominee;
    }

    $("#btnNomineeSave").click(function () {

        if(!ValidateInput_Nominee()) return;
        var oEmployeeNominee=RefreshObject_Nominee();

        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oEmployeeNominee,
            ObjectId: oEmployeeNominee.ENID,
            ControllerName: "Employee",
            ActionName: "EmployeeNomineeIU",
            TableId: "tblEmployeNominee",
            IsWinClose: true
        };
        $.icsSave(obj);

    });

    $("#btnDeleteNominee").click(function () {
        var oEmployeeNominee= $('#tblEmployeNominee').datagrid('getSelected');
        if(oEmployeeNominee==null || oEmployeeNominee.ENID<=0)
        {
            alert("Please select a item from list!");
            return;
        }
        if (!confirm("Confirm to Delete?")) return ;
        var SelectedRowIndex=$('#tblEmployeNominee').datagrid('getRowIndex',oEmployeeNominee);
        if (oEmployeeNominee.ENID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeNomineeDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeNominee),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    oEmployeeNominee = jQuery.parseJSON(data);
                    if (oEmployeeNominee.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeNominee').datagrid('deleteRow',SelectedRowIndex);
                    }
                    else
                    {
                        alert(oEmployeeNominee.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    });

    function LoadEmployeeNomineeGrid()
    {
        data={"total":""+_oEmployeeNominees.length+"","rows":_oEmployeeNominees};
        $('#tblEmployeNominee').datagrid('loadData',data);
    }
    /**************Employee Nominee End*************/

    $(document).keydown(function (e)
    {
        var keyCode = e.keyCode || e.which;
        if (keyCode == 27)
        {
            window.close();
        }
    });
</script>
