<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/CSS/icon.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/CSS/easyui.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery.ics.customize.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.easyui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>
</head>
<body>
    <div class="MainBody">
        <div class="easyui-layout" style="height:660px; width:100%">
            <div region="north" style="width:100%; height:62px; background-color:#CFB53B">
                <table border="0" cellspacing="0" cellspacing="0" width="100%">
                    <tr style="height:60px">
                        <td style="width:25%; background-color:#FFFFFF">
                            @*#21B54D*@
                            <img id="imgCompanyLogo" src="@Url.Action("GetCompanyImage", "Company", new { id = 1 })" alt="Company Logo" style="width:300px; height:55px; margin-left:10px" />
                        </td>
                        <td style="width:65%; text-align:right; font-weight:bold; font-size: xx-large; margin-right:50px">
                            <div style="font-weight:bold; font-size: 22px; margin-right:50px; color:White; text-align:center;">
                                Welcome To ESimSol
                                @*Welcome To ESimSol Utility Management V-1.0*@
                            </div>

                        </td>
                        <td style="width:10%; text-align:right; font-weight:bold; font-size: xx-large; margin-right:50px">
                            <div id="regionLogout" style=" padding-right:30%; font-size:12px; color:black;">
                                @Html.ActionLink("Logout", "LogOut", "User")
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div region="center" style="width:100%; vertical-align:middle">
                @model ESimSol.BusinessObjects.Candidate
                @using (Html.BeginForm("Save", "Career", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {

                    <div style="width: 100%; text-align: center; font-family: Tahoma;">
                        <div style="width: 900px; height:560px; text-align: center; margin-left:200px; margin-top:10px;">
                            @*<fieldset>*@
                            @*<legend style="font-size: 18px; font-weight: bolder">New Application: </legend>*@
                            <div style="margin-left:0px; height:560px; width:100%; text-align:center;">

                                <div id="PageBody" style="width: 900px; height:100%;">
                                    <div id="tabPackingQC" class="easyui-tabs" style="width: 100%; height: 550px">

                                        @*Personal Details*@
                                        <div title="Personal Details" style="padding: 10px;height:100%;">

                                            <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                                                <strong>Personal Detail</strong>
                                            </div>
                                            <div style="float:left; width:100%; height:auto;">
                                                <div style="float:left;  width:100%;">
                                                    <div style="float:left; width:100%; height:auto;  padding-top:10px;">
                                                        <div style="float:left; width:90%; height:auto; padding-right:10%;">

                                                            @Html.TextBoxFor(model => model.CandidateID, new { type = "hidden", id = "txtCandidateID" })
                                                            @Html.TextBoxFor(model => model.Gender, new { type = "hidden", id = "txtGender" })
                                                            @Html.TextBoxFor(model => model.MaritalStatus, new { type = "hidden", id = "txtMaritalStatus" })
                                                            @Html.TextBoxFor(model => model.DateOfBirth, new { type = "hidden", id = "txtDateofBirth" })
                                                            

                                                            <div style="float:left; width:100%; padding-bottom:5px;">

                                                                <div style="float:left; width:70%;">
                                                                    <div style="float:left; width:100%;  padding-bottom:5px;">
                                                                        <div style=" float:left; width:28.5%; text-align:right;"><span style="padding-right:5px;">Name</span></div>
                                                                        <div style="float:left; width:43%;">@Html.TextBoxFor(model => model.Name, new { style = "width: 93%; font-size:11px; ", id = "txtName" })<sup style="color:red">*</sup> </div>
                                                                    </div>
                                                                    <div style="float:left; width:100%;  padding-bottom:5px;">
                                                                        <div style=" float:left; width:28.5%; text-align:right;"><span style="padding-right:5px;">Contact No</span></div>
                                                                        <div style="float:left; width:43%;">@Html.TextBoxFor(model => model.ContactNo, new { style = "width: 93%; font-size:11px;", id = "txtContactNo" })<sup style="color:red">*</sup></div>
                                                                    </div>
                                                                    <div style="float:left; width:100%;  padding-bottom:5px;">
                                                                        <div style=" float:left; width:28.5%; text-align:right;"><span style="padding-right:5px;">Alternate Contact No</span></div>
                                                                        <div style="float:left; width:43%;">@Html.TextBoxFor(model => model.AlternateContactNo, new { style = "width: 93%; font-size:11px;", id = "txtAlternateContactNo" })<sup style="color:red">*</sup></div>
                                                                    </div>
                                                                    <div style="float:left; width:100%;  padding-bottom:5px;">
                                                                        <div style=" float:left; width:28.5%; text-align:right;"><span style="padding-right:5px;">Email Address</span></div>
                                                                        <div style="float:left; width:43%;">@Html.TextBoxFor(model => model.Email, new { style = "width: 93%; font-size:11px;", id = "txtEmail" })<sup style="color:red">*</sup></div>
                                                                    </div>
                                                                    <div style="float:left; width:100%;  padding-bottom:5px;">
                                                                        <div style=" float:left; width:28.5%; text-align:right;"><span style="padding-right:5px;">Alternate Email</span></div>
                                                                        <div style="float:left; width:43%;">@Html.TextBoxFor(model => model.AlternateEmail, new { style = "width: 93%; font-size:11px;", id = "txtAlternateEmail", type = "email" })<sup style="color:red">*</sup></div>
                                                                    </div>
                                                                </div>
                                                                <div style="float:left; width:30%;">

                                                                    <div style="text-align:center; vertical-align:middle; height:102px; width:175px; border:1px solid">
                                                                        @if (Model.CandidateID > 0)
                                                                        {
                                                                            <img id="imgMemberPhoto" src="@Url.Action("GetPhoto", "Career", new { nid = Model.CandidateID })" style="width:170px; height:100px" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <img id="imgMemberPhoto" style="width:170px; height:100px" />
                                                                        }
                                                                        <div>
                                                                            <div style=" float:left; font-size:11px; width:130px; height:auto;"><input type="file" name="file1" style="font-size:11px;" onchange="MemberPhoto(this)" /></div>
                                                                            <div style="float:left; text-align:right; vertical-align:top; width:40px;"> <a id="btnRemoveMemberPhoto" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true"></a></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div style="float:left; width:100%;padding-bottom:5px;">
                                                                <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Gender</span></div>
                                                                <div style="float:left; width:30%;"><select id="cboGender" style="width:95%"><option value="1">Male</option><option value="2">Female</option><option value="3">Other</option></select><sup style="color:red">*</sup></div>
                                                                <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Marital Status</span></div>
                                                                <div style="float:left; width:30%;"><select id="cboMaritalStatus" style="width:95%"><option value="0">None</option><option value="1">Single</option><option value="2">Married</option><option value="2">Divorced</option><option value="4">Widow</option></select><sup style="color:red">*</sup></div>
                                                            </div>

                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Father's Name</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.FatherName, new { style = "width: 93%; font-size:11px;", id = "txtFatherName" })<sup style="color:red">*</sup></div>
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Mother's Name</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.MotherName, new { style = "width: 93%; font-size:11px;", id = "txtMotherName" })<sup style="color:red">*</sup> </div>
                                                            </div>

                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Date of Birth</span></div>
                                                                <div style="float:left; width:30%;"><input id="dateofBirth" type="text" style="width: 95%" class="easyui-datebox" data-options="formatter:icsdateformat,parser:icsdateparser" /><sup style="color:red">*</sup></div>
                                                                <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Religion</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.Religious, new { style = "width: 93%; font-size:11px;", id = "txtReligious" })<sup style="color:red">*</sup> </div>
                                                            </div>
                                                         
                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">National ID</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.NationalID, new { style = "width: 93%; font-size:11px;", id = "txtNationalID" })<sup style="color:red">*</sup> </div>
                                                                <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Nationality</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.Nationalism, new { style = "width: 93%; font-size:11px;", id = "txtNationalism" })<sup style="color:red">*</sup> </div>
                                                            </div>

                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Present Address</span></div>
                                                                <div style="float:left; width:80%;">@Html.TextBoxFor(model => model.PresentAddress, new { style = "width: 97.3%; font-size:11px;", id = "txtPresentAddress" })<sup style="color:red">*</sup></div>
                                                            </div>

                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Parmanent Address</span></div>
                                                                <div style="float:left; width:80%;">@Html.TextBoxFor(model => model.ParmanentAddress, new { style = "width: 97.3%; font-size:11px;", id = "txtPermanentAddress" })<sup style="color:red">*</sup></div>
                                                            </div>

                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Present Salary</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.PresentSalary, new { style = "width: 93%; font-size:11px;", id = "txtPresentSalary" }) </div>
                                                                <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Expected Salary</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.ExpectedSalary, new { style = "width: 93%; font-size:11px;", id = "txtExpectedSalary" }) </div>
                                                            </div>
                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Career Summary</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.CareerSummary, new { style = "width: 93%; font-size:11px;", id = "txtCareerSummary" }) </div>
                                                                <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Special Qualification</span></div>
                                                                <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.SpecialQualification, new { style = "width: 93%; font-size:11px;", id = "txtSpecialQualification" }) </div>
                                                            </div>
                                                            <div style="float:left; width:100%; padding-bottom:5px;">
                                                                <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Objective</span></div>
                                                                <div style="float:left; width:80%;">@Html.TextAreaFor(model => model.Objective, new { style = "width: 97.3%;height:70px; font-size:11px;", id = "txtObjective" })</div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            <div id="regionPassword" style="float:left;  width:100%;">
                                                <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                                                    <strong>Username & Password</strong>
                                                </div>
                                                <div style="float:left; width:90%; padding-bottom:5px;padding-top:10px;">
                                                    <div style=" float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Username</span></div>
                                                    <div style="float:left; width:80%;">@Html.TextBoxFor(model => model.CandidateUser.UserName, new { style = "width: 97.3%; font-size:11px;", id = "txtUsername" })<sup style="color:red">*</sup></div>
                                                </div>
                                                <div style="float:left; width:100%; height:auto;  padding-top:10px;">
                                                    <div style="float:left; width:90%; height:auto; padding-right:10%;">
                                                        <div style="float:left; width:100%;padding-bottom:5px;">
                                                            <div style="float:left; width:20%; text-align:right;"><span style="padding-right:5px;">Password</span></div>
                                                            <div style="float:left; width:30%;">@Html.TextBoxFor(model => model.CandidateUser.Password, new { style = "width: 93%; font-size:11px;", id = "txtPassword", type = "password" })<sup style="color:red">*</sup></div>
                                                            <div style="float:left; width:20%; text-align:right;"> <span style="padding-right:5px;">Confirm Password</span></div>
                                                            <div style="float:left; width:30%;"><input id='txtConfirmPassword' type="password" style="width:93%" /><sup style="color:red">*</sup></div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div style="width:88.6%; padding-right:9.5%; text-align:right; padding-top:10px; padding-bottom:30px;">
                                                @if (Model.CandidateID > 0)
                                                { @Html.ActionLink("<< Back", "LogOut", "User") }
                                                else
                                                {@Html.ActionLink("<< Back", "Login", "User") }
                                                <input id="btnSave" type="submit" value="Save" style="width:75px;" />
                                                @*<a id="btnClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>*@
                                            </div>
                                        </div>

                                        @*Education & Training*@
                                        <div title="Education & Training" id="regionEducationTraining" style="padding: 10px;">

                                            <div style="float:left;  width:100%;">
                                                <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                                                    <strong>Education</strong>
                                                </div>
                                                <div style="float:left; width:100%; height:180px;  padding-top:10px;">
                                                    <div style="float:left; width:100%; height:100%;">
                                                        <table id="tblEducation" class="easyui-datagrid" style="width:100%;height:100%" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true" autorowheight="false" toolbar="#toolbarEducation">
                                                            <thead>
                                                                <tr>
                                                                    <th field="Degree" width="200" align="left">Exam</th>
                                                                    <th field="Institution" width="245" align="left">Institute</th>
                                                                    <th field="Result" width="200" align="center">Division/CGPA</th>
                                                                    <th field="PassingYear" width="200" align="center">Passing Year</th>
                                                                </tr>
                                                            </thead>
                                                        </table>
                                                        <div id="toolbarEducation">
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" id="btnEducationAdd" plain="true">Add</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" id="btnEducationEdit" plain="true">Edit</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" id="btnEducationDelete" plain="true">Delete</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="float:left;  width:100%; padding-top:20px; padding-bottom:15px;">
                                                <div style=" height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                                                    <strong>Training</strong>
                                                </div>

                                                <div style="float:left; width:100%; height:180px;  padding-top:10px;">
                                                    <div style="float:left; width:100%; height:100%;">
                                                        <table id="tblTraining" class="easyui-datagrid" style="width:100%;height:100%" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true" autorowheight="false" toolbar="#toolbarTraining">
                                                            <thead>
                                                                <tr>
                                                                    <th field="CourseName" width="180" align="left">Course Name</th>
                                                                    <th field="Institution" width="120" align="left">Institute</th>
                                                                    <th field="StartDateInString" width="140" align="left">Start Date</th>
                                                                    <th field="EndDateInString" width="140" align="left">End Date</th>
                                                                    <th field="PassingDateInString" width="150" align="left">Passing Date</th>
                                                                    <th field="Result" width="110" align="left">Result</th>
                                                                </tr>
                                                            </thead>
                                                        </table>
                                                        <div id="toolbarTraining">
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" id="btnTrainingAdd" plain="true">Add</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" id="btnTrainingEdit" plain="true">Edit</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" id="btnTrainingDelete" plain="true">Delete</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="width:100%; text-align:right;">
                                                @if (Model.CandidateID > 0)
                                                { @Html.ActionLink("<< Back", "LogOut", "User") }
                                                else
                                                {@Html.ActionLink("<< Back", "Login", "User") }
                                            </div>
                                        </div>

                                        @*Experience & Reference*@
                                        <div title="Experience & Reference" id="regionExperienceReference" style="padding: 10px;">
                                            <div style="float:left;  width:100%;">
                                                <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                                                    <strong>Experience</strong>
                                                </div>
                                                <div style="float:left; width:100%; height:180px;  padding-top:10px;">
                                                    <div style="float:left; width:100%; height:100%;">
                                                        <table id="tblExperience" class="easyui-datagrid" style="width:100%;height:100%" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true" autorowheight="false" toolbar="#toolbarExperience">
                                                            <thead>
                                                                <tr>
                                                                    <th field="Organization" width="150" align="left">Organization</th>
                                                                    <th field="OrganizationType" width="150" align="left">Organization Type</th>
                                                                    <th field="Address" width="120" align="left">Address</th>
                                                                    <th field="Department" width="100" align="left">Department</th>
                                                                    <th field="Designation" width="100" align="left">Designation</th>
                                                                    <th field="StartDateInString" width="120" align="left">StartDate</th>
                                                                    <th field="EndDateInString" width="100" align="left">EndDate</th>
                                                                </tr>
                                                            </thead>
                                                        </table>
                                                        <div id="toolbarExperience">
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" id="btnExperienceAdd" plain="true">Add</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" id="btnExperienceEdit" plain="true">Edit</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" id="btnExperienceDelete" plain="true">Delete</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="float:left;  width:100%; padding-top:20px; padding-bottom:15px;">
                                                <div style=" height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                                                    <strong>Reference</strong>
                                                </div>

                                                <div style="float:left; width:100%; height:180px;  padding-top:10px;">
                                                    <div style="float:left; width:100%; height:100%;">
                                                        <table id="tblReference" class="easyui-datagrid" style="width:100%;height:100%" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true" autorowheight="false" toolbar="#toolbarReference">
                                                            <thead>
                                                                <tr>
                                                                    <th field="Name" width="150" align="left">Name</th>
                                                                    <th field="Organization" width="100" align="left">Organization</th>
                                                                    <th field="Department" width="100" align="left">Department</th>
                                                                    <th field="Designation" width="100" align="left">Designation</th>
                                                                    <th field="ContactNo" width="90" align="left">Contact No</th>
                                                                    <th field="Email" width="90" align="left">Email</th>
                                                                    <th field="Address" width="135" align="left">Address</th>
                                                                    <th field="Relation" width="80" align="left">Relation</th>

                                                                </tr>
                                                            </thead>
                                                        </table>
                                                        <div id="toolbarReference">
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" id="btnReferenceAdd" plain="true">Add</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" id="btnReferenceEdit" plain="true">Edit</a>
                                                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" id="btnReferenceDelete" plain="true">Delete</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="width:100%; text-align:right;">
                                                @if (Model.CandidateID > 0)
                                                { @Html.ActionLink("<< Back", "LogOut", "User") }
                                                else
                                                {@Html.ActionLink("<< Back", "Login", "User") }
                                            </div>
                                        </div>    
                                    </div>
                                </div>
                            </div>
                            @*</fieldset>*@
                        </div>
                    </div>

                }
               <div id="winEducation" class="easyui-window" title="Education" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false" style="width:35%;height:auto;padding:1px">
                    <div style="margin-left:0px; height:auto; width:100%; text-align:center;">
                        <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                            <strong>Educational Information</strong>
                        </div>
                        <div style="float:left; width:100%; height:auto;  padding-top:10px;">
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Degree </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtDegree" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Major </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtMajor" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Session </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtSession" style="width:80%" /> </div>
                            </div>

                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Passing Year </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtPassingYear" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Board/University </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtBoardUniversity" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Institution </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtInstitution" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Result </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtResult" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Country </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtCountry" style="width:80%" /> </div>
                            </div>
                        </div>
                        <div style="float:left; width:100%; height:auto; text-align:right;  padding-top:5px; padding-bottom:10px;">
                            <div style="float:right; padding-right:58px; text-align:right;">
                                <a id="btnEducationSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                <a id="btnEducationClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                            </div>

                        </div>
                    </div>
                </div>

                <div id="winTraining" class="easyui-window" title="Training" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false" style="width:35%;height:auto;padding:1px">
                    <div style="margin-left:0px; height:auto; width:100%; text-align:center;">
                        <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                            <strong>Training Information</strong>
                        </div>
                        <div style="float:left; width:100%; height:auto;  padding-top:10px;">
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Course Name </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtCourseName" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>

                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Specification </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtSpecification" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>

                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Start Date </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input id="dtTrainingStartDate" type="text" style="width: 81%" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" /> </div>
                            </div>

                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> End Date </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input id="dtTrainingEndDate" type="text" style="width: 81%" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" /> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Passing Date </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input id="dtTrainingPassingDate" type="text" style="width: 81%" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Duration </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtDuration" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Result </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtTrainingResult" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Institution </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtTrainingInstitution" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Certify Body Vendor </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtCertifyBodyVendor" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Country </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtTrainingCountry" style="width:80%" /> </div>
                            </div>
                            @*<div style="float:left; width:70%; padding-left:30%; padding-bottom:5px; ">
                                <input id="fileAttachmentCretification" type="file" style="width:100%; font-size:11px;" />
                            </div>
                            <div style="float:left; width:70%; padding-left:30%; padding-bottom:5px; text-align:left;">
                                <label id="lblAttachmentCretification" style="font-size:11px; text-align:left;" />
                            </div>*@
                        </div>
                        <div style="float:left; width:100%; height:auto; text-align:right;  padding-top:5px; padding-bottom:10px;">
                            <div style="float:right; padding-right:58px; text-align:right;">
                                <a id="btnTrainingSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                <a id="btnTrainingClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="winExperience" class="easyui-window" title="Experience" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false" style="width:35%;height:auto;padding:1px">
                    <div style="margin-left:0px; height:auto; width:100%; text-align:center;">
                        <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                            <strong>Experience Information</strong>
                        </div>
                        <div style="float:left; width:100%; height:auto;  padding-top:10px;">
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Organization </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtExperienceOrganization" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Organization Type</span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtExperienceOrganizationType" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Address </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtAddress" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Department </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtExperienceDepartment" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Desigantion </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtExperienceDesigantion" style="width:80%" /> </div>
                            </div>
                           
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Start Date </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input id="dtExperienceStartDate" type="text" style="width: 81%" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" /> </div>
                            </div>

                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> End Date </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input id="dtExperienceEndDate" type="text" style="width: 81%" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Area Of Experience </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtAreaOfExperience" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Major Responsibility </span> </div>
                                <div style="float:left; width:70%; text-align:left;">
                                    <textarea id="txtExperienceMajorResponsibility" style="width: 80%; height:45px; "></textarea>
                                </div>
                            </div>
                        </div>
                        <div style="float:left; width:100%; height:auto; text-align:right;  padding-top:5px; padding-bottom:10px;">
                            <div style="float:right; padding-right:58px; text-align:right;">
                                <a id="btnExperienceSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                <a id="btnExperienceClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                            </div>

                        </div>
                    </div>
                </div>

                <div id="winReference" class="easyui-window" title="Reference" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false" style="width:35%;height:auto;padding:1px">
                    <div style="margin-left:0px; height:auto; width:100%; text-align:center;">
                        <div style="height:25px; width:100%; background-color:#D8D8D8;text-align:center; vertical-align:middle; font-size:13px; ">
                            <strong>Reference Information</strong>
                        </div>
                        <div style="float:left; width:100%; height:auto;  padding-top:10px;">
                            <div style="float:left; width:100%; padding-bottom:5px;">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Name </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceName" style="width:80%" /><sup style="color:red">*</sup>  </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Organization </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceOrganization" style="width:80%" /><sup style="color:red">*</sup>  </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Department </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceDepartment" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%; padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Designation </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceDesignation" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Contact No </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceContactNo" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Email </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="email" id="txtReferenceEmail" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Address </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceAddress" style="width:80%" /> </div>
                            </div>
                            <div style="float:left; width:100%;padding-bottom:5px; ">
                                <div style=" float:left; width:30%;text-align:right;"> <span style="padding-right:5px;"> Relation </span> </div>
                                <div style="float:left; width:70%; text-align:left;"> <input type="text" id="txtReferenceRelation" style="width:80%" /><sup style="color:red">*</sup> </div>
                            </div>

                        </div>
                        <div style="float:left; width:100%; height:auto; text-align:right;  padding-top:5px; padding-bottom:10px;">
                            <div style="float:right; padding-right:58px; text-align:right;">
                                <a id="btnReferenceSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                <a id="btnReferenceClose" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div region="south" style="height:24px; width:100%; background-color:#CFB53B; text-align:center; color:White; font-weight:bold; font-size:12px">
                Copyright © 2012 Infocrat Solutions Ltd.
            </div>
        </div>
    </div>
    </div>
</body>
</html>
<script type="text/javascript">

    var _oCandidate = null;
    var _sBaseAddress="";
    //var _oApplication = null;
    //var _oCertificates=[];

    $(document).ready(function () {

        _sBaseAddress =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        _oCandidate =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
        //if(_oCandidate.ErrorMessage!="" && _oCandidate.ErrorMessage!=null ){alert(_oCandidate.ErrorMessage);  }
        
        $('#dateofBirth').datebox('setValue', icsdateformat(new Date()));

        if(_oCandidate.CandidateID>0)
        {
            $('#txtName').attr('disabled','disabled');
            $('#regionPassword').hide();
            $('#regionEducationTraining').show();
            $('#regionExperienceReference').show();
            $('#regionOthers').show();
            $('#regionLogout').show();
            
            LoadIntoGridEducation(_oCandidate.CandidateEducations);
            LoadIntoGridTraining(_oCandidate.CandidateTrainings);
            LoadIntoGridExperience(_oCandidate.CandidateExperiences);
            LoadIntoGridReference(_oCandidate.CandidateReferences);
            RefreshControll();

        }
        else
        {
            $('#regionLogout').hide();
            $('#regionEducationTraining').hide();
            $('#regionExperienceReference').hide();

        }

    });

    //function SetRetrunValueWhileError()
    //{
    //    _oCandidate.ErrorMessage="";
    //    $('#txtName').val(_oCandidate.Code);
    //    $('#txtName').val(_oCandidate.Name);
    //    $('#txtNickName').val(_oCandidate.NickName);
    //    $('#txtContactNo').val(_oCandidate.ContactNo);
    //    $('#txtEmail').val(_oCandidate.Email);
    //    $('#cboGender').val(_oCandidate.Gender);
    //    $('#cboMaritalStatus').val(_oCandidate.MaritalStatus);
    //    $('#txtFatherName').val(_oCandidate.FatherName);
    //    $('#txtMotherName').val(_oCandidate.MotherName);
    //    $('#dateofBirth').datebox('setValue', _oCandidate.DateOfBirthInString);
    //    $('#txtBirthPlace').val(_oCandidate.BirthPlace);
    //    $('#txtBloodGroup').val(_oCandidate.BloodGroup);
    //    $('#txtHeight').val(_oCandidate.Height);
    //    $('#txtWeight').val(_oCandidate.Weight);
    //    $('#txtWaist').val(_oCandidate.Waist);
    //    $('#txtChest').val(_oCandidate.Chest);
    //    $('#txtShoeSize').val(_oCandidate.ShoeSize);
    //    $('#txtIdentificationMart').val(_oCandidate.IdentificationMart);
    //    $('#txtNote').val(_oCandidate.Note);
    //    $('#txtNationalID').val(_oCandidate.NationalID);
    //    $('#txtPresentAddress').val(_oCandidate.PresentAddress);
    //    $('#txtPermanentAddress').val(_oCandidate.ParmanentAddress);
    //    $('#txtPassportNo').val(_oCandidate.PassportNo);
    //    $('#txtCountryOfPassport').val(_oCandidate.CountryOfPassport);
    //    $('#txtPassportIssueDate').val(_oCandidate.PassportIssueDate);
    //    $('#txtPassportExpireDate').val(_oCandidate.PassportExpireDate);
    //    $('#txtSeamanBook').val(_oCandidate.SeamanBook);
    //    $('#txtSemanBookIssueDate').val(_oCandidate.SemanBookIssueDate);
    //    $('#txtSeamanBookExpireDate').val(_oCandidate.SeamanBookExpireDate);
    //}

    $('#btnRemoveMemberPhoto').click(function(e)
    {
        $('#txtIsRemovedProfilePic').val(true);
        $('#imgMemberPhoto').attr('src', null).width(170).height(100);
        var reader = new FileReader();
    });

    function MemberPhoto(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#imgMemberPhoto')
                .attr('src', e.target.result)
                .width(170)
                .height(100);
                $('#txtIsRemovedProfilePic').val(false);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
    //function LoadBankBranch(oBankBranchs)
    //{
    //    if(oBankBranchs.length>0)
    //    {
    //        $('#cboBankBranch').empty();
    //        var sValue = "<option value='0'>---- Select Bank ----</option>";
    //        for (var i = 0; i < oBankBranchs.length; i++)
    //        {
    //            sValue += "<option value=" + oBankBranchs[i].BankBranchID + ">" + oBankBranchs[i].BankBranchName + "</option>";
    //        }
    //        $('#cboBankBranch').html(sValue);
    //    }
    //}

    //function LoadDepartment(oDepartments)
    //{
    //    if(oDepartments.length>0)
    //    {
    //        $('#cboExperienceDepartment').empty(); $('#cboRecommendedDepartment').empty();  $('#cboApplicationDepartment').empty();

    //        var sValue = "<option value='0'>---- Select Department ----</option>";
    //        for (var i = 0; i < oDepartments.length; i++)
    //        {
    //            sValue += "<option value=" + oDepartments[i].DepartmentID + ">" + oDepartments[i].Name + "</option>";
    //        }
    //        $('#cboExperienceDepartment').html(sValue); $('#cboRecommendedDepartment').html(sValue); $('#cboApplicationDepartment').html(sValue);
    //    }
    //}
    //function LoadVesselType(oVesselTypes)
    //{
    //    if(oVesselTypes.length>0)
    //    {
    //        $('#cboExperienceVesselType').empty();
    //        //var sValue = "<option value='None'>---- Select Vessel Type ----</option>";
    //        var sValue='';
    //        for (var i = 0; i < oVesselTypes.length; i++)
    //        {
    //            sValue += "<option value=" + oVesselTypes[i] + ">" + oVesselTypes[i] + "</option>";
    //        }
    //        $('#cboExperienceVesselType').html(sValue);
    //    }
    //}

    function LoadIntoGridEducation(oCandidateEducations)
    {
        data=oCandidateEducations;
        data={"total":""+data.length+"","rows":data};
        $('#tblEducation').datagrid('loadData',data);
    }
    function LoadIntoGridTraining(oCandidateTrainings)
    {

        data=oCandidateTrainings;
        data={"total":""+data.length+"","rows":data};
        $('#tblTraining').datagrid('loadData',data);
    }
    function LoadIntoGridExperience(oCandidateExperiences)
    {
        data=oCandidateExperiences;
        data={"total":""+data.length+"","rows":data};
        $('#tblExperience').datagrid('loadData',data);
    }
    function LoadIntoGridReference(oCandidateReferences)
    {
        data=oCandidateReferences;
        data={"total":""+data.length+"","rows":data};
        $('#tblReference').datagrid('loadData',data);
    }
    //function LoadIntoGridBankAccount(oCandidateBankAccounts)
    //{
    //    data=oCandidateBankAccounts;
    //    data={"total":""+data.length+"","rows":data};
    //    $('#tblBank').datagrid('loadData',data);
    //}
    //function LoadIntoGridVisa(oCandidateVisas)
    //{
    //    data=oCandidateVisas;
    //    data={"total":""+data.length+"","rows":data};
    //    $('#tblVisa').datagrid('loadData',data);
    //}
    //function LoadIntoGridRecommendedDesignation(oCandidateRecommendedDesignations)
    //{
    //    data=oCandidateRecommendedDesignations;
    //    data={"total":""+data.length+"","rows":data};
    //    $('#tblRank').datagrid('loadData',data);

    //}
    //function LoadIntoGridCandidateDocs(oCandidateDocs)
    //{
    //    data=oCandidateDocs;
    //    data={"total":""+data.length+"","rows":data};
    //    $('#tblAttachment').datagrid('loadData',data);
    //}
    //function LoadIntoGridApplication(oApplications)
    //{
    //    data=oApplications;
    //    data={"total":""+data.length+"","rows":data};
    //    $('#tblApplication').datagrid('loadData',data);
    //}
    function LoadIntoGridApplicationInfoTraining(oApplicationInfoTrainings)
    {
        data=$('#tblTraining').datagrid('getRows');
        data={"total":""+data.length+"","rows":data};
        $('#tblApplicationInfoTraining').datagrid('loadData',data);
        $('#tblApplicationInfoTraining').datagrid('uncheckAll');

        if(oApplicationInfoTrainings.length>0)
        {
            var nSelectedRowIndex=-1;
            var oRows=$('#tblApplicationInfoTraining').datagrid('getRows');
            var j=0;
            for(var i=0;i<oApplicationInfoTrainings.length;i++)
            {
                for(j=0;j<oRows.length;j++)
                {
                    if(oApplicationInfoTrainings[i].CandidateTrainingID==oRows[j].CandidateTrainingID)
                    {
                        nSelectedRowIndex = $('#tblApplicationInfoTraining').datagrid('getRowIndex', oRows[j]);
                        $('#tblApplicationInfoTraining').datagrid('checkRow', nSelectedRowIndex);
                    }
                }
            }
        }
    }
    function LoadIntoGridApplicationInfoExperience(oApplicationInfoExperiences)
    {
        data=$('#tblExperience').datagrid('getRows');
        data={"total":""+data.length+"","rows":data};
        $('#tblApplicationInfoExperience').datagrid('loadData',data);
        $('#tblApplicationInfoExperience').datagrid('uncheckAll');
        if(oApplicationInfoExperiences.length>0)
        {
            var nSelectedRowIndex=-1;
            var oRows=$('#tblApplicationInfoExperience').datagrid('getRows');
            var j=0;
            for(var i=0;i<oApplicationInfoExperiences.length;i++)
            {
                for(j=0;j<oRows.length;j++)
                {
                    if(oApplicationInfoExperiences[i].CandidateExperienceID==oRows[j].CandidateExperienceID)
                    {
                        nSelectedRowIndex = $('#tblApplicationInfoExperience').datagrid('getRowIndex', oRows[j]);
                        $('#tblApplicationInfoExperience').datagrid('checkRow', nSelectedRowIndex);
                    }
                }
            }
        }
    }

    function RefreshControll()
    {
        $('#cboGender').val(_oCandidate.Gender);
        $('#cboMaritalStatus').val(_oCandidate.MaritalStatus);
        $('#dateofBirth').datebox('setValue', _oCandidate.DateOfBirthInString);

    }

    //function GetCertificates()
    //{
    //    var nts=(new Date()).getTime()/1000;
    //    var sValue="";
    //    $.ajax({
    //        type: "POST",
    //        dataType: "json",
    //        url : _sBaseAddress+  "/Certificate/GetCertificates",
    //        traditional: true,
    //        data:  JSON.stringify({ sValue:sValue, nts: nts}),
    //        contentType: "application/json; charset=utf-8",
    //        success: function (data) {
    //            debugger;
    //            var oCertificates = jQuery.parseJSON(data);
    //            if (oCertificates.length>0)
    //            {
    //                _oCertificates=oCertificates;
    //                LoadCertificates(oCertificates);
    //            }
    //            else
    //            {
    //                _oCertificates=[];
    //                LoadCertificates([]);
    //            }
    //        },
    //        error: function (xhr, status, error) {
    //            alert(error);
    //        }

    //    });
    //}

    //function LoadCertificates(oCertificates)
    //{
    //    $('#cboTrainingCertification').empty();
    //    var sValue = "<option value='0'>---- Select Certification ----</option>";
    //    if(oCertificates.length>0)
    //    {

    //        for (var i = 0; i < oCertificates.length; i++)
    //        {
    //            sValue += "<option value=" + oCertificates[i].CertificateID + ">" + oCertificates[i].Description + "</option>";
    //        }

    //    }
    //    $('#cboTrainingCertification').html(sValue);
    //}

    //function LoadExperienceDesignation(oDesignations,nDesignationID)
    //{
    //    $('#cboExperienceRank').empty();
    //    var sValue = "<option value='0'>---- Select Rank ----</option>";
    //    if(oDesignations.length>0)
    //    {
    //        for (var i = 0; i < oDesignations.length; i++)
    //        {
    //            sValue += "<option value=" + oDesignations[i].DesignationID + ">" + oDesignations[i].Name + "</option>";
    //        }
    //    }
    //    $('#cboExperienceRank').html(sValue);
    //    $('#cboExperienceRank').val(nDesignationID);
    //}
    //function LoadRecommendedDesignation(oDesignations,nDesignationID)
    //{
    //    $('#cboRecommendedRank').empty();
    //    var sValue = "<option value='0'>---- Select Rank ----</option>";
    //    if(oDesignations.length>0)
    //    {
    //        for (var i = 0; i < oDesignations.length; i++)
    //        {
    //            sValue += "<option value=" + oDesignations[i].DesignationID + ">" + oDesignations[i].Name + "</option>";
    //        }
    //    }
    //    $('#cboRecommendedRank').html(sValue);
    //    $('#cboRecommendedRank').val(nDesignationID);
    //}
    //function LoadApplicationDesignation(oDesignations,nDesignationID)
    //{
    //    $('#cboApplicationRank').empty();
    //    var sValue = "<option value='0'>---- Select Rank ----</option>";
    //    if(oDesignations.length>0)
    //    {
    //        for (var i = 0; i < oDesignations.length; i++)
    //        {
    //            sValue += "<option value=" + oDesignations[i].DesignationID + ">" + oDesignations[i].Name + "</option>";
    //        }
    //    }
    //    $('#cboApplicationRank').html(sValue);
    //    $('#cboApplicationRank').val(nDesignationID);
    //}


    //$('#cboExperienceDepartment').change(function(e){ LoadExperienceDesignation([],0); });
    //$('#cboRecommendedDepartment').change(function(e){ LoadRecommendedDesignation([],0); });
    //$('#cboApplicationDepartment').change(function(e){ LoadApplicationDesignation([],0); });


    //$('#cboTrainingCertification').change(function(e)
    //{

    //    var nCertificateID=$('#cboTrainingCertification').val();
    //    if(nCertificateID>0)
    //    {
    //        for(var i=0;i<_oCertificates.length;i++)
    //        {
    //            if(nCertificateID==_oCertificates[i].CertificateID)
    //            {
    //                $('#txtTrainingCertificateNo').val(_oCertificates[i].CertificateNo);
    //                break;
    //            }
    //        }
    //    }
    //});

    //function GetDesignations(nDeptID,sRankFor,nDesignationID)
    //{
    //    var nts=(new Date()).getTime()/1000;
    //    $.ajax({
    //        type: "POST",
    //        dataType: "json",
    //        url : _sBaseAddress+  "/Designation/GetDesignations",
    //        traditional: true,
    //        data:  JSON.stringify({ nDeptID: nDeptID, nts: nts}),
    //        contentType: "application/json; charset=utf-8",
    //        success: function (data) {
    //            debugger;
    //            var oDesignations = jQuery.parseJSON(data);
    //            if (oDesignations.length>0 && oDesignations[0].DesignationID>0)
    //            {
    //                if(sRankFor=='Experience'){LoadExperienceDesignation(oDesignations,nDesignationID);}
    //                else if(sRankFor=='Recommended'){LoadRecommendedDesignation(oDesignations,nDesignationID);}
    //                else if(sRankFor=='Application'){LoadApplicationDesignation(oDesignations,nDesignationID);}
    //            }
    //            else
    //            {
    //                LoadExperienceDesignation([],nDesignationID);
    //                LoadRecommendedDesignation([],nDesignationID);
    //                LoadApplicationDesignation([],nDesignationID);
    //            }
    //        },
    //        error: function (xhr, status, error) {
    //            alert(error);
    //        }

    //    });
    //}

    /*------------------------------ Save ---------------------------------------------*/

    //$('#txtName').keypress(function (e)
    //{
    //    $('#txtSeamanBook').val($.trim($('#txtName').val()));
    //});

    function Validation()
    {

        if ($.trim($('#txtName').val()) == '') { alert('Please Enter Name!'); $('#txtName').focus(); return false; }
        else if ($.trim($('#txtContactNo').val()) == '') { alert('Please Enter Last Name.'); $('#txtContactNo').focus(); return false; }
        else if ($.trim($('#txtAlternateContactNo').val()) == '') { alert('Please Enter Alternate Contact No!'); $('#txtAlternateContactNo').focus(); return false; }
        else if ($.trim($('#txtEmail').val()) == '') { alert('Please Enter Email Address!'); $('#txtEmail').focus(); return false; }
        else if ($.trim($('#txtAlternateEmail').val()) == '') { alert('Please Enter Alternate Email Address'); $('#txtAlternateEmail').focus(); return false; }
        else if ($.trim($('#cboGender').val()) <= 0) { alert('Please Select Gender'); $('#cboGender').focus(); return false; }
        else if ($.trim($('#cboMaritalStatus').val()) <= 0) { alert('Please Select Valid Marital Status.'); $('#cboMaritalStatus').focus(); return false; }
        else if ($.trim($('#txtFatherName').val()) == '') { alert('Please Enter Father Name.'); $('#txtFatherName').focus(); return false; }
        else if ($.trim($('#txtMotherName').val()) == '') { alert('Please Enter Mother Name.'); $('#txtMotherName').focus(); return false; }
        else if ($.trim($('#txtReligious').val()) == '') { alert('Please Enter Religion !'); $('#txtReligious').focus(); return false; }
        else if ($.trim($('#txtNationalID').val()) == '') { alert('Please Enter National ID.'); $('#txtNationalID').focus(); return false; }
        else if ($.trim($('#txtNationalism').val()) == '') { alert('Please Enter Nationality !'); $('#txtNationalism').focus(); return false; }
        else if ($.trim($('#txtPresentAddress').val()) == '') { alert('Please Enter Present Address.'); $('#txtPresentAddress').focus(); return false; }
        else if ($.trim($('#txtPermanentAddress').val()) == '') { alert('Please Enter Permanent Addess.'); $('#txtPermanentAddress').focus(); return false; }
        
        if(_oCandidate.CandidateID<=0)
        {
            if ($.trim($('#txtUsername').val()) == '') { alert('Please Enter Username.'); $('#txtUsername').focus(); return false; }
            if ($.trim($('#txtPassword').val()) == '') { alert('Please Enter Password.'); $('#txtPassword').focus(); return false; }
            else if ($.trim($('#txtPassword').val()) != $.trim($('#txtConfirmPassword').val())) { alert('Password not match.'); $('#txtConfirmPassword').focus(); return false; }
        }
        return true;
    }

    function RefreshObject()
    {
        // cboGender cboMaritalStatus
        // txtCandidateID txtGender txtMaritalStatus txtDateofBirth
        // txtPassportIssueDate txtPassportExpireDate txtSeamanBookIssueDate txtSeamanBookExpireDate

        $('#txtGender').val($('#cboGender').val());
        $('#txtMaritalStatus').val($('#cboMaritalStatus').val());
        $('#txtDateofBirth').val(standardDate($('#dateofBirth').datebox('getValue'),'.'));


    }


    $('#btnSave').click(function (e) {
        
        if (!Validation()) { return false;}
        RefreshObject();
       
        //if(_oCandidate.CandidateID<=0)
        //{
        //    UserSave();
        //}
    
    });

    //function UserSave()
    //{
        
    //    var oCandidateUser = 
    //        {
    //            UserID : 0,
    //            LogInID  : $.trim($('#txtUsername').val()),
    //            UserName  : $.trim($('#txtUsername').val()),
    //            Password : $.trim($('#txtPassword').val()),
    //            CandidateID : _oCandidate.CandidateID
    //        }
      
    //    $.ajax({
    //        type: "POST",
    //        dataType: "json",
    //        url:  "User/CandidateUser_IU",
    //        traditional: true,
    //        data: JSON.stringify({oCandidateUser : oCandidateUser}),
    //        contentType: "application/json; charset=utf-8",

    //        success: function(data)
    //        {
    //            oCandidateUser = jQuery.parseJSON(data);
    //            if (oCandidateUser.ErrorMessage == "" && oCandidateUser.CandidateUserID>0) 
    //            {
    //                var oCU = oCandidateUser;
    //            } 
               
    //        },
    //        error: function(xhr, status, error)
    //        {
    //            alert(error);
    //        }
    //    });
    //}

    /*..........................  Education Information ..................................*/

    $('#btnEducationAdd').click(function (e) {
        $('#tblEducation').datagrid('clearSelections');
        ResetEducationalInformation();
        $('#winEducation').window('open');
    });

    $('#btnEducationEdit').click(function (e) {
        var oEducation = $('#tblEducation').datagrid('getSelected');
        if (oEducation != null) { SetEducationInformation(oEducation); }
        else { alert("Please select an item from list."); return; }
        $('#winEducation').window('open');
    });

    $('#btnEducationDelete').click(function (e) {
        var oCandidateEducation = $('#tblEducation').datagrid('getSelected');
        if (oCandidateEducation != null && oCandidateEducation.CEID>0)
        {
            var nSelectedRowIndex = $('#tblEducation').datagrid('getRowIndex', oCandidateEducation);
            if(confirm("Are you sure to delete?"))
            {
                $.ajax
               ({
                   type: "POST",
                   dataType: "json",
                   url : _sBaseAddress+  "/Career/CandidateEducationDelete",
                   traditional: true,
                   data:  JSON.stringify(oCandidateEducation),
                   contentType: "application/json; charset=utf-8",
                   success: function (data) {
                       debugger;
                       oCandidateEducation = jQuery.parseJSON(data);
                       if (oCandidateEducation.ErrorMessage == null)
                       {
                           alert("Delete sucessfully");
                           $('#tblEducation').datagrid('deleteRow', nSelectedRowIndex);

                       }
                       else
                       {
                           alert(oCandidateEducation.ErrorMessage);
                       }
                   },
                   error: function (xhr, status, error)
                   {
                       alert(error);
                   }

               });

            }
        }
        else { alert("Please select a valid item from list.");}
    });

    $('#btnEducationSave').click(function (e) {
        var nSelectedRowIndex = -1;
        var oRows = $('#tblEducation').datagrid('getRows');
        if (oRows.length > 0)
        {
            var oRow = $('#tblEducation').datagrid('getSelected');
            nSelectedRowIndex = $('#tblEducation').datagrid('getRowIndex', oRow);
        }
        var oEducation=RefreshObjectEducationInformation();
        SaveEducationalInformation(oEducation,nSelectedRowIndex);
    });

    $('#btnEducationClose').click(function (e) {
        $('#winEducation').window('close');
    });


    function SaveEducationalInformation(oCandidateEducation,nSelectedRowIndex)
    {
        var bISNew=oCandidateEducation.CEID>0?false:true;
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Career/CandidateEducationIU",
            traditional: true,
            data:  JSON.stringify(oCandidateEducation),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                //debugger;
                oCandidateEducation = jQuery.parseJSON(data);
                if (oCandidateEducation.CEID>0)
                {
                    alert("Save Successfully.");
                    if(!bISNew)
                    {
                        $('#tblEducation').datagrid('updateRow', { index: nSelectedRowIndex, row: oCandidateEducation });
                    }
                    else
                    {
                        var nIndex = $('#tblEducation').datagrid('getRows').length;
                        $('#tblEducation').datagrid('appendRow', oCandidateEducation);
                        $('#tblEducation').datagrid('selectRow', nIndex);
                    }
                    ResetEducationalInformation();
                    $('#winEducation').window('close');
                }
                else
                {
                    alert(oCandidateEducation.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    }

    function ValidationEducationalInformation()
    {
        if ($.trim($('#txtDegree').val()) == '') { alert("Please Enter Degree ."); $('#txtDegree ').focus(); return false; }
        else if ($.trim($('#txtPassingYear').val()) == '') { alert("Please Enter Passing Year."); $('#txtPassingYear').focus(); return false; }
        else if ($.trim($('#txtBoardUniversity').val()) == '') { alert("Please Enter Board/University."); $('#txtBoardUniversity').focus(); return false; }
        else if ($.trim($('#txtInstitution').val()) == '') { alert("Please Institution."); $('#txtInstitution').focus(); return false; }
        else if ($.trim($('#txtResult').val()) == '') { alert("Please Result."); $('#txtResult').focus(); return false; }
        else { return true; }
    }

    function RefreshObjectEducationInformation()
    {
        if (!ValidationEducationalInformation()) { return;}
        var oEducation =
            {
                CEID: (_oCandidate.CandidateEducation != null) ? _oCandidate.CandidateEducation.CEID : 0,
                CandidateID: (_oCandidate.CandidateEducation != null) ? _oCandidate.CandidateEducation.CandidateID : _oCandidate.CandidateID,
                Degree : $.trim($('#txtDegree').val()),
                Major: $.trim($('#txtMajor').val()),
                Session : $('#txtSession').val(),
                PassingYear : $('#txtPassingYear').val(),
                BoardUniversity : $('#txtBoardUniversity').val(),
                Institution : $('#txtInstitution').val(),
                Result : $('#txtResult').val(),
                Country : $('#txtCountry').val()

            };
        return oEducation;
    }

    function SetEducationInformation(oEducation)
    {
        _oCandidate.CandidateEducation = oEducation;

        $('#txtDegree ').val(oEducation.Degree);
        $('#txtMajor').val(oEducation.Major);
        $('#txtSession').val(oEducation.Session);
        $('#txtPassingYear').val(oEducation.PassingYear);
        $('#txtBoardUniversity').val(oEducation.BoardUniversity);
        $('#txtInstitution').val(oEducation.Institution);
        $('#txtResult').val(oEducation.Result);
        $('#txtCountry').val(oEducation.Country);

    }

    function ResetEducationalInformation()
    {
        _oCandidate.CandidateEducation = null;
        $('#txtDegree ').val('');
        $('#txtMajor').val('');
        $('#txtSession').val('');
        $('#txtPassingYear').val('');
        $('#txtBoardUniversity').val('');
        $('#txtInstitution').val('');
        $('#txtResult').val('');
        $('#txtCountry').val('');
    }


    /*..........................  Training Information ..................................*/

    $('#btnTrainingAdd').click(function (e) {
        $('#tblTraining').datagrid('clearSelections');
        ResetTrainingInformation();
        $('#winTraining').window('open');
    });

    $('#btnTrainingEdit').click(function (e) {
        var oCandidateTraining = $('#tblTraining').datagrid('getSelected');
        if (oCandidateTraining != null) { SetTrainingInformation(oCandidateTraining); }
        else { alert("Please select an item from list."); return; }
        $('#winTraining').window('open');
    });

    $('#btnTrainingDelete').click(function (e)
    {
        var oCandidateTraining = $('#tblTraining').datagrid('getSelected');
        if (oCandidateTraining != null && oCandidateTraining.CTID>0)
        {
            if (confirm("Are you sure to delete?"))
            {
                var nSelectedRowIndex = $('#tblTraining').datagrid('getRowIndex', oCandidateTraining);

                $.ajax
                ({
                    type: "POST",
                    dataType: "json",
                    url : _sBaseAddress+  "/Career/CandidateTrainingDelete",
                    traditional: true,
                    data:  JSON.stringify(oCandidateTraining),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        debugger;
                        oCandidateTraining = jQuery.parseJSON(data);
                        if (oCandidateTraining.ErrorMessage == null)
                        {
                            alert("Delete sucessfully");
                            $('#tblTraining').datagrid('deleteRow', nSelectedRowIndex);

                        }
                        else
                        {
                            alert(oCandidateTraining.ErrorMessage);
                        }
                    },
                    error: function (xhr, status, error)
                    {
                        alert(error);
                    }

                });
            }
        }
        else { alert("Please select a valid item from list.");}
    });

    $('#btnTrainingSave').click(function (e) {
        var nSelectedRowIndex = -1;
        var oRows = $('#tblTraining').datagrid('getRows');
        if (oRows.length > 0) {
            var oRow = $('#tblTraining').datagrid('getSelected');
            nSelectedRowIndex = $('#tblTraining').datagrid('getRowIndex', oRow);
        }

        var oCandidateTraining = RefreshObjectTrainingInformation();
        SaveTrainingInformation(oCandidateTraining,nSelectedRowIndex);

    });

    $('#btnTrainingClose').click(function (e) {
        $('#winTraining').window('close');
    });


    function SaveTrainingInformation(oCandidateTraining,nSelectedRowIndex )
    {
        var bISNew=oCandidateTraining.CTID>0?false:true;
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Career/CandidateTrainingIU",
            traditional: true,
            data:  JSON.stringify(oCandidateTraining),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                //debugger;
                oCandidateTraining = jQuery.parseJSON(data);
                if (oCandidateTraining.CTID>0)
                {
                    //var InputFile = document.getElementById("fileAttachmentCretification");
                    //if(InputFile.files[0]!=null)
                    //{
                    //    SaveAttachment((_oCandidateDoc!=null)?_oCandidateDoc.CandidateDocID:0,oCandidateTraining.CourseName,3,oCandidateTraining.CertificateID,standardDate(oCandidateTraining.StartDateInString,'.'),standardDate(oCandidateTraining.EndDateInString,'.'), MakeFormdData(InputFile))
                    //}
                    //else
                    //{
                        alert("Data Saved sucessfully");
                    //}

                    if (!bISNew)
                    {
                        $('#tblTraining').datagrid('updateRow', { index: nSelectedRowIndex, row: oCandidateTraining });
                    }
                    else
                    {
                        var nIndex =  $('#tblTraining').datagrid('getRows').length;
                        $('#tblTraining').datagrid('appendRow', oCandidateTraining);
                        $('#tblTraining').datagrid('selectRow', nIndex);
                    }

                    ResetTrainingInformation();
                    $('#winTraining').window('close');

                }
                else
                {
                    alert(oCandidateTraining.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });

    }

    function ValidationTrainingInformation()
    {
        if ($.trim($('#txtCourseName').val()) == '') { alert("Please Enter Course Name."); $('#txtCourseName').focus(); return false; }
        else if ($.trim($('#txtSpecification').val()) == '') { alert("Please Enter Specification."); $('#txtSpecification').focus(); return false; }
        else { return true; }
    }
    
    function RefreshObjectTrainingInformation()
    {
      
        if (!ValidationTrainingInformation()) { return; }
        var oCandidateTraining =
            {
                CTID: (_oCandidate.CandidateTraining != null) ? _oCandidate.CandidateTraining.CTID : 0,
                CandidateID: (_oCandidate.CandidateTraining != null) ? _oCandidate.CandidateTraining.CandidateID : _oCandidate.CandidateID,
                CourseName : $('#txtCourseName').val(),
                Specification : $('#txtSpecification').val(),
                StartDate : $('#dtTrainingStartDate').datebox('getValue'),
                EndDate : $('#dtTrainingEndDate').datebox('getValue'),
                Duration : $('#txtDuration').val(),
                PassingDate : $('#dtTrainingPassingDate').datebox('getValue'),
                Result : $('#txtTrainingResult').val(),
                Institution : $('#txtTrainingInstitution').val(),
                CertifyBodyVendor : $('#txtCertifyBodyVendor').val(),
                Country : $('#txtTrainingCountry').val()

            };
        return oCandidateTraining;
    }

    function SetTrainingInformation(oCandidateTraining) {
        _oCandidate.CandidateTraining = oCandidateTraining;
        $('#txtCourseName').val(oCandidateTraining.CourseName);
        $('#txtSpecification').val(oCandidateTraining.Specification);
        $('#dtTrainingStartDate').datebox('setValue', oCandidateTraining.StartDateInString);
        $('#dtTrainingEndDate').datebox('setValue', oCandidateTraining.EndDateInString);
        $('#dtTrainingPassingDate').datebox('setValue', oCandidateTraining.PassingDateInString);
        $('#txtDuration').val(oCandidateTraining.Duration);
        $('#txtTrainingResult').val(oCandidateTraining.Result);
        $('#txtTrainingInstitution').val(oCandidateTraining.Institution);
        $('#txtCertifyBodyVendor').val(oCandidateTraining.CertifyBodyVendor);
        $('#txtTrainingCountry').val(oCandidateTraining.Country);
    }

    function ResetTrainingInformation()
    {
        _oCandidate.CandidateTraining = null;
        $('#txtCourseName').val('');
        $('#txtSpecification').val('');
        $('#dtTrainingStartDate').datebox('setValue', icsdateformat(new Date()));
        $('#dtTrainingEndDate').datebox('setValue', icsdateformat(new Date()));
        $('#dtTrainingPassingDate').datebox('setValue', icsdateformat(new Date()));
        $('#txtDuration').val('');
        $('#txtTrainingResult').val('');
        $('#txtTrainingInstitution').val('');
        $('#txtCertifyBodyVendor').val('');
        $('#txtTrainingCountry').val('');
    }

    //$('#txtTrainingCertification').keypress(function (e) {

    //    var code = (e.keyCode ? e.keyCode : e.which);
    //    if (code == 13) {
    //        var sCertificateName = document.getElementById('txtTrainingCertification').value;
    //        var tsv=((new Date()).getTime())/1000;
    //        var oParameter = new Object();
    //        oParameter.MultipleItemReturn = false;
    //        var url =_sBaseAddress+ "/Certificate/View_CertificatePicker?sTemp="+sCertificateName;
    //        var nLeft=(window.screen.width/2)-(455/2);
    //        var nHeight=(window.screen.height/2)-(400/2);
    //        var oSelectedCertificate = window.showModalDialog(url, oParameter, 'dialogHeight:400px;dialogWidth:455px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
    //        if(oSelectedCertificate!=null && oSelectedCertificate.CertificateID>0)
    //        {
    //            $('#txtTrainingCertification').val(oSelectedCertificate.Description);
    //            $('#txtTrainingCertificateNo').val(oSelectedCertificate.CertificateNo);
    //            _nCertificateID =  oSelectedCertificate.CertificateID;
    //        }
    //        else
    //        {
    //            $('#txtTrainingCertification').val('');
    //            $('#txtTrainingCertificateNo').val('');
    //            _nCertificateID = 0;
    //        }
    //    }
    //});

    //$('#txtTrainingInstitute').keypress(function (e) {

    //    var code = (e.keyCode ? e.keyCode : e.which);
    //    if (code == 13)
    //    {
    //        var sInstituteName = document.getElementById('txtTrainingInstitute').value;
    //        var tsv=((new Date()).getTime())/1000;
    //        var oParameter = new Object();
    //        oParameter.MultipleItemReturn = false;
    //        var url =_sBaseAddress+ "/Candidate/View_TrainingInstitutePicker?sInstitute="+sInstituteName;
    //        var nLeft=(window.screen.width/2)-(280/2);
    //        var nHeight=(window.screen.height/2)-(300/2);
    //        var oSelectedInstitute = window.showModalDialog(url, oParameter, 'dialogHeight:300px;dialogWidth:280px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
    //        if(oSelectedInstitute!=null && oSelectedInstitute.Institution !="")
    //        {
    //            $('#txtTrainingInstitute').val(oSelectedInstitute.Institution);
    //        }
    //        else
    //        {
    //            $('#txtTrainingInstitute').val('');
    //        }
    //    }
    //});

    /*..........................  Experience Information ..................................*/

    $('#btnExperienceAdd').click(function (e) {
        $('#tblExperience').datagrid('clearSelections');
        ResetExperienceInformation();
        $('#winExperience').window('open');
    });

    $('#btnExperienceEdit').click(function (e) {
        var oCandidateExperience = $('#tblExperience').datagrid('getSelected');
        if (oCandidateExperience != null) { SetExperienceInformation(oCandidateExperience); }
        else { alert("Please select an item from list."); return; }
        $('#winExperience').window('open');
    });

    $('#btnExperienceDelete').click(function (e) {
        var oCandidateExperience = $('#tblExperience').datagrid('getSelected');
        if (oCandidateExperience != null && oCandidateExperience.CExpID ) {
            if (confirm("Are you sure to delete?"))
            {
                var nSelectedRowIndex = $('#tblExperience').datagrid('getRowIndex', oCandidateExperience);
                $.ajax
                ({
                    type: "POST",
                    dataType: "json",
                    url : _sBaseAddress+  "/Career/CandidateExperienceDelete",
                    traditional: true,
                    data:  JSON.stringify(oCandidateExperience),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        debugger;
                        oCandidateExperience = jQuery.parseJSON(data);
                        if (oCandidateExperience.ErrorMessage == null)
                        {
                            alert("Delete sucessfully");
                            $('#tblExperience').datagrid('deleteRow',nSelectedRowIndex);

                        }
                        else
                        {
                            alert(oCandidateExperience.ErrorMessage);
                        }
                    },
                    error: function (xhr, status, error)
                    {
                        alert(error);
                    }

                });
            }
        }
        else { alert("Please select a valid item from list.");}
    });

    $('#btnExperienceSave').click(function (e) {
        debugger
        var nSelectedRowIndex = -1;
        var oRows = $('#tblExperience').datagrid('getRows');
        if (oRows.length > 0) {
            var oRow = $('#tblExperience').datagrid('getSelected');
            nSelectedRowIndex = $('#tblExperience').datagrid('getRowIndex', oRow);
        }

        var oCandidateExperience = RefreshObjectExperienceInformation();
        SaveExperienceInformation(oCandidateExperience,nSelectedRowIndex);
    });

    $('#btnExperienceClose').click(function (e) {
        $('#winExperience').window('close');
    });


    function SaveExperienceInformation(oCandidateExperience,nSelectedRowIndex)
    {
        debugger
        var bISNew=oCandidateExperience.CExpID>0?false:true;
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Career/CandidateExperienceIU",
            traditional: true,
            data:  JSON.stringify(oCandidateExperience),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                //debugger;
                oCandidateExperience = jQuery.parseJSON(data);
                if (oCandidateExperience.CExpID>0)
                {
                    alert("Data Saved sucessfully");
                    if (!bISNew)
                    {
                        $('#tblExperience').datagrid('updateRow', { index: nSelectedRowIndex, row: oCandidateExperience });
                    }
                    else
                    {
                        var nIndex = $('#tblExperience').datagrid('getRows').length;
                        $('#tblExperience').datagrid('appendRow', oCandidateExperience);
                        $('#tblExperience').datagrid('selectRow', nIndex);
                    }
                    ResetExperienceInformation();
                    $('#winExperience').window('close');

                }
                else
                {
                    alert(oCandidateExperience.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });

    }

    function ValidationExperienceInformation() {
        if ($.trim($('#txtExperienceOrganization').val()) == '') { alert("Please Enter Organization Name."); $('#txtExperienceOrganization').focus(); return false; }
        else if ($.trim($('#txtExperienceOrganizationType').val()) == '') { alert("Please Enter Organization Type."); $('#txtExperienceOrganizationType').focus(); return false; }
        else { return true; }
    }

    function RefreshObjectExperienceInformation()
    {
        debugger
        if (!ValidationExperienceInformation()) { return; }
        var oCandidateExperience =
            {
                CExpID: (_oCandidate.CandidateExperience != null) ? _oCandidate.CandidateExperience.CExpID : 0,
                CandidateID: (_oCandidate.CandidateExperience != null) ? _oCandidate.CandidateExperience.CandidateID : _oCandidate.CandidateID,
                Organization  : $('#txtExperienceOrganization').val(),
                OrganizationType : $('#txtExperienceOrganizationType').val(),
                Address : $('#txtAddress').val(),
                Department : $('#txtExperienceDepartment').val(),
                Designation : $('#txtExperienceDesigantion').val(),
                StartDate :  $('#dtExperienceStartDate').datebox('getValue'),
                EndDate :  $('#dtExperienceEndDate').datebox('getValue'),
                AreaOfExperience :$('#txtAreaOfExperience').val(),
                MajorResponsibility : $('#txtExperienceMajorResponsibility').val()

            };
        return oCandidateExperience;
    }

    function SetExperienceInformation(oCandidateExperience) {
        debugger
        _oCandidate.CandidateExperience = oCandidateExperience;
        $('#txtExperienceOrganization').val(oCandidateExperience.Organization);
        $('#txtExperienceOrganizationType').val(oCandidateExperience.OrganizationType);
        $('#txtAddress').val(oCandidateExperience.Address);
        $('#txtExperienceDepartment').val(oCandidateExperience.Department);
        $('#txtExperienceDesigantion').val(oCandidateExperience.Designation);
        $('#dtExperienceStartDate').datebox('setValue', oCandidateExperience.StartDateInString);
        $('#dtExperienceEndDate').datebox('setValue', oCandidateExperience.EndDateInString);
        $('#txtAreaOfExperience').val(oCandidateExperience.AreaOfExperience);
        $('#txtExperienceMajorResponsibility').val(oCandidateExperience.MajorResponsibility);
        
    }

    function ResetExperienceInformation() {
        _oCandidate.CandidateExperience = null;
        $('#txtExperienceOrganization').val('');
        $('#txtExperienceOrganizationType').val('');
        $('#txtAddress').val('');
        $('#txtExperienceDepartment').val('');
        $('#txtExperienceDesigantion').val('');
        $('#dtExperienceStartDate').datebox('setValue', icsdateformat(new Date()));
        $('#dtExperienceEndDate').datebox('setValue', icsdateformat(new Date()));
        $('#txtAreaOfExperience').val('');
        $('#txtExperienceMajorResponsibility').val('');
        
    }

    /*..........................  Reference Information ..................................*/

    $('#btnReferenceAdd').click(function (e) {
        $('#tblReference').datagrid('clearSelections');
        ResetReferenceInformation();
        $('#winReference').window('open');
    });

    $('#btnReferenceEdit').click(function (e) {
        var oCandidateReference = $('#tblReference').datagrid('getSelected');
        if (oCandidateReference != null) { SetReferenceInformation(oCandidateReference); }
        else { alert("Please select an item from list."); return; }
        $('#winReference').window('open');
    });

    $('#btnReferenceDelete').click(function (e) {
        var oCandidateReference = $('#tblReference').datagrid('getSelected');
        if (oCandidateReference != null && oCandidateReference.CRefID>0)
        {
            if (confirm("Are you sure to delete?"))
            {
                var nSelectedRowIndex = $('#tblReference').datagrid('getRowIndex', oCandidateReference);
                $.ajax
                ({
                    type: "POST",
                    dataType: "json",
                    url : _sBaseAddress+  "/Career/CandidateReferenceDelete",
                    traditional: true,
                    data:  JSON.stringify(oCandidateReference),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        debugger;
                        oCandidateReference = jQuery.parseJSON(data);
                        if (oCandidateReference.ErrorMessage == null || oCandidateReference.ErrorMessage=="")
                        {
                            alert("Delete sucessfully");
                            $('#tblReference').datagrid('deleteRow', nSelectedRowIndex);
                        }
                        else
                        {
                            alert(oCandidateReference.ErrorMessage);
                        }
                    },
                    error: function (xhr, status, error)
                    {
                        alert(error);
                    }

                });
            }
        }
        else { alert("Please select a valid item from list.");}
    });

    $('#btnReferenceSave').click(function (e) {
        var nSelectedRowIndex = -1;
        var oRows = $('#tblReference').datagrid('getRows');
        if (oRows.length > 0) {
            var oRow = $('#tblReference').datagrid('getSelected');
            nSelectedRowIndex = $('#tblReference').datagrid('getRowIndex', oRow);
        }

        var oCandidateReference =RefreshObjectReferenceInformation();
        SaveReferenceInformation(oCandidateReference,nSelectedRowIndex);
    });

    $('#btnReferenceClose').click(function (e) {
        $('#winReference').window('close');
    });


    function SaveReferenceInformation(oCandidateReference,nSelectedRowIndex)
    {
        var bISNew=oCandidateReference.CRefID>0?false:true;
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Career/CandidateReferenceIU",
            traditional: true,
            data:  JSON.stringify(oCandidateReference),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                oCandidateReference = jQuery.parseJSON(data);
                if (oCandidateReference.CRefID>0) {
                    alert("Data Saved sucessfully");
                    if (!bISNew)
                    {
                        $('#tblReference').datagrid('updateRow', { index: nSelectedRowIndex, row: oCandidateReference });
                    }
                    else
                    {
                        var nIndex = $('#tblReference').datagrid('getRows').length;
                        $('#tblReference').datagrid('appendRow', oCandidateReference);
                        $('#tblReference').datagrid('selectRow', nIndex);
                    }
                    ResetReferenceInformation();
                    $('#winReference').window('close');
                }
                else {
                    alert(oCandidateReference.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    }

    function ValidationReferenceInformation() {
        if ($.trim($('#txtReferenceName').val()) == '') { alert("Please Enter Name."); $('#txtReferenceName').focus(); return false; }
        else if ($.trim($('#txtReferenceOrganization').val()) == '') { alert("Please Enter Organization."); $('#txtReferenceOrganization').focus(); return false; }
        else if ($.trim($('#txtReferenceContactNo').val()) == '') { alert("Please Enter Contact No."); $('#txtReferenceContactNo').focus(); return false; }
        else if ($.trim($('#txtReferenceRelation').val()) == '') { alert("Please Enter Relation."); $('#txtReferenceRelation').focus(); return false; }
        else { return true; }
    }

    function RefreshObjectReferenceInformation()
    {
        if (!ValidationReferenceInformation()) { return; }
        var oCandidateReference =
            {
                CRefID: (_oCandidate.CandidateReference != null) ? _oCandidate.CandidateReference.CRefID : 0,
                CandidateID: (_oCandidate.CandidateReference != null) ? _oCandidate.CandidateReference.CandidateID : _oCandidate.CandidateID,
                Name : $('#txtReferenceName').val(),
                Organization : $('#txtReferenceOrganization').val(),
                Department : $('#txtReferenceDepartment').val(),
                Designation : $('#txtReferenceDesignation').val(),
                ContactNo : $('#txtReferenceContactNo').val(),
                Email : $('#txtReferenceEmail').val(),
                Address : $('#txtReferenceAddress').val(),
                Relation : $('#txtReferenceRelation').val()

            };
        return oCandidateReference;
    }

    function SetReferenceInformation(oCandidateReference) {
        _oCandidate.CandidateReference = oCandidateReference;
        $('#txtReferenceName').val(oCandidateReference.Name);
        $('#txtReferenceOrganization').val(oCandidateReference.Organization);
        $('#txtReferenceDepartment').val(oCandidateReference.Department);
        $('#txtReferenceDesignation').val(oCandidateReference.Designation);
        $('#txtReferenceContactNo').val(oCandidateReference.ContactNo);
        $('#txtReferenceEmail').val(oCandidateReference.Email);
        $('#txtReferenceAddress').val(oCandidateReference.Address);
        $('#txtReferenceRelation').val(oCandidateReference.Relation);

    }

    function ResetReferenceInformation() {
        _oCandidate.CandidateReference = null;
        $('#txtReferenceName').val('');
        $('#txtReferenceOrganization').val('');
        $('#txtReferenceDepartment').val('');
        $('#txtReferenceDesignation').val('');
        $('#txtReferenceContactNo').val('');
        $('#txtReferenceEmail').val('');
        $('#txtReferenceAddress').val('');
        $('#txtReferenceRelation').val('');

    }


    /*..........................  Document Attachment ..................................*/



    $('#btnAttachmentAdd').click(function (e) {
        $('#tblAttachment').datagrid('clearSelections');
        $('#winAttachment').window('open');
    });

    $('#btnAttachmentDelete').click(function (e) {
        var oAttachment = $('#tblAttachment').datagrid('getSelected');
        if (oAttachment != null && oAttachment.CandidateDocID>0)
        {
            if (confirm("Are you sure to delete?"))
            {
                var nSelectedRowIndex = $('#tblAttachment').datagrid('getRowIndex', oAttachment);
                $.ajax
                ({
                    type: "POST",
                    dataType: "json",
                    url : _sBaseAddress+  "/Candidate/DeleteAttachment",
                    traditional: true,
                    data:  JSON.stringify({nEmpDocID : oAttachment.CandidateDocID}),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        var sMsg = jQuery.parseJSON(data);
                        if (sMsg == "Delete Successfully")
                        {
                            alert(sMsg);
                            $('#tblAttachment').datagrid('deleteRow', nSelectedRowIndex);
                        }
                        else
                        {
                            alert(sMsg);
                        }
                    },
                    error: function (xhr, status, error)
                    {
                        alert(error);
                    }

                });
            }
        }
        else { alert("Please select a valid item from list.");}
    });

    $('#btnAttachmentSave').click(function (e) {
        SaveCommonAttachment();
    });

    $('#btnAttachmentClose').click(function (e) {

        $('#winAttachment').window('close');
    });

    function ValidationAttachment() {
        if ($('#txtAttachmentDescription').val()=="") { alert("Please Enter Description."); $('#txtAttachmentDescription').focus(); return false; }
        else { return true; }
    }

    function SaveCommonAttachment()
    {
        if(!ValidationAttachment()){return;}

        var  oFormdata = new FormData();
        var fileInput = document.getElementById("fileInput");
        if(fileInput.files[0]!=null){oFormdata.append(fileInput.files[0].name, fileInput.files[0]);}
        var nts=((new Date()).getTime())/1000;
        var xhr = new XMLHttpRequest();
        xhr.open('POST',_sBaseAddress+'/Candidate/FileUpload?nEmpID='+ _oCandidate.CandidateID+'&nts='+nts);
        xhr.setRequestHeader('CandidateDocID',0);
        xhr.setRequestHeader('Description',$('#txtAttachmentDescription').val());
        xhr.setRequestHeader('DocType',0);
        xhr.setRequestHeader('DocTypeID',_oCandidate.CandidateID);
        xhr.setRequestHeader('IssueDate',icsdateformat(new Date()));
        xhr.setRequestHeader('ExpireDate', icsdateformat(new Date()));
        xhr.send(oFormdata);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {  //the response is ready
                debugger;
                var oAttachment= MakeAttachmentObject(xhr.responseText);

                if(oAttachment.CandidateDocID>0)
                {
                    alert(oAttachment.Message);
                    $('#winAttachment').window('close');
                    var nIndex =  $('#tblAttachment').datagrid('getRows').length;
                    $('#tblAttachment').datagrid('appendRow', oAttachment);
                    $('#tblAttachment').datagrid('selectRow', nIndex);
                    $('#txtAttachmentDescription').val('');
                    $("#fileInput")[0].value=null;
                }
                else
                {
                    $("#fileInput")[0].value=null;
                    alert(oAttachment.Message);
                }
            }
        }
    }

    function SaveAttachment(nCandidateDocID,sDescription,nDocType,nDocTypeID,dIssueDate,dExpireDate,oFormdata)
    {
        var nts=((new Date()).getTime())/1000;
        var xhr = new XMLHttpRequest();
        xhr.open('POST',_sBaseAddress+'/Candidate/FileUpload?nEmpID='+ _oCandidate.CandidateID+'&nts='+nts);
        xhr.setRequestHeader('CandidateDocID',nCandidateDocID);
        xhr.setRequestHeader('Description',sDescription);
        xhr.setRequestHeader('DocType',nDocType);
        xhr.setRequestHeader('DocTypeID', (nDocTypeID<=0)?_oCandidate.CandidateID:nDocTypeID);
        xhr.setRequestHeader('IssueDate',dIssueDate);
        xhr.setRequestHeader('ExpireDate',dExpireDate);
        xhr.send(oFormdata);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {  //the response is ready
                debugger;
                var oAttachment= MakeAttachmentObject(xhr.responseText);
                $("#fileAttachmentCretification")[0].value=null;
                if(oAttachment.CandidateDocID>0)
                {
                    alert(oAttachment.Message);

                }
                else
                {
                    alert(oAttachment.Message);
                }
            }
        }
    }

    //function MakeFormdData(InputFile)
    //{
    //    var  oFormdata = new FormData();
    //    if(InputFile.files[0]!=null)
    //    {
    //        oFormdata.append(InputFile.files[0].name, InputFile.files[0]);
    //    }
    //    return oFormdata;
    //}

    function MakeAttachmentObject(sResponseValue)
    {
        sResponseValue=sResponseValue.split('\\"')[1]
        var nCandidateDocID=sResponseValue.split('~')[0];
        var oAttachment=
            {
                CandidateDocID: nCandidateDocID,
                Message: sResponseValue.split('~')[1],
                Description: sResponseValue.split('~')[2]
            };
        return oAttachment;
    }

    //function GetCandidateDoc(nDocType,nDocTypeID)
    //{
    //    var nts=(new Date()).getTime()/1000;
    //    $.ajax({
    //        type: "POST",
    //        dataType: "json",
    //        url : _sBaseAddress+  "/Candidate/GetCandidateDocumentByTypeCast",
    //        traditional: true,
    //        data:  JSON.stringify({ nEmpID: _oCandidate.CandidateID, nDocType:nDocType, nDocTypeID:nDocTypeID, nts: nts}),
    //        contentType: "application/json; charset=utf-8",
    //        success: function (data) {
    //            debugger;
    //            var oCandidateDocs = jQuery.parseJSON(data);
    //            if (oCandidateDocs.length>0)
    //            {
    //                _oCandidateDoc=oCandidateDocs[0];
    //                $('#lblAttachmentCretification').text(oCandidateDocs.length+" Attachment Available");
    //            }
    //            else
    //            {
    //                $('#lblAttachmentCretification').text('');
    //            }
    //        },
    //        error: function (xhr, status, error) {
    //            alert(error);
    //        }

    //    });
    //}



    $('#btnAttachmentReload').click(function(e)
    {
        var nts=(new Date()).getTime()/1000;
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Candidate/GetCandidateDocument",
            traditional: true,
            data:  JSON.stringify({ nEmpID: _oCandidate.CandidateID, nts: nts}),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                var oCandidateDocs = jQuery.parseJSON(data);
                if (oCandidateDocs.length>0)
                {
                    LoadIntoGridCandidateDocs(oCandidateDocs);
                }
                else
                {
                    LoadIntoGridCandidateDocs([]);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    });


    /*..........................  Application Procedure Attachment ..................................*/


    //$('#btnApplicationAdd').click(function (e) {
    //    $('#tblApplication').datagrid('clearSelections');
    //    ResetApplicationInformation();
    //    $('#winApplication').window('open');
    //});

    //$('#btnApplicationEdit').click(function (e) {
    //    var oApplication = $('#tblApplication').datagrid('getSelected');
    //    if (oApplication != null) { SetApplicationInformation(oApplication); }
    //    else { alert("Please select an item from list."); return; }
    //    $('#winApplication').window('open');
    //});

    //$('#btnApplicationDelete').click(function (e) {
    //    var oApplication = $('#tblApplication').datagrid('getSelected');
    //    if (oApplication != null && oApplication.ApplicationID>0)
    //    {
    //        if (confirm("Are you sure to delete?"))
    //        {
    //            var nSelectedRowIndex = $('#tblApplication').datagrid('getRowIndex', oApplication);
    //            var nts=(new Date()).getTime()/1000;
    //            $.ajax
    //            ({
    //                type: "POST",
    //                dataType: "json",
    //                url : _sBaseAddress+  "/Application/Delete",
    //                traditional: true,
    //                data:  JSON.stringify({nID : oApplication.ApplicationID, nts:nts}),
    //                contentType: "application/json; charset=utf-8",
    //                success: function (data) {
    //                    var sMsg = jQuery.parseJSON(data);
    //                    if (sMsg == "Delete Successfully.")
    //                    {
    //                        alert(sMsg);
    //                        $('#tblApplication').datagrid('deleteRow', nSelectedRowIndex);

    //                    }
    //                    else
    //                    {
    //                        alert(sMsg);
    //                    }
    //                },
    //                error: function (xhr, status, error)
    //                {
    //                    alert(error);
    //                }

    //            });
    //        }
    //    }
    //    else { alert("Please select a valid item from list.");}
    //});

    //$('#btnApplicationSave').click(function (e) {
    //    var nSelectedRowIndex = -1;
    //    var oRows = $('#tblApplication').datagrid('getRows');
    //    if (oRows.length > 0) {
    //        var oRow = $('#tblApplication').datagrid('getSelected');
    //        nSelectedRowIndex = $('#tblApplication').datagrid('getRowIndex', oRow);
    //    }

    //    var oApplication = RefreshObjectApplicationInformation();
    //    SaveAppliationInformation(oApplication,nSelectedRowIndex);
    //});

    //$('#btnApplicationClose').click(function (e) {
    //    $('#winApplication').window('close');
    //});

    //function ValidationApplicationInformation() {
    //    if ($('#cboApplicationDepartment').val() <=0) { alert("Please select department."); $('#cboApplicationDepartment').focus(); return false; }
    //    else if ($('#cboApplicationRank').val() <=0) { alert("Please select rank."); $('#cboApplicationRank').focus(); return false; }
    //    else if($.trim($('#txtApplicationDescription').val())==""){ alert("Please give a description."); $('#txtApplicationDescription').focus(); return false; }
    //    else { return true; }
    //}

    //function SaveAppliationInformation(oApplication,nSelectedRowIndex)
    //{
    //    var bISNew=oApplication.ApplicationID>0?false:true;
    //    $.ajax({
    //        type: "POST",
    //        dataType: "json",
    //        url : _sBaseAddress+  "/Application/SaveApplication",
    //        traditional: true,
    //        data:  JSON.stringify(oApplication),
    //        contentType: "application/json; charset=utf-8",
    //        success: function (data) {
    //            //debugger;
    //            oApplication = jQuery.parseJSON(data);
    //            if (oApplication.ApplicationID>0) {
    //                alert("Data Saved sucessfully");
    //                if (!bISNew) { $('#tblApplication').datagrid('updateRow', { index: nSelectedRowIndex, row: oApplication });}
    //                else
    //                {
    //                    var nIndex =  $('#tblApplication').datagrid('getRows').length;
    //                    $('#tblApplication').datagrid('appendRow', oApplication);
    //                    $('#tblApplication').datagrid('selectRow', nIndex);
    //                }
    //                ResetApplicationInformation();
    //                $('#winApplication').window('close');
    //            }
    //            else
    //            {
    //                alert(oApplication.ErrorMessage);
    //            }
    //        },
    //        error: function (xhr, status, error) {
    //            alert(error);
    //        }
    //    });

    //}

    //function RefreshObjectApplicationInformation() {

    //    if (!ValidationApplicationInformation()) { return; }
    //    var oApplication =
    //        {
    //            ApplicationID: (_oApplication != null) ? _oApplication.ApplicationID : 0,
    //            CandidateID: (_oApplication != null) ? _oApplication.CandidateID : _oCandidate.CandidateID,
    //            DepartmentID: $('#cboApplicationDepartment').val(),
    //            DesignationID : $('#cboApplicationRank').val(),
    //            Description: $('#txtApplicationDescription').val(),
    //            IsActive: (_oApplication != null) ? _oApplication.IsActive : true,
    //            IsSelected: (_oApplication != null) ? _oApplication.IsSelected : false,
    //            ExpireDateInString :(_oApplication != null) ? _oApplication.ExpireDateInString : icsdateformat(new Date())
    //        };
    //    return oApplication;
    //}

    //function SetApplicationInformation(oApplication) {
    //    _oApplication = oApplication;
    //    $('#txtApplicationNo').val(oApplication.ApplicationID);
    //    $('#cboApplicationDepartment').val(oApplication.DepartmentID);
    //    $('#txtApplicationRank').val(oApplication.DesignationName);
    //    $('#txtApplicationDescription').val(oApplication.Description);
    //    GetDesignations(oApplication.DepartmentID,'Application',_oApplication.DesignationID);
    //}

    //function ResetApplicationInformation() {
    //    _oApplication = null;
    //    $('#cboApplicationDepartment').val(0);
    //    LoadApplicationDesignation([],0);
    //    $('#txtApplicationNo').val('');
    //    $('#txtApplicationRank').val('');
    //    $('#txtApplicationDescription').val('');
    //}


    //$('#btnApplicationPickRank').click(function(e)
    //{
    //    if($('#cboApplicationDepartment').val()<=0){ alert("Please select a department."); $('#cboApplicationDepartment').focus(); return;}
    //    var oParameter = new Object();
    //    oParameter.MultipleItemReturn = false;
    //    oParameter.DeptID= $('#cboApplicationDepartment').val();
    //    var url = _sBaseAddress + "/Designation/DesignationPickerWithCheckBox?id=0";
    //    var nLeft=(window.screen.width/2)-(550/2);
    //    var nHeight=(window.screen.height/2)-(470/2);
    //    var oReturnObject = window.showModalDialog(url, oParameter, 'dialogHeight:470px;dialogWidth:550px;dialogLeft:'+nLeft+';dialogTop:'+nHeight+';center:yes;resizable:no;status:no;scroll:yes');
    //    if(oReturnObject!=null)
    //    {
    //        $("#txtApplicationRank").val(oReturnObject.text);
    //        _nAppcationDesignationID = oReturnObject.id;
    //    }
    //    else
    //    {
    //        $("#txtApplicationRank").val('');
    //        _nAppcationDesignationID = 0;
    //    }

    //} );

    $('#btnApplicationLoadRank').click(function(e)
    {
        var nDesignationID=0;
        if($('#cboApplicationDepartment').val()<=0){ alert("Please select a department."); $('#cboApplicationDepartment').focus(); return;}
        GetDesignations($('#cboApplicationDepartment').val(),'Application',nDesignationID);
    } );



    /*..........................  Application Info Add ..................................*/

    $('#btnApplicationInfo').click(function (e) {


        var oApplication=$('#tblApplication').datagrid('getSelected');
        if(oApplication!=null && oApplication.ApplicationID>0)
        {
            GetApplicationTrainingInfo(oApplication.ApplicationID);
            GetApplicationExperinceInfo(oApplication.ApplicationID);
            $('#winApplicationInfo').window('open');
        }
        else
        {
            alert("Please select an application");
        }

    });

    $('#btnApplicationInfoClose').click(function (e) {
        $('#winApplicationInfo').window('close');
    });

    function GetApplicationTrainingInfo(nID)
    {
        var nts=(new Date()).getTime()/1000;
        $.ajax
        ({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Application/GetApplicationTrainings",
            traditional: true,
            data:  JSON.stringify({nID : nID, nts:nts}),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var oCandidateTrainings = jQuery.parseJSON(data);
                if (oCandidateTrainings.length>0 && oCandidateTrainings[0].CandidateTrainingID>0)
                {
                    LoadIntoGridApplicationInfoTraining(oCandidateTrainings)
                }
                else
                {
                    LoadIntoGridApplicationInfoTraining([]);
                }
            },
            error: function (xhr, status, error)
            {
                alert(error);
            }

        });
    }

    function GetApplicationExperinceInfo(nID)
    {
        var nts=(new Date()).getTime()/1000;
        $.ajax
        ({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Application/GetApplicationExperiences",
            traditional: true,
            data:  JSON.stringify({nID : nID, nts:nts}),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var oCandidateExperiences = jQuery.parseJSON(data);
                if (oCandidateExperiences.length>0 && oCandidateExperiences[0].CandidateExperienceID>0)
                {
                    LoadIntoGridApplicationInfoExperience(oCandidateExperiences)
                }
                else
                {
                    LoadIntoGridApplicationInfoExperience([]);
                }
            },
            error: function (xhr, status, error)
            {
                alert(error);
            }

        });
    }


    $('#btnApplicationInfoTrainingAssign').click(function(e)
    {

        var oApplicationInfoTrainings=$('#tblApplicationInfoTraining').datagrid('getChecked');
        if( oApplicationInfoTrainings==null || oApplicationInfoTrainings.length<=0){alert("Please check at least one item."); return;}
        else
        {
            var sCandidateTrainingID="";
            var oApplication=$('#tblApplication').datagrid('getSelected');
            for(var i=0;i<oApplicationInfoTrainings.length;i++)
            {
                sCandidateTrainingID +=oApplicationInfoTrainings[i].CandidateTrainingID+',';
            }
            sCandidateTrainingID=sCandidateTrainingID.substring(0,sCandidateTrainingID.length-1);
            var sValue=oApplication.ApplicationID+'~'+sCandidateTrainingID;
            var nts=(new Date()).getTime()/1000;
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Application/SaveApplicationTraining",
                traditional: true,
                data:  JSON.stringify({sValue : sValue, nts:nts}),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    var oCandidateTrainings = jQuery.parseJSON(data);
                    if (oCandidateTrainings.length>0 && oCandidateTrainings[0].CandidateTrainingID>0)
                    {
                        alert("Save Successfully.");
                        LoadIntoGridApplicationInfoTraining(oCandidateTrainings);
                    }
                    else
                    {
                        alert(oCandidateExperiences[0].ErrorMessage);
                        //LoadIntoGridApplicationInfoTraining([]);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    });

    $('#btnApplicationInfoExperienceAssign').click(function(e)
    {

        var oApplicationInfoExperiences=$('#tblApplicationInfoExperience').datagrid('getChecked');
        if( oApplicationInfoExperiences==null || oApplicationInfoExperiences.length<=0){alert("Please check at least one item."); return;}
        else
        {
            var sCandidateExperienceID="";
            var oApplication=$('#tblApplication').datagrid('getSelected');
            for(var i=0;i<oApplicationInfoExperiences.length;i++)
            {
                sCandidateExperienceID +=oApplicationInfoExperiences[i].CandidateExperienceID+',';
            }
            sCandidateExperienceID=sCandidateExperienceID.substring(0,sCandidateExperienceID.length-1);
            var sValue=oApplication.ApplicationID+'~'+sCandidateExperienceID;
            var nts=(new Date()).getTime()/1000;
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Application/SaveApplicationExperience",
                traditional: true,
                data:  JSON.stringify({sValue : sValue, nts:nts}),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    var oCandidateExperiences = jQuery.parseJSON(data);
                    if (oCandidateExperiences.length>0 && oCandidateExperiences[0].CandidateExperienceID>0)
                    {
                        alert("Save Successfully.");
                        LoadIntoGridApplicationInfoExperience(oCandidateExperiences);
                    }
                    else
                    {
                        alert(oCandidateExperiences[0].ErrorMessage);
                        //LoadIntoGridApplicationInfoExperience([]);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    });

    $('#btnApplicationInfoTrainingRemove').click(function(e)
    {
        var oApplicationInfoTrainings=$('#tblApplicationInfoTraining').datagrid('getChecked');
        if( oApplicationInfoTrainings==null || oApplicationInfoTrainings.length<=0){alert("No information exists by this application."); return;}
        else
        {
            if(confirm("Are you sure to delete?"))
            {
                var oApplication=$('#tblApplication').datagrid('getSelected');
                var nts=(new Date()).getTime()/1000;
                $.ajax
                ({
                    type: "POST",
                    dataType: "json",
                    url : _sBaseAddress+  "/Application/RemoveApplicationTraining",
                    traditional: true,
                    data:  JSON.stringify({nID : oApplication.ApplicationID, nts:nts}),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        var sMessage = jQuery.parseJSON(data);
                        if (sMessage=="")
                        {
                            alert("Delete Successfully.");
                            LoadIntoGridApplicationInfoTraining([]);
                        }
                        else
                        {
                            alert(sMessage);
                        }
                    },
                    error: function (xhr, status, error)
                    {
                        alert(error);
                    }

                });
            }

        }
    });

    $('#btnApplicationInfoExperienceRemove').click(function(e)
    {
        var oApplicationInfoExperiences=$('#tblApplicationInfoExperience').datagrid('getChecked');
        if( oApplicationInfoExperiences==null || oApplicationInfoExperiences.length<=0){alert("No information exists by this application."); return;}
        else
        {
            if(confirm("Are you sure to delete?"))
            {
                var oApplication=$('#tblApplication').datagrid('getSelected');
                var nts=(new Date()).getTime()/1000;
                $.ajax
                ({
                    type: "POST",
                    dataType: "json",
                    url : _sBaseAddress+  "/Application/RemoveApplicationExperience",
                    traditional: true,
                    data:  JSON.stringify({nID : oApplication.ApplicationID, nts:nts}),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        var sMessage = jQuery.parseJSON(data);
                        if (sMessage=="")
                        {
                            alert("Delete Successfully.");
                            LoadIntoGridApplicationInfoExperience([]);
                        }
                        else
                        {
                            alert(sMessage);
                        }
                    },
                    error: function (xhr, status, error)
                    {
                        alert(error);
                    }

                });
            }

        }
    });


</script>
