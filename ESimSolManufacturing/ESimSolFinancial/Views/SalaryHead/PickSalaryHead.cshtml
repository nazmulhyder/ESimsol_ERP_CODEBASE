<html>
    <head>  
        <link href="@Url.Content("~/Content/CSS/icon.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/CSS/easyui.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/CSS/Pikerstyle.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.ics.customize.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.easyui.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>
    
    </head>
    <body>
    @using System.Collections.Concurrent
    @using System.Web.UI.WebControls
    @using ICS.Base.Client.BOFoundation
    @model ESimSol.BusinessObjects.SalaryHead
        <div style="font-family:Tahoma">           
            <table border="0" cellspacing="2" cellpadding="2">
                <tr>
                    <td style="background-color:#cfb53b; text-align:center; width:520px; color:White">
                        <label id="lblHeaderName" style="font-size:15px; font-weight:bold; text-decoration:Underline"> Assign SalaryHeads</label>
                    </td>
                </tr>
            </table>
            <div style="font-family:Tahoma">
               <table id="tblSalaryHead" title="SalaryHead List"  class="easyui-datagrid" style="width:450px;height:250px" fitColumns="false" rownumbers="true" pagination="false" singleSelect="false" autoRowHeight="false">
                    <thead>  
                        <tr>  
                            <th data-options="field:'Selected',checkbox:true"></th>
                            <th field="Name" width="190px">Name</th>
                            <th field="SalaryHeadTypeInString" width="190px">Salary Head Type</th>
                        </tr>  
                    </thead> 
                </table>​  
            </div>
            <fieldset>
                <legend style="font-weight:bold"> Action : </legend>
                <table border="0" cellspacing="2" cellpadding="2" style="font-size:11px; font-weight:bold">
                    <tr>
                        <td style="width:400px; text-align:right"></td>

                        <td style="width:50px; text-align:center">
                                <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-ok" plain="true" onclick="ConfirmButtonClick()">Ok</a>
                        </td>
                        <td style="width:50px">
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" plain="true" onclick="Close()">Close</a>
                        </td>
                    </tr>       
                </table>
            </fieldset>
        </div>
    </body>
</html>

<script type="text/javascript">
    //debugger;
    var _oSalaryHeads=[];
    var _oSalaryHead;
    var _bMultipleItemReturn = true;
    var _sBaseAddress="";
    $(document).ready(function () {
        ////debugger;
        _oSalaryHeads =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.oSalaryHeads)); 
        _sBaseAddress =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        RefreshList(_oSalaryHeads);
    });
    
    function ConfirmButtonClick() {
        //debugger;
        var oSelectedSalaryHeads = $('#tblSalaryHead').datagrid('getChecked');
        
        if (oSelectedSalaryHeads.length <= 0) {
            alert("please select atleast one item");
            return;
        }
        
        window.returnValue = oSelectedSalaryHeads;
        close();
        //debugger;
//        $.ajax({
//            type: "POST",
//            dataType: "json",
//            url: _sBaseAddress + "/Student/Confirm",
//            traditional: true,
//            data: JSON.stringify(_oSalaryHead),
//            contentType: "application/json; charset=utf-8",

//            success: function(data) {
//                //debugger;
//                var oTeacherAssigns = jQuery.parseJSON(data);
//                if (oTeacherAssigns.length > 0) {
//                    alert("Data Saved sucessfully");
//                    window.returnValue = _oSalaryHead;
//                    window.close();
//                } else {
//                    alert(_oSalaryHead.ErrorMessage);
//                }
//            },
//            error: function(xhr, status, error) {
//                alert(error);
//            }
//        });
    }

//    function SelectedTeachers() {
//        //debugger;
//        var rows = $('#tblSalaryHead').datagrid('getRows');
//        for (var i = 0; i < rows.length; i++) {
//            if (IsSelectedCategory(rows[i].TeacherID)) {
//                $('#tblSalaryHead').datagrid('checkRow', i);
//            }
//        }
//    }

//    function IsSelectedCategory(TeacherID) {
//        //debugger;
//        var selectedTeacher = _oSalaryHead.TeacherAssigns;
//        for (var i = 0; i < selectedTeacher.length; i++) {
//            if (selectedTeacher[i].TeacherID == TeacherID) {
//                return true;
//            }
//        }
//        return false;
//    }

    function RefreshList(oSalaryHeads) {
        //debugger;
        data = oSalaryHeads;
        data = { "total": "" + data.length + "", "rows": data };
        $('#tblSalaryHead').datagrid('loadData', data);
    }

    function OkButtonClick() {
        //debugger;

        var oSelectedSalaryHeads = $('#tblSalaryHead').datagrid('getChecked');
        if (oSelectedSalaryHeads.length <= 0) {
            alert("please select atleast one item");
            return;
        }

        _oAttendanceCalendarSessionSalaryHead.SalaryHeads = oSelectedSalaryHeads;
  
        window.returnValue = _oAttendanceCalendarSessionSalaryHead;
        window.close();
    }

//    function ConfirmButtonClick() {
//        //debugger;

//        var oSelectedSalaryHeads = $('#tblSalaryHead').datagrid('getChecked');
//        if (oSelectedSalaryHeads.length <= 0) {
//            alert("please select atleast one item");
//            return;
//        }

//        _oSalaryHead.SalaryHeads = oSelectedSalaryHeads;

//        $.ajax({
//            type: "POST",
//            dataType: "json",
//            url: _sBaseAddress + "/Student/Confirm",
//            traditional: true,
//            data: JSON.stringify(_oSalaryHead),
//            contentType: "application/json; charset=utf-8",

//            success: function(data) {
//                //debugger;
//                var oTeacherAssigns = jQuery.parseJSON(data);
//                if (oTeacherAssigns.length > 0) {
//                    alert("Data Saved sucessfully");
//                    window.returnValue = _oSalaryHead;
//                    window.close();
//                } else {
//                    alert(_oSalaryHead.ErrorMessage);
//                }
//            },
//            error: function(xhr, status, error) {
//                alert(error);
//            }
//        });
//    }

    function Close() {
        window.close();
    }
</script>