@{
     ViewBag.Title = "Employees Info";
}
@model ESimSol.BusinessObjects.Employee
<body>
<div ng-app="EmployeeInfoApp">
    <div ng-controller="EmployeeInfoController" style="width:100%;height:96%">
        <div id="EmployeeInfoDiv" class="easyui-layout" style="width:100%;height:500px;">
            <div data-options="region:'north',title:'Searching Criteria',split:true" style="height:100px;">

                <div class="col-md-4 text-left">
                    <div class="input-group">
                        <input type="text" class="form-control" ng-keyup="searchEmployeeByKeyUp($event)" ng-model="EP.Name" />
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-sm" aria-label="Left Align" ng-click="searchEmployee()"> <span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                        </span>
                    </div>
                    <button type="button" class="btn btn-sm btn-success" aria-label="Left Align" ng-click="ViewProfile()" ng-hide="hide"> <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> View Profile</button>
                </div>


            </div>
            <div data-options="region:'center',title:'Employee Info'" style="padding:5px; overflow:auto;">
                <div class="position-left">
                    <div class="position-left">
                        <fieldset>
                            <div class="row col-md-12 text-center">{{BUName}}</div>
                            <div class="row col-md-12 text-center">{{LocationName}}</div>
                            <div class="row col-md-12 text-center">{{BUAddress}}</div>
                            <div class="row col-md-12 text-center">{{CurrentDate}}</div>
                        </fieldset>
                    </div>
                    <div class="position-left margin" style="width:42%;">
                        <div class="position-left">
                            <fieldset>
                                <div class="position-left">
                                    <div class="position-left txt-div"> Employee Code : </div>
                                    <div class="position-left content_div"> {{EmployeeCode}}</div>
                                </div>
                                <div class="position-left">
                                    <div class="position-left txt-div"> Authentication No : </div>
                                    <div class="position-left content_div"> {{CardNo}}</div>
                                </div>
                                <div class="position-left">
                                    <div class="position-left txt-div"> Bank Info : </div>
                                    <div class="position-left content_div"> {{BankInfo}}</div>
                                </div>
                                <div class="position-left">
                                    <div class="position-left txt-div"> TIN No : </div>
                                    <div class="position-left content_div"> {{TINNo}}</div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="position-left margin">
                            <div ui-grid="gridOptionForLeave" ui-grid-selection class="grid" style="width:100%;height:250px;"></div>
                        </div>
                    </div>
                    <div class="position-left margin" style="width:40%;margin-left:10px;">
                        <div class="position-left">
                            <fieldset>
                                <div class="position-left">
                                    <div class="position-left txt-div"> AttendanceScheme : </div>
                                    <div class="position-left content_div"> {{AttendanceScheme}}</div>
                                </div>
                                <div class="position-left">
                                    <div class="position-left txt-div"> CurrentShift : </div>
                                    <div class="position-left content_div"> {{CurentShift}}</div>
                                </div>
                                <div class="position-left">
                                    <div class="position-left txt-div"> Block : </div>
                                    <div class="position-left content_div"> {{Block}}</div>
                                </div>
                                <div class="position-left">
                                    <div class="position-left txt-div"> Reporting Person : </div>
                                    <div class="position-left content_div"> {{ReportingPerson}}</div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="position-left margin">
                            <fieldset>
                                <div class="row col-md-12">
                                    <div class="col-md-6 text-left"><label class="control-label">Salary Scheme :{{SalaryScheme}}</label></div>
                                    <div class="col-md-6 text-left"><label class="control-label">Gross : {{Gross}}</label></div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="position-left margin">
                            <div ui-grid="gridOptionsSalary" ui-grid-selection class="grid" style="width:100%;height:150px"></div>
                        </div>
                        <div class="position-left margin">
                            <fieldset>
                                <div class="row col-md-12">
                                    <div class="col-md-6 text-left"><label class="control-label">Bank Amount :{{BankAmount}}</label></div>
                                    <div class="col-md-6 text-left"><label class="control-label">Cash Amount : {{CashAmount}}</label></div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div class="position-left margin" style="width:15%;">
                        <div class="position-left">
                            <fieldset>
                                <div class="row col-md-12">
                                    <div class="col-md-10 text-center">
                                        <img src="" style="height:50px;width:100%;" />
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="position-left margin">
                            <fieldset>
                                <div class="row col-md-12">
                                    <div class="col-md-10 text-center">
                                        <img src="" style="height:50px;width:100%;" />
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>

                <div class="position-left margin">
                    <div class="panel-header position-panelHeader"><label>Personal Details</label> </div>
                    <fieldset>
                        <div class="row col-md-12">
                            <div class="col-md-2 text-right"><label class="control-label">Father's Name:</label></div>
                            <div class="col-md-4 text-left">{{FatherName}}</div>
                            <div class="col-md-2 text-right"><label class="control-label">Gender :</label></div>
                            <div class="col-md-4 text-left">{{Gender}}</div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-2 text-right"><label class="control-label">Mother's Name :</label></div>
                            <div class="col-md-4 text-left">{{MotherName}}</div>
                            <div class="col-md-2 text-right"><label class="control-label">Marital Status :</label></div>
                            <div class="col-md-4 text-left">{{MaritalStatus}}</div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-2 text-right"><label class="control-label">Present Address :</label></div>
                            <div class="col-md-4 text-left">{{PresentAddress}}</div>
                            <div class="col-md-2 text-right"><label class="control-label">Nationalism :</label></div>
                            <div class="col-md-4 text-left">{{Nationalism}}</div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-2 text-right"><label class="control-label">Permanent Address:</label></div>
                            <div class="col-md-4 text-left">{{PermanentAddress}}</div>
                            <div class="col-md-2 text-right"><label class="control-label">Blood Group:</label></div>
                            <div class="col-md-4 text-left">{{BloodGroup}}</div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-2 text-right"><label class="control-label">DOB:</label></div>
                            <div class="col-md-4 text-left">{{DOB}}</div>
                            <div class="col-md-2 text-right"><label class="control-label">Cell:</label></div>
                            <div class="col-md-4 text-left">{{ContactNo}}</div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-2 text-right"><label class="control-label">Religion:</label></div>
                            <div class="col-md-4 text-left">{{Religion}}</div>
                            <div class="col-md-2 text-right"><label class="control-label">Email:</label></div>
                            <div class="col-md-4 text-left">{{Email}}</div>
                        </div>
                    </fieldset>
                </div>       
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Nominee</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForNominee" ui-grid-selection class="grid" style="width:100%;height:200px;"></div>
                    </div>
                </div>
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Experience</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForExperience" ui-grid-selection class="grid" style="width:100%;height:200px;"></div>
                    </div>
                </div> 
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Education</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForEducation" ui-grid-selection class="grid" style="width:100%;height:200px;"></div>
                    </div>
                </div> 
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Training</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForTraining" ui-grid-selection class="grid" style="width:100%;height:200px;"></div>
                    </div>
                </div>

                <div class="panel-header" style="width:100%; float:left;height:30px; text-align:center;"><label>Attendance History</label> </div>
                <div style="width:100%;">
                    <div class="ui-grid-top-panel" style="width:100%;float:left;margin-top:5px;">
                        <div class="position-left" style="width:13%">Date From:</div>
                        <div class="position-left" style="width:20%;margin-left:-50px;padding-right:10px;">
                            <div class="input-group date date-container">
                                <input type="text" class="form-control" ng-model="AHStartDateInString" style="width:100%; height:24px">
                                <span style="height:22px" class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                            </div>
                        </div>
                        <div class="position-left" style="width:8%">To</div>
                        <div class="position-left" style="width:20%;margin-left:-50px;padding-right:10px;">
                            <div class="input-group date date-container">
                                <input type="text" class="form-control" ng-model="AHEndDateInString" style="width:100%; height:24px">
                                <span style="height:22px" class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-primary" aria-label="Left Align" ng-click="AHSearch()"> <span class="glyphicon glyphicon-search">Search</span></button>
                    </div>
                    <div style="float:left;width:100%;height:200px;" ui-grid="gridOptionForAttendanceHistory" ui-grid-selection class="grid"></div>
                </div>
                <div class="panel-header" style="width:100%; float:left;height:30px; text-align:center;"><label>Leave History</label> </div>
                <div class="position-left" style="width:100%;">
                    <div style="width:100%;height:200px;" ui-grid="gridOptionForLeaveHistory" ui-grid-selection class="grid"></div>
                </div>
                <div class="panel-header" style="width:100%; float:left;height:30px; text-align:center;"><label>Leave Application History</label> </div>
                <div style="width:100%;">
                    <div class="ui-grid-top-panel" style="width:100%;float:left;margin-top:5px;">
                        <div class="position-left" style="width:13%">Date From:</div>
                        <div class="position-left" style="width:20%;margin-left:-50px;padding-right:10px;">
                            <div class="input-group date date-container">
                                <input type="text" class="form-control" ng-model="LAHStartDateInString" style="width:100%; height:24px">
                                <span style="height:22px" class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                            </div>
                        </div>
                        <div class="position-left" style="width:8%">To</div>
                        <div class="position-left" style="width:20%;margin-left:-50px;padding-right:10px;">
                            <div class="input-group date date-container">
                                <input type="text" class="form-control" ng-model="LAHEndDateInString" style="width:100%; height:24px">
                                <span style="height:22px" class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-primary" aria-label="Left Align" ng-click="LAHSearch()"> <span class="glyphicon glyphicon-search">Search</span></button>
                    </div>
                    <div style="float:left;width:100%;height:200px;" ui-grid="gridOptionForLAH" ui-grid-selection class="grid"></div>
                </div>

                
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Increment History</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForIncrementHis" ui-grid-selection class="grid" style="width:100%;height:150px;"></div>
                    </div>
                </div>
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Transfer History</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForTransferHis" ui-grid-selection class="grid" style="width:100%;height:150px;"></div>
                    </div>
                </div>
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Promotion History</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForPromotionHis" ui-grid-selection class="grid" style="width:100%;height:150px;"></div>
                    </div>
                </div>
                <div class="position-left">
                    <div class="panel-header position-panelHeader"><label>Disciplinary Action/Activity</label> </div>
                    <div class="position-left">
                        <div ui-grid="gridOptionForActivity" ui-grid-selection class="grid" style="width:100%;height:150px;"></div>
                    </div>
                </div>
                
            </div>
        </div>
        <fieldset>
            <legend>Action</legend>
            <div class="row col-md-12 text-right">
                <button type="button" class="btn btn-success" aria-label="Left Align" ng-click="print()"> <span class="glyphicon glyphicon-print" aria-hidden="true"> Print</span> </button>
            </div>
        </fieldset>
    </div>
</div>
</body>

<style type="text/css">
    .form-control {
        height: 26px;
        padding: 0px 6px;
        font-size: 12px;
    }

    .grid {
        height: 500px;
        width: 95%;
    }

    .custom-pagination {
        margin-top: -15px;
        margin-bottom: -15px;
    }

    .spacing {
        padding-bottom: 5px;
    }

    .position-left {
        float: left;
        /*width: 14.25%;*/
        width: 100%;
    }
    .position-panelHeader{
        float:left;
        width:100%;
        height:30px;
        text-align:left;   
    }
    .txt-div {
        width: 30%;
        text-align:right;
    }
    .content_div {
        width: 70%;
        padding-left: 2px;
    }
    .margin{
        margin-top: 5px;
    }
</style>

<script type="text/javascript">
    debugger;
    var _sBaseAddress =@Html.Raw( new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
    var oEmployeeInfo =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));

    var EmpInfoApp = angular.module('EmployeeInfoApp', ['ngAnimate', 'ui.bootstrap', 'ui.grid','ui.grid.selection', 'ui.grid.cellNav','ms.service','ui.grid.edit']);
    EmpInfoApp.controller('EmployeeInfoController', function ($scope, $http, $uibModal, $log, uiGridConstants, msModal, userSession,advanceSearch) {
        debugger;
        $('.date-container').datepicker({
            format: "dd M yyyy",
            calendarWeeks: true,
            autoclose: true,
            todayHighlight: true
        });

        $scope.BUName = "Business Units Name";
        $scope.LocationName = "Location Name";
        $scope.BUAddress = "Business Units Address";
        $scope.CurrentDate = "Current Date";

        $scope.gridOptionForLeave ={
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'LeaveShortName', name: 'LeaveName', width: '25%' },
                { field: 'TotalLeave', name: 'TotalLeave', width: '25%' },
                { field: 'EnjoyedInfo', name: 'Enjoyed', width: '25%' },
                { field: 'BalanceInfo', name: 'Balance', width: '25%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionsSalary ={
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'SalaryHeadName', name: 'Head', width: '25%' },
                { field: 'Amount', name: 'Amount', width: '25%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForNominee = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'Name', name: ' Name', width: '20%' },
                { field: 'Address', name: 'Address', width: '20%' },
                { field: 'ContactNo', name: 'ContactNo', width: '20%' },
                { field: 'Relation', name: 'Relation', width: '20%' },
                { field: 'Percentage', name: 'Percentage', width: '20%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForExperience = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'Name', name: ' Organization', width: '25%' },
                { field: 'Address', name: 'Address', width: '25%' },
                { field: 'Designation', name: 'Designation', width: '10%' },
                { field: 'StartDate', name: 'StartDate', width: '10%' },
                { field: 'EndDate', name: 'EndDate', width: '10%' },
                { field: 'MajorResponsibility', name: 'MajorResponsibility', width: '10%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForEducation = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'Degree', name: 'Degree', width: '20%' },
                { field: 'Institution', name: 'Institution', width: '25%' },
                { field: 'PassingYear', name: 'PassingYear', width: '10%' },
                { field: 'Result', name: 'Result', width: '10%' },
                { field: 'BoardUniversity', name: 'BoardUniversity', width: '10%' },
                { field: 'Country', name: 'Country', width: '10%' }, 
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForTraining = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'CourseName', name: 'CourseName', width: '15%' },
                { field: 'StartDate', name: 'StartDate', width: '10%' },
                { field: 'EndDate', name: 'EndDate', width: '10%' },
                { field: 'PassingDate', name: 'PassingDate', width: '10%' },
                { field: 'Result', name: 'Result', width: '10%' },
                { field: 'Institution', name: 'Institution', width: '20%' },
                { field: 'CertifyBodyVendor', name: 'CertifyBodyVendor', width: '10%' },
                { field: 'Country', name: 'Country', width: '10%' }, 
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForAttendanceHistory = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'TotalWorkingDaySt', name: 'WorkingDay', width: '7%' },
                { field: 'PresentDaySt', name: 'Present', width: '7%' },
                { field: 'AbsentDaySt', name: 'Absent', width: '7%' },
                { field: 'FullLeave', name: 'FullLeave', width: '7%' },
                { field: 'HalfLeave', name: 'HalfLeave', width: '7%' },
                { field: 'ShortLeave', name: 'ShortLeave', width: '7%' },
                { field: 'OSD', name: 'OSD', width: '7%' },
                { field: 'Late', name: 'Late', width: '7%' },
                { field: 'Early', name: 'Early', width: '7%' },
                { field: 'OvertimeInhourSt', name: 'OTHour', width: '7%' },
                { field: 'DayOFFSt', name: 'DayOff', width: '7%' },
                { field: 'HoliDaySt', name: 'Holiday', width: '7%' },
                { field: 'PDayOff', name: 'PDayOff', width: '7%' },
                { field: 'PHoliday', name: 'PHoliday', width: '7%' },
                { field: 'BOA', name: 'BOA', width: '7%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForLeaveHistory = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'Session', name: 'Session', width: '15%' },
                { field: 'CLDetailsInStr', name: 'CL', width: '15%' },
                { field: 'SLDetailsInStr', name: 'SL', width: '15%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }

        };
        $scope.gridOptionForLAH = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'LeaveHeadName', name: 'LeaveHead', width: '15%' },
                { field: 'StartDateTimeInString', name: 'StartDate', width: '15%' },
                { field: 'EndDateTimeInString', name: 'EndDate', width: '15%' },
                { field: 'LeaveDurationInST', name: 'Duration', width: '15%' },
                { field: 'LeaveTypeInString', name: 'LeaveType', width: '15%' },
                { field: 'LeaveStatusInString', name: 'LeaveStatus', width: '15%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForIncrementHis = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'EffectedDateInString', name: 'EffectDate', width: '15%' },
                { field: 'GrossSalary', name: 'PreviousSalary', width: '10%' },
                //{ field: 'EndDate', name: 'IncrementAmount', width: '10%' },
                //{ field: 'PassingDate', name: 'Percentage', width: '10%' },
                { field: 'TPIGrossSalary', name: 'PresentSalary', width: '10%' },
                { field: 'DesignationName', name: 'DesignationWhileIncrement', width: '20%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForTransferHis = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'LocationName', name: 'PreviousLocation', width: '15%' },
                { field: 'TPILocationName', name: 'PresentLocation', width: '10%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForPromotionHis = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'DesignationName', name: 'PreviousDesignation', width: '10%' },
                { field: 'TPIDesignationName', name: 'PresentDesignation', width: '20%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };
        $scope.gridOptionForActivity = {
            enableSorting: false,
            enableFullRowSelection: true,
            enableRowHeaderSelection: false,
            enableSelectAll: false,
            multiSelect:false,
            //enableHorizontalScrollbar: false,
            //enableVerticalScrollbar : false,

            columnDefs: [ 
                { field: 'ActivityDateInStr', name: 'ActivityDate', width: '35%' },
                { field: 'Note', name: 'Note', width: '30%' },
                { field: 'ApproveByDateInStr', name: 'Approve By', width: '30%' },
            ],
            data:[],
            onRegisterApi:function(gridApi)
            {
                $scope.gridApi = gridApi;
            }
        };

        $scope.searchEmployeeByKeyUp=function(keyEvent){
            if(keyEvent.which==13){
                $scope.getsEmployee();
            }
            else if(keyEvent.which==08){
                $scope.EP.EmployeeID = 0;
            }
        };

        $scope.searchEmployee=function(){
            $scope.getsEmployee();
        };

        $scope.getsEmployee=function(){

            $scope.EP.Name =($scope.EP.Name == undefined || $scope.EP.Name =="")?"":$scope.EP.Name ;

            var obj={ Name: $scope.EP.Name }
            var config = { headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;' } };
            $http.post(_sBaseAddress+'/Employee/GetsEmployee',$.param(obj), config).then(function (response)
            { 
                var results=jQuery.parseJSON(response.data);
                var modalObj={
                    size:'sm',
                    title:'Employee List',
                    url:_sBaseAddress+'/Home/Modal',
                    modalController:'ModalCtrl', 
                    appController:'EAController', 
                    objs:results, 
                    multiSelect:false,
                    columns:[{ field: 'Code', name: 'Code' }, { field: 'Name', name: 'Employee Name' }]
                }
                var modalInstance=msModal.Instance(modalObj);
                modalInstance.result.then(function (result) {
                    debugger;
                    $scope.EP.EmployeeID = result.EmployeeID;
                    $scope.EP.Name = result.Name;


                }, function () {
                    $log.info('Modal dismissed at: ' + new Date());
                });
            },
                function (response) { alert(jQuery.parseJSON(response.data).ErrorMessage);}
            );
        }

        $scope.Validation=function(){

            debugger;
            if($scope.EP.EmployeeID <=0){
                msModal.Message({headerTitle : '', bodyText:'Select Employee', sucessText : ' Yes', cancelText : ' Close', feedbackType:false, autoClose : false});
                return false;
            }
            return  true;
        };

        $scope.ViewProfile = function () {
              
            if(!$scope.Validation())
                return false;
            debugger;

            var config = { headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;' } };
            $http.post(_sBaseAddress+'/EmployeeInfo/SearchProfile',$.param($scope.EP), config).then(function (response){
                debugger;
                var result = jQuery.parseJSON(response.data);
                if(result.EmployeeID>0)
                {
                    debugger;
                    $scope.BUName = result.BusinessUnitName;
                    $scope.LocationName = result.LocationName;
                    $scope.BUAddress = result.BUAddress;
                    $scope.CurrentDate = icsdateformat(new Date());
                    
                    $scope.EmployeeCode = result.Code;
                    $scope.CardNo = result.CardNo;
                    $scope.BankInfo = (result.EmployeeBankAccounts.length > 0) ?result.EmployeeBankAccounts[0].BankBranchName:"";
                    $scope.TINNo = result.EmployeeTINInformations.TIN;
                    
                    $scope.AttendanceScheme = result.EmployeeOfficial.AttendanceSchemeName;
                    $scope.CurentShift = result.CurrentShift;
                    $scope.Block = "";
                    $scope.ReportingPerson = (result.EmployeeReportingPersons.length > 0) ?result.EmployeeReportingPersons[0].ReportingPersonName:"";
                    
                    $scope.SalaryScheme = (result.EmployeeSalaryStructures.length > 0) ?result.EmployeeSalaryStructures[0].SalarySchemeName:"";
                    $scope.Gross = (result.EmployeeSalaryStructures.length > 0) ?result.EmployeeSalaryStructures[0].GrossAmount:"";

                    
                    $scope.BankAmount = (result.EmployeeSalaryStructures.length > 0) ? (result.EmployeeSalaryStructures[0].IsCashFixed == false)? result.EmployeeSalaryStructures[0].CashAmount : "":"";
                    $scope.CashAmount = (result.EmployeeSalaryStructures.length > 0) ? (result.EmployeeSalaryStructures[0].IsCashFixed == true)? result.EmployeeSalaryStructures[0].CashAmount : "":"";

                    
                    $scope.gridOptionForLeave.data = result.LeaveLedgerReports;
                    $scope.gridOptionsSalary.data = result.EmployeeSalaryStructureDetails;
                    $scope.gridOptionForNominee.data = result.EmployeeNominees;
                    $scope.gridOptionForExperience.data = result.EmployeeExperiences;
                    $scope.gridOptionForEducation.data = result.EmployeeEducations;
                    $scope.gridOptionForTraining.data = result.EmployeeTrainings;
                    $scope.gridOptionForLeaveHistory.data = result.EmployeeLeaveLedgers;

                    $scope.gridOptionForIncrementHis.data = result.IncrementHistorys;
                    $scope.gridOptionForTransferHis.data = result.TransferHistorys;
                    $scope.gridOptionForPromotionHis.data = result.PromotionHistorys;
                    $scope.gridOptionForActivity.data = result.AcitivityNotes;


                    $scope.FatherName = result.FatherName;
                    $scope.MotherName = result.MotherName;
                    $scope.PresentAddress = result.PresentAddress;
                    $scope.PermanentAddress = result.ParmanentAddress;
                    $scope.DOB = result.DateOfBirthInString;
                    $scope.Religion = result.Religious;
                    $scope.Gender = result.Gender;
                    $scope.MaritalStatus = result.MaritalStatus;
                    $scope.Nationalism = result.Nationalism;
                    $scope.BloodGroup = result.BloodGroup;
                    $scope.ContactNo = result.ContactNo;
                    $scope.Email = result.Email;

                    
                }
                else{
                    msModal.Message({headerTitle : '', bodyText:result.ErrorMessage, sucessText : ' Yes', cancelText : ' Close', feedbackType:false, autoClose : false});
                }
            },
                function (response) { alert(jQuery.parseJSON(response.data).ErrorMessage);}
            );
        };

        $scope.AHSearch = function () {
            debugger;
            var config = { headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;' } };
            $http.post(_sBaseAddress+'/EmployeeInfo/AttendanceHistorySearch',$.param({nEmpID : $scope.EP.EmployeeID, sStartDate : $scope.AHStartDateInString, sEndDate : $scope.AHEndDateInString}), config).then(
                function (response){
                    debugger;
                    var result = jQuery.parseJSON(response.data);
                    if(result[0].ErrorMessage == "" && result.length > 0){
                        debugger;
                        $scope.gridOptionForAttendanceHistory.data = result;
                    }
                    else{
                        msModal.Message({headerTitle : '', bodyText:result[0].ErrorMessage, sucessText : ' Yes', cancelText : ' Close', feedbackType:false, autoClose : false});
                    }
                },
                function (response) { 
                    alert(jQuery.parseJSON(response.data).ErrorMessage);
                }
            );
        };

        $scope.LAHSearch = function (){
            debugger;
            var config = { headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;' } };
            $http.post(_sBaseAddress+'/EmployeeInfo/LAHSearch',$.param({nEmpID : $scope.EP.EmployeeID, sStartDate : $scope.LAHStartDateInString, sEndDate : $scope.LAHEndDateInString}), config).then(
                function (response){
                    debugger;
                    var result = jQuery.parseJSON(response.data);
                    if(result[0].ErrorMessage == "" && result.length > 0){
                        debugger;
                        $scope.gridOptionForLAH.data = result;
                    }
                    else{
                        msModal.Message({headerTitle : '', bodyText:result[0].ErrorMessage, sucessText : ' Yes', cancelText : ' Close', feedbackType:false, autoClose : false});
                    }
                },
                function (response) { 
                    alert(jQuery.parseJSON(response.data).ErrorMessage);
                }
            );
        };

        
        //PDF
        $scope.print = function(){
            
            if(!$scope.Validation())
                return false;
            debugger;
            
            var sAttHistory = ($scope.AHStartDateInString == undefined)?"":$scope.AHStartDateInString + "," + ($scope.AHEndDateInString == undefined)?"":$scope.AHEndDateInString;
            var sLAHistory = ($scope.LAHStartDateInString == undefined)?"":$scope.LAHStartDateInString + "," + ($scope.LAHEndDateInString == undefined)?"":$scope.LAHEndDateInString;

            var sParams =  $scope.EP.EmployeeID + "~" + sAttHistory + "~" + sLAHistory;
            window.open(_sBaseAddress + '/EmployeeInfo/Print_PDF?sParams=' + sParams, "_blank");

        }


    });

</script>
