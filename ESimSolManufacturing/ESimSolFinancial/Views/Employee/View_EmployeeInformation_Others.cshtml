@{
    ViewBag.Title = "Employee Information";
}
<!DOCTYPE html>
<html>
@model ESimSol.BusinessObjects.Employee
<head>
    <title> Employee Information</title>
    <style>
        .div-parent{
           float:left;
           width:100%;
        }
       .div-margin{
            margin-left: 3px;
            margin-right: 3px;
            margin-bottom: 2px;
            margin-top: 2px;
        }
        .div-child-3 {
            float: left;
            width: 28%;
            margin-left: 3px;
            margin-right: 3px;
            margin-bottom: 2px;
            margin-top: 2px;
        }

        .div-child-4 {
            float: left;
            width: 40%;
            margin-left: 3px;
            margin-right: 3px;
            margin-bottom: 2px;
            margin-top: 2px;
        }

        .div-child-5 {
            float: left;
            width: 49%;
            margin-left: 3px;
            margin-right: 3px;
            margin-bottom: 2px;
            margin-top: 2px;
        }

        .div-child-6 {
            float: left;
            width: 56%;
            margin-left: 3px;
            margin-right: 3px;
            margin-bottom: 2px;
            margin-top: 2px;
        }

        .div-child-7 {
            float: left;
            width: 68%;
            margin-left: 3px;
            margin-right: 3px;
            margin-bottom: 2px;
            margin-top: 2px;
        }

        .align-right {
            text-align: right;
        }
        .div-border {
            border: 1px solid thin;
        }
        .avro {
            font-family: Kalpurush;
        }

        .bijoy {
            font-family: SutonnyMJ;
        }
    </style>
</head>
<body>
    @{var MenuID = HttpContext.Current.Session[SessionInfo.MenuID];}
    <div id="winDegreeSequence" class="easyui-window" title="View Sequence Configure" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false">
        <table id="tblDegreeSequence" title="Employee Education" class="easyui-datagrid" style="width:100%;height:300px" data-options="singleSelect: true,fitColumns:false,rownumbers:true,pagination:false,autoRowHeight:false,toolbar: '#toolbarDegreeSequence'">
            <thead>
                <tr>
                    <th field="Degree" width="15%" align="left">Degree</th>
                    <th field="Major" width="12%" align="left">Major</th>
                    <th field="PassingYear" width="13%" align="left">Passing Year</th>
                    <th field="Institution" width="23%" align="left">Institution</th>
                    <th field="BoardUniversity" width="15%" align="left">Board/University</th>
                    <th field="Result" width="10%" align="left">Result</th>
                    <th field="Sequence" width="10%" align="left">Sequence</th>
                </tr>
            </thead>
        </table>
        <div id="toolbarDegreeSequence">
            <a href="javascript:void(0)" id="btnDegreeUp" class="easyui-linkbutton" iconcls="icon-up" plain="true" onclick="DegreeUP()">Up</a>
            <a href="javascript:void(0)" id="btnDegreeDown" class="easyui-linkbutton" iconcls="icon-down" plain="true" onclick="DegreeDown()">Down</a>
            <a href="javascript:void(0)" id="btnDegreeRefresh" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="RefreshDegreeSequence()">Refresh</a>
        </div>
        <fieldset class="actionfieldsetstyle">
            <legend>Actions : </legend>
            <a id="btnSaveDegreeSequence" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true" onclick="SaveDegreeSequence()">Save</a>
            <a id="btnCloseDegreeSequence" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
        </fieldset>
    </div>


    <div id="winTrainingSequence" class="easyui-window" title="View Sequence Configure" data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false,closable:false">
        <table id="tblTrainingSequence" title="Employee Training" class="easyui-datagrid" style="width:100%;height:300px" data-options="singleSelect: true,fitColumns:false,rownumbers:true,pagination:false,autoRowHeight:false,toolbar: '#toolbarTrainingSequence'">
            <thead>
                <tr>
                    <th field="CourseName" width="20%" align="left">Course Name</th>
                    <th field="Specification" width="15%" align="left">Specification</th>
                    <th field="DurationString" width="18%" align="left">Duration String</th>
                    <th field="PassingDateInString" width="15%" align="left">Passing Year</th>
                    <th field="CertifyBodyVendor" width="18%" align="left">Certify Body Vendor</th>
                    <th field="Sequence" width="12%" align="left">Sequence</th>
                </tr>
            </thead>
        </table>
        <div id="toolbarTrainingSequence">
            <a href="javascript:void(0)" id="btnTrainingUp" class="easyui-linkbutton" iconcls="icon-up" plain="true" onclick="TrainingUP()">Up</a>
            <a href="javascript:void(0)" id="btnTrainingDown" class="easyui-linkbutton" iconcls="icon-down" plain="true" onclick="TrainingDown()">Down</a>
            <a href="javascript:void(0)" id="btnTrainingRefresh" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="RefreshTrainingSequence()">Refresh</a>
        </div>
        <fieldset class="actionfieldsetstyle">
            <legend>Actions : </legend>
            <a id="btnSaveTrainingSequence" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true" onclick="SaveTrainingSequence()">Save</a>
            <a id="btnCloseTrainingSequence" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
        </fieldset>
    </div>
    <div class="menuMainCollectionTable">
        <div id="divEmployee" class="easyui-panel" title="Add employee other imformations" style="font-family:Tahoma; height:100%; width:100%;">
            <div class="easyui-tabs" style="width:100%">
                <div title="Block & TIN">
                    <div class="div-parent">
                        <div class="div-child-6">
                                <table id="tblEmployeeBlock" class="easyui-datagrid" style="width:100%;height:430px;" data-options="singleSelect: true,fitColumns:false, rownumbers:true,pagination:false,  autoRowHeight:false, toolbar: '#toolbarEmployeeBlock' ">
                                    <thead>
                                        <tr>
                                            <th field="BlockName" style="width:35%;">Block Name</th>
                                            <th field="StartDateInString" width="25%" align="left">Start Date</th>
                                            <th field="EndDateInString" width="25%" align="left">End Date</th>
                                            <th field="ActivityStatus" width="10%" align="left">Activity</th>
                                        </tr>
                                    </thead>
                                </table>

                            <div class="div-parent" id="toolbarEmployeeBlock">
                                    Process :
                                    <select id="cboProductionProcess" style="width:20%;"></select>
                                    Block :
                                    <select id="cboBlock" style="width: 20%;"></select>
                                    @*<a id="btnLoadBlock" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-reload" plain="true"></a>*@
                                    Start Date :
                                    <input id="dtBlockStartDate" type="text" class="easyui-datebox" required="required" data-options="formatter:icsdateformat,parser:icsdateparser" style="width:20%;" />
                                    <br />
                                    <a id="btnAddEmployeeBlock" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add" plain="true"></a>
                                    <a id="btnDeleteEmployeeBlock" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true"></a>
                                    <input id="chkBlockInactive" type="checkbox" />Load Inactive
                                    <a id="btnInactiveBlock" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" plain="true">InActivite</a>
                                </div>
                            </div>
                        <div class="div-child-4">
                            <fieldset style="height:auto;">
                                <legend>TIN</legend>
                                <table style="width:100%">
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Employee :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtTINEmployee" type="text" style="width:90%;" disabled />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            TIN :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtTIN" type="text" style="width:90%;" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            ETIN :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtETIN" type="text" style="width:90%;" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Tax Area :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            @Html.DropDownList("TaxArea", new SelectList(Enum.GetValues(typeof(ESimSol.BusinessObjects.EnumTaxArea))), new { id = "cboTaxArea", style = "width: 90%;" })
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Circle :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtCircle" type="text" style="width:90%;" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Zone :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtZone" type="text" style="width:90%;" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;"></td>
                                        <td style="text-align:left;">
                                            <input id="chkIsNonResident" type="checkbox" /> Non Resident
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2" style="text-align:right;">
                                            <a id="btnSaveTIN" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true" style="margin-right:45px;">Save</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2" style="text-align:right;">
                                            
                                        </td>
                                    </tr>
                                </table>
                            </fieldset>

                            @*Village Contact*@
                            <fieldset style="height:auto;">
                                <legend>Village Contact</legend>
                                <table style="width:100%">
                                    <tr>
                                        <td style="width:20%; text-align:right">
                                            DesignationType:
                                        </td>
                                        <td style="width:80%">
                                            <select style="width:220px" id="cboEmployeeDesignationType"></select>
                                            @*@Html.DropDownListFor(model => model.EmployeeDesignationType, new SelectList(Enum.GetValues(typeof(ESimSol.BusinessObjects.EnumEmployeeType))), new { id = "cboEmployeeDesignationType", style = "width: 320px;" })*@
                                            <a id="btnSaveDesignationType" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-add"></a>
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Village :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtVillage" type="text" style="width:90%; font-family:SutonnyMJ;" disabled="disabled" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Post Office :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtPostOffice" type="text" style="width:90%; font-family:SutonnyMJ;" disabled="disabled" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Thana :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtThana" type="text" style="width:90%; font-family:SutonnyMJ;" disabled="disabled" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            District :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtDistrict" type="text" style="width:90%; font-family:SutonnyMJ;" disabled="disabled" />
                                        </td>
                                    </tr>
                                    <tr style="width:100%">
                                        <td style="width:20%; text-align:right;">
                                            Post Code :
                                        </td>
                                        <td style="width:80%;text-align:left;">
                                            <input id="txtPostCode" type="text" style="width:90%;" disabled="disabled" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2" style="text-align:right;">
                                            @*<a id="btnSaveVillageContact" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true" style="margin-right:45px;">Save</a>*@
                                        </td>
                                    </tr>
                                </table>
                            </fieldset>


                        </div>
                    </div>
                    <fieldset>
                        <legend style="font-weight: bold">Action : </legend>
                        <div style="text-align:right">
                            <a id="btnCloseBlockAndTin" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                        </div>
                    </fieldset>
                </div>

                <div title="Education & Reference">
                    <div class="div-parent">
                        <div class="div-child-3">
                            <div class="div-parent">
                                <fieldset style="height:210px;">
                                    <legend style="font-weight:bold"> Education Informations : </legend>
                                    <div class="div-parent div-margin">
                                        <input id="txtDegree" type="text" style="width:95%" placeholder="Degree" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtMajor" type="text" style="width:95%" placeholder="Major" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtPassingYear" type="text" style="width:95%" placeholder="Passing Year" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtInstitution" type="text" style="width:95%" placeholder="Institute" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtBoardorUniversity" type="text" style="width:95%" placeholder="Board/University" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtResult" type="text" style="width:95%" placeholder="Result" />
                                    </div>
                                    <div class="div-parent align-right div-margin">
                                        <a id="btnEducationSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                        <a id="btnEducationClear" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Cancel</a>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="div-child-7">
                            <div class="div-parent">
                                <table id="tblEmployeEducation" title="Employee Education" class="easyui-datagrid" style="width:100%;height:198px" data-options="singleSelect: true,fitColumns:false,rownumbers:true,pagination:false,autoRowHeight:false,toolbar: '#EmployeeEducationtoolbar'">
                                    <thead>
                                        <tr>
                                            <th field="Degree" width="15%" align="left">Degree</th>
                                            <th field="Major" width="12%" align="left">Major</th>
                                            <th field="PassingYear" width="13%" align="left">Passing Year</th>
                                            <th field="Institution" width="23%" align="left">Institution</th>
                                            <th field="BoardUniversity" width="15%" align="left">Board/University</th>
                                            <th field="Result" width="10%" align="left">Result</th>
                                            <th field="Sequence" width="10%" align="left">Sequence</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                        <div id="EmployeeEducationtoolbar" style="text-align:left;">
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeEducation()">Remove</a>
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeEducation()">Edit</a>
                            <a id="btnDegreeSequenceConfigure" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="SequenceConfigure()">Sequence Configure</a>
                        </div>
                    </div>
                    <div class="div-parent">
                        <div class="div-child-3">
                            <div class="div-parent">
                                <fieldset>
                                    <legend style="font-weight:bold"> Reference Informations : </legend>
                                    <div class="div-parent div-margin">
                                        <input id="txtName" type="text" style="width:95%" placeholder="Name" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtContactNo" type="text" style="width:95%" placeholder="Contact No" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtOrganization" type="text" style="width:95%" placeholder="Organization" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtDesignation" type="text" style="width:95%" placeholder="Designation" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtAddress" type="text" style="width:95%" placeholder="Address" />
                                    </div>
                                    <div class="div-parent div-margin">
                                        <input id="txtRelation" type="text" style="width:95%" placeholder="Relation" />
                                    </div>
                                    <div class="div-parent div-margin align-right">
                                        <a id="btnReferenceSave"  href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true" >Save</a>
                                        <a id="btnReferenceClear" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Cancel</a>
                                    
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="div-child-7">
                            <div class="div-parent" style="margin-top:8px;">
                                <table id="tblEmployeReference" title="Employee Reference" class="easyui-datagrid" style="width:100%;height:215px;" data-options="singleSelect: true,fitColumns:false,rownumbers:true,pagination:false,autoRowHeight:false,toolbar: '#EmployeeReferencetoolbar'">
                                    <thead>
                                        <tr>
                                            <th field="Name" width="20%" align="left">Name</th>
                                            <th field="Organization" width="20%" align="left">Organization</th>
                                            <th field="Designation" width="20%" align="left">Designation</th>
                                            <th field="Relation" width="18%" align="left">Relation</th>
                                            <th field="ContactNo" width="18%" align="left">ContactNo</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                        <div id="EmployeeReferencetoolbar" style="text-align:left;">
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeReference()">Remove</a>
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeReference()">Edit</a>
                        </div>
                    </div>
                    <fieldset>
                        <legend style="font-weight: bold">Action : </legend>
                        <div style="text-align:right">
                            <a id="btnCloseEducationAndReference" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                        </div>
                    </fieldset>
                </div>

                <div title="Experience">
                    <div class="div-parent">
                        <div class="div-child-4" >
                            <fieldset style="height:410px;">
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Organization :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtOrganization_Experience" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Org. Type :</label>

                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtOrganizationType" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Address :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtAddress_Experience" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Designation :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtDesignation_Experience" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label> Start Date :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtStartDate-Experience" type="text" class="easyui-datebox" style="width: 50%;" data-options="formatter:icsdateformat, parser : icsdateparser" />
                                        <select id="cboStartDateExFormat" style="width:44%;height:22px;"></select>
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>End Date :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtEndDate-Experience" type="text" class="easyui-datebox" style="width: 50%;" data-options="formatter:icsdateformat,parser : icsdateparser" />
                                        <select id="cboEndDateExFormat" style="width:44%;height:22px;"></select>
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Major Res. :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtMajorResponsibility" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                    </div>
                                    <div class="div-child-7 align-right">
                                        <a id="btnExperienceSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                        <a id="btnExperienceClear" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Cancel</a>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="div-child-6" >
                            <table id="tblEmployeExperience" title="Employee Experience" class="easyui-datagrid" style="width:100%;height:425px" data-options="singleSelect: true,fitColumns:false,rownumbers:true,pagination:false,autoRowHeight:false,toolbar: '#EmployeeExperiencetoolbar'">
                                <thead>
                                    <tr>
                                        <th field="Organization" width="25%" align="left">Organization</th>
                                        <th field="OrganizationType" width="25%" align="left">Type</th>
                                        <th field="Designation" width="25%" align="left">Designation</th>
                                        <th field="DurationString" width="22%" align="left">Duration</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>

                        <div id="EmployeeExperiencetoolbar">
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeExperience()">Remove</a>
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeExperience()">Edit</a>
                        </div>
                    </div>
                    <fieldset>
                        <legend style="font-weight: bold">Action : </legend>
                        <div style="text-align:right">
                            <a id="btnCloseExperience" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                        </div>
                    </fieldset>
                </div>

                <div title="Training">
                    <div class="div-parent">
                        <div class="div-child-4">
                            <fieldset style="height:410px;">
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Course Name :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtCourseName" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Institute :</label>

                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtInstitution-Training" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Vendor :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtVendor" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Specification :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtSpecification" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Registration No:</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtCertificateRegNo" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label> Start Date :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtStartDate-Training" type="text" class="easyui-datebox" style="width: 50%;" data-options="formatter:icsdateformat, parser : icsdateparser" />
                                        <select id="cboStartDateTrainingFormat" style="width:44%;height:22px;"></select>
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>End Date :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtEndDate-Training" type="text" class="easyui-datebox" style="width: 50%;" data-options="formatter:icsdateformat,parser : icsdateparser" />
                                        <select id="cboEndDateTrainingFormat" style="width:44%;height:22px;"></select>
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Passing Date :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtPassingDate-Training" type="text" class="easyui-datebox" style="width: 50%;" data-options="formatter:icsdateformat,parser : icsdateparser" />
                                        <select id="cboPassingDateTrainingFormat" style="width:44%;height:22px;"></select>
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Train Duration :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtTrainingDuration" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Country :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtCountry" type="text" style="width:95%" />
                                    </div>
                                </div>
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                        <label>Result :</label>
                                    </div>
                                    <div class="div-child-7">
                                        <input id="txtResult-Training" type="text" style="width:95%" />
                                    </div>
                                </div>
                         
                                <div class="div-parent">
                                    <div class="div-child-3 align-right">
                                    </div>
                                    <div class="div-child-7 align-right">
                                        <a id="btnTrainingSave" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-save" plain="true">Save</a>
                                        <a id="btnTrainingClear" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Cancel</a>
                                     </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="div-child-6">
                            <table id="tblEmployeTraining" title="Employee Training" class="easyui-datagrid" style="width:100%;height:425px" data-options="singleSelect: true,fitColumns:false,rownumbers:true,pagination:false,autoRowHeight:false,toolbar: '#EmployeeTrainingtoolbar'">
                                <thead>
                                    <tr>
                                        <th field="CourseName" width="20%" align="left">Course Name</th>
                                        <th field="Specification" width="15%" align="left">Specification</th>
                                        <th field="DurationString" width="18%" align="left">Duration String</th>
                                        <th field="PassingDateInString" width="15%" align="left">Passing Year</th>
                                        <th field="CertifyBodyVendor" width="18%" align="left">Certify Body Vendor</th>
                                        <th field="Sequence" width="12%" align="left">Sequence</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>

                        <div id="EmployeeTrainingtoolbar">
                            <a  href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-remove" plain="true" onclick="DeleteEmployeeTraining()">Remove</a>
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-edit" plain="true" onclick="EditEmployeeTraining()">Edit</a>
                            <a id="btnTrainingSequenceConfigure" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-reload" plain="true" onclick="TrainingSequenceConfigure()">Sequence Configure</a>
                        </div>
                    </div>
                    <fieldset>
                        <legend style="font-weight: bold">Action : </legend>
                        <div style="text-align:right">
                            <a id="btnCloseTraingnig" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                        </div>
                    </fieldset>
                </div>

                <div title="Document">
                    <div class="div-parent">
                        <div style="margin-left:0px;">
                            <table id="tblEmployeeDocuments" class="easyui-datagrid" style="width:100%;height:400px" fitcolumns="false" rownumbers="true" pagination="false" singleselect="true" autorowheight="false" toolbar="#toolbarEmployeeDocument">
                                <thead>
                                    <tr>
                                        <th field="FileName" width="45%">File Name</th>
                                    </tr>
                                </thead>
                            </table>
                            <table style="width: 100%; font-size: 12px; font-weight: bold;">
                                <tr>
                                    <td style="text-align: left">
                                        <input id="chkRange" type="checkbox" />Range
                                        <label id="lblRange1">
                                            <input id="txtFrom" type="text" style="width:40px" />&nbsp; To &nbsp;
                                        </label>
                                        <label id="lblRange2">
                                            <input id="txtTo" type="text" style="width:40px" />
                                        </label>
                                        <label id="lblcount"></label>
                                        <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" plain="true" onclick="Next()">Next</a>
                                    </td>
                                </tr>
                            </table>

                            <div id="toolbarEmployeeDocument">
                                <table>
                                    <tr>
                                        <td>
                                            @using (Html.BeginForm("UploadAttchment", "Employee", new { nEmployeeID = @ViewBag.EmployeeID }, FormMethod.Post, new { enctype = "multipart/form-data", target = "_blank", @class = "A" }))
                                            {
                                                <input type="file" id="fileControl" name="file" style="width:200px;" />
                                                <input id="btnSubmitEmployeeDocumentAttachment" type="submit" value="Upload" style="font-weight: bold;" />
                                                
                                            }
                                        </td>
                                        <td>
                                            <input id="btnRefresh" type="submit" value="Refresh" style="font-weight: bold;" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            @using (Html.BeginForm("DownloadAttachment", "Employee", FormMethod.Post, new { enctype = "multipart/form-data", target = "_blank", @class = "B" }))
                                            {
                                                <input type="text" name="EDID" id="txtEmployeeDocumentAttchmentID" hidden="hidden" />
                                                <input id="btnDeleteEmployeeDocumentAttachment" type="button" value="Delete" style="font-weight: bold" />
                                                <input type="submit" value="Download" id="btnDownload" style="font-weight: bold;" />
                                            }
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <fieldset>
                                <legend style="font-weight: bold">Action : </legend>
                                <div style="text-align:right">
                                    <a id="btnCloseTraingnig" href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-cancel" plain="true">Close</a>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
             </div>
        </div>
    </div>
</body>
</html>
<style type="text/css">
    .A {
        float: left;
    }

    .B {
        float: left;
    }
</style>

<script type="text/javascript">
    var _sBaseAddress="";
    var _oEmployee = {};
    var _oEmployeeById = {};
    var _oProductionProcesss=[];
    var _nETINID = 0;
    var _oEmployeeTIN = null;
    var _oActiveBlocks=[];
    var _oInActiveBlocks=[];
    var _TaxArea=[];
    var _oEmpDocs =[];
    var oDocs = [];
    var _COS = null;
    var _nTempEmployeeEducationID = 0;
    var _nTempEmployeeReferenceID = 0;
    var _nTempEmployeeExperienceID = 0;
    var _nTempEmployeeTrainingID = 0;
    $(document).ready(function()
    {
        debugger;
        _sBaseAddress = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(HttpContext.Current.Session[SessionInfo.BaseAddress]));
        _oEmployee = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model));
        _oProductionProcesss= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@ViewBag.ProductionProcesss));
        oCustomDateFormat= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@ViewBag.CustomDateFormat));
        _oEmployeeTIN= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@ViewBag.EmployeeTINInformation));
        _TaxArea= @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@ViewBag.TaxAreas));
        oDocs = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.EmployeeDocuments));
        _COS =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.COS));
        var oEmployeeDesignationTypes =@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewBag.EmployeeDesignationTypes));
        $("#cboEmployeeDesignationType").icsLoadCombo({ List: oEmployeeDesignationTypes, OptionValue: "id", DisplayText: "Value" });
        $("#cboStartDateExFormat").icsLoadCombo({ List: oCustomDateFormat, OptionValue: "id", DisplayText: "Value" });
        $("#cboEndDateExFormat").icsLoadCombo({ List: oCustomDateFormat, OptionValue: "id", DisplayText: "Value" });
        $("#cboStartDateTrainingFormat").icsLoadCombo({ List: oCustomDateFormat, OptionValue: "id", DisplayText: "Value" });
        $("#cboEndDateTrainingFormat").icsLoadCombo({ List: oCustomDateFormat, OptionValue: "id", DisplayText: "Value" });
        $("#cboPassingDateTrainingFormat").icsLoadCombo({ List: oCustomDateFormat, OptionValue: "id", DisplayText: "Value" });
        $("#cboStartDateExFormat").val(1);
        $("#cboEndDateExFormat").val(1);
        $("#cboStartDateTrainingFormat").val(0);
        $("#cboEndDateTrainingFormat").val(0);
        $("#cboPassingDateTrainingFormat").val(1);
        LoadDate();
        InitializeBlock();
        if(_oEmployeeTIN.ETINID>0){TINRefreshControl()};
        $("#txtTINEmployee").val(_oEmployee.Name);

        $("#cboEmployeeDesignationType").val(parseInt(_oEmployee.EmployeeDesignationTypeInt));
        $("#txtVillage").val(_oEmployee.Village);
        $("#txtPostOffice").val(_oEmployee.PostOffice);
        $("#txtThana").val(_oEmployee.Thana);
        $("#txtDistrict").val(_oEmployee.District);
        $("#txtPostCode").val(_oEmployee.PostCode);

        if(oDocs !=null)
        {
            $('#tblEmployeeDocuments').datagrid('loadData', oDocs);
        }
        DynamicRefreshList(_oEmployee.EmployeeEducations,'tblEmployeEducation');
        DynamicRefreshList(_oEmployee.EmployeeReferences,'tblEmployeReference');
        DynamicRefreshList(_oEmployee.EmployeeExperiences,'tblEmployeExperience');
        DynamicRefreshList(_oEmployee.EmployeeTrainings,'tblEmployeTraining');
        RefreshAutoComplete();

        var elV = document.getElementById('txtVillage');
        var valV = parseInt(elV.innerText);
        var class_nameV;

        if(parseInt(_COS.Value) == 19) {
            class_nameV = 'bijoy';
        }
        else {
            class_nameV = 'avro';
        }
        elV.classNameV += ' ' + class_nameV;


        var elPO = document.getElementById('txtPostOffice');
        var valPO = parseInt(elPO.innerText);
        var class_namePO;

        if(parseInt(_COS.Value) == 19) {
            class_namePO = 'bijoy';
        }
        else {
            class_namePO = 'avro';
        }
        elPO.classNamePO += ' ' + class_namePO;


        var elT = document.getElementById('txtThana');
        var valT = parseInt(elT.innerText);
        var class_nameT;

        if(parseInt(_COS.Value) == 19) {
            class_nameT = 'bijoy';
        }
        else {
            class_nameT = 'avro';
        }
        elT.classNameT += ' ' + class_nameT;

        var elD = document.getElementById('txtDistrict');
        var valD = parseInt(elD.innerText);
        var class_nameD;

        if(parseInt(_COS.Value) == 19) {
            class_nameD = 'bijoy';
        }
        else {
            class_nameD = 'avro';
        }
        elD.classNameD += ' ' + class_nameD;
    });

    $("#btnRefresh").click(function () {
        debugger;
        $.ajax({
            type: "GET",
            dataType: "json",
            url: _sBaseAddress + "/Employee/GetEmployeeDocument",
            traditional: true,
            data: {nEmpID:_oEmployee.EmployeeID},
            contentType: "application/json; charset=utf-8",

            success: function(data)
            {
                _oEmpDocs = jQuery.parseJSON(data);
                $('#tblEmployeeDocuments').datagrid('loadData', _oEmpDocs);
            },
            error: function(xhr, status, error)
            {
                alert(error);
            }
        });


    });


    $("#btnDeleteEmployeeDocumentAttachment").click(function() {
        var oEmployeeDocument = $("#tblEmployeeDocuments").datagrid("getSelected");
        if (oEmployeeDocument == null || parseInt(oEmployeeDocument.EDID) <= 0) {
            alert("Please select an item from list!");
            return false;
        }
        if (!confirm("Confirm to Delete?")) return false;
        oEmployeeDocument.DocFile= null;
        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oEmployeeDocument,
            ControllerName: "Employee",
            ActionName: "DeleteEmployeeDocument",
            TableId: "tblEmployeeDocuments",
            IsWinClose: false
        };
        $.icsDelete(obj);
    });
    $("#btnDownload").click(function() {
        var oEmployeeDocumentAttachment = $("#tblEmployeeDocuments").datagrid("getSelected");
        if (oEmployeeDocumentAttachment == null || parseInt(oEmployeeDocumentAttachment.EDID) <= 0) {
            alert("Please select an item from list!");
            return false;
        }
        $('#txtEmployeeDocumentAttchmentID').val(oEmployeeDocumentAttachment.EDID);
    });

    //$("#btnSaveVillageContact").click(function () {
    //    debugger;
    //    $.ajax({
    //        type: "GET",
    //        dataType: "json",
    //        url: _sBaseAddress + "/Employee/GetByEmployeeID",
    //        traditional: true,
    //        data: {nEmpID:_oEmployee.EmployeeID},
    //        contentType: "application/json; charset=utf-8",

    //        success: function(data)
    //        {
    //            debugger;
    //            _oEmployeeById = jQuery.parseJSON(data);
    //            var oEmployee =
    //            {
    //                EmployeeID: _oEmployeeById.EmployeeID,
    //                Code: _oEmployeeById.Code,
    //                Gender: _oEmployeeById.Gender,
    //                Name: _oEmployeeById.Name,
    //                NameInBangla: _oEmployeeById.NameInBangla,
    //                ContactNo: _oEmployeeById.ContactNo,
    //                OtherPhoneNo:_oEmployeeById.OtherPhoneNo,
    //                Email: _oEmployeeById.Email,
    //                IsFather: _oEmployeeById.IsFather,
    //                FatherName: _oEmployeeById.FatherName,
    //                MotherName: _oEmployeeById.MotherName,
    //                BloodGroup: _oEmployeeById.BloodGroup,
    //                ParmanentAddress: _oEmployeeById.ParmanentAddress,
    //                PresentAddress: _oEmployeeById.PresentAddress,

    //                IdentificationMart:_oEmployeeById.IdentificationMart,
    //                Height:_oEmployeeById.Height,
    //                Weight:_oEmployeeById.Weight,

    //                Village: $("#txtVillage").val(),
    //                PostOffice: $("#txtPostOffice").val(),
    //                Thana: $("#txtThana").val(),
    //                District: $("#txtDistrict").val(),
    //                PostCode: $("#txtPostCode").val(),

    //                DateOfBirth: _oEmployeeById.DateOfBirthInString,
    //                BirthID: _oEmployeeById.BirthID,
    //                Nationalism: _oEmployeeById.Nationalism,
    //                NationalID: _oEmployeeById.NationalID,
    //                Religious: _oEmployeeById.Religious,
    //                MaritalStatus: _oEmployeeById.MaritalStatus,
    //                ChildrenInfo: _oEmployeeById.ChildrenInfo,
    //                Note: _oEmployeeById.Note,
    //                EmployeeDesignationTypeInt: parseInt($("#cboEmployeeDesignationType").val())
    //            };
    //            $.ajax({
    //                type: "POST",
    //                dataType: "json",
    //                url: _sBaseAddress + "/Employee/EmployeeBasicInformation_IU",
    //                traditional: true,
    //                data: JSON.stringify(oEmployee),
    //                contentType: "application/json; charset=utf-8",

    //                success: function(data)
    //                {
    //                    _oEmployee = jQuery.parseJSON(data);
    //                    alert("Village contact saved successfully.")
    //                },
    //                error: function(xhr, status, error)
    //                {
    //                    alert(error);
    //                }
    //            });

    //        },
    //        error: function(xhr, status, error)
    //        {
    //            alert(error);
    //        }
    //    });


    //});



    $("#btnSaveDesignationType").click(function () {
        debugger;
        $.ajax({
            type: "GET",
            dataType: "json",
            url: _sBaseAddress + "/Employee/GetByEmployeeID",
            traditional: true,
            data: {nEmpID:_oEmployee.EmployeeID},
            contentType: "application/json; charset=utf-8",

            success: function(data)
            {
                debugger;
                _oEmployeeById = jQuery.parseJSON(data);
                var oEmployee =
                {
                    EmployeeID: _oEmployeeById.EmployeeID,
                    Code: _oEmployeeById.Code,
                    Gender: _oEmployeeById.Gender,
                    Name: _oEmployeeById.Name,
                    NameInBangla: _oEmployeeById.NameInBangla,
                    ContactNo: _oEmployeeById.ContactNo,
                    Email: _oEmployeeById.Email,
                    IsFather: _oEmployeeById.IsFather,
                    FatherName: _oEmployeeById.FatherName,
                    MotherName: _oEmployeeById.MotherName,
                    BloodGroup: _oEmployeeById.BloodGroup,
                    ParmanentAddress: _oEmployeeById.ParmanentAddress,
                    PresentAddress: _oEmployeeById.PresentAddress,

                    IdentificationMart:_oEmployeeById.IdentificationMart,
                    Height:_oEmployeeById.Height,
                    Weight:_oEmployeeById.Weight,

                    Village: _oEmployeeById.Village,
                    PostOffice: _oEmployeeById.PostOffice,
                    Thana: _oEmployeeById.Thana,
                    District: _oEmployeeById.District,
                    PostCode: _oEmployeeById.PostCode,

                    DateOfBirth: _oEmployeeById.DateOfBirthInString,
                    BirthID: _oEmployeeById.BirthID,
                    Nationalism: _oEmployeeById.Nationalism,
                    NationalID: _oEmployeeById.NationalID,
                    Religious: _oEmployeeById.Religious,
                    MaritalStatus: _oEmployeeById.MaritalStatus,
                    ChildrenInfo: _oEmployeeById.ChildrenInfo,
                    Note: _oEmployeeById.Note,
                    EmployeeDesignationTypeInt: parseInt($("#cboEmployeeDesignationType").val())
                };
                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: _sBaseAddress + "/Employee/EmployeeBasicInformation_IU",
                    traditional: true,
                    data: JSON.stringify(oEmployee),
                    contentType: "application/json; charset=utf-8",

                    success: function(data)
                    {
                        _oEmployee = jQuery.parseJSON(data);
                        alert("Designation Type saved successfully.")
                    },
                    error: function(xhr, status, error)
                    {
                        alert(error);
                    }
                });

            },
            error: function(xhr, status, error)
            {
                alert(error);
            }
        });


    });
    function LoadDate()
    {
        $('#txtStartDate-Experience').datebox('setValue', icsdateformat(new Date()));
        $('#txtEndDate-Experience').datebox('setValue', icsdateformat(new Date()));
        $('#txtStartDate-Training').datebox('setValue', icsdateformat(new Date()));
        $('#txtEndDate-Training').datebox('setValue', icsdateformat(new Date()));
        $('#txtPassingDate-Training').datebox('setValue', icsdateformat(new Date()));
    }

    /* ------------------Block start------------------ */
    function InitializeBlock(){
        $('#dtBlockStartDate').datebox('setValue', icsdateformat(new Date()));

        $("#cboProductionProcess").icsLoadCombo({
            List: _oProductionProcesss,
            OptionValue: "Value",
            DisplayText: "Text",
            //InitialValue:""
        });
        if(_oEmployee.BlockMachineMappingSupervisors!= null)
        {
            for(var i=0; i<_oEmployee.BlockMachineMappingSupervisors.length;i++)
            {
                if(_oEmployee.BlockMachineMappingSupervisors[i].IsActive)
                {
                    _oActiveBlocks.push(_oEmployee.BlockMachineMappingSupervisors[i]);
                }
                else
                {
                    _oInActiveBlocks.push(_oEmployee.BlockMachineMappingSupervisors[i]);
                }
            }
            DynamicRefreshList(_oActiveBlocks, "tblEmployeeBlock");
        }
        LoadBlock();
    }

    //$('#cboProductionProcess').change(function(e){
    //    $("#cboBlock").empty();
    //});

    //$('#btnLoadBlock').click(function(e){

    function LoadBlock()
    {
        //if ($('#cboProductionProcess').val()<=0) {
        //    alert("Please select a Production process.");
        //    $("#cboProductionProcess").addClass("errorFieldBorder");
        //    $("#cboProductionProcess").focus();
        //    return false;
        //} else {
        //    $("#cboProductionProcess").removeClass("errorFieldBorder");
        //}

        //if(_oEmployee.EmployeeID<=0) {alert("Please save employee information first."); return false;}

        //var oBlockMachineMapping={
        //    ProductionProcessInt:$('#cboProductionProcess').val(),
        //    DepartmentID:_oEmployee.DepartmentID,
        //    BlockName:""
        //}
        var oBlockMachineMapping={
            ProductionProcessInt:0,
            DepartmentID:0,
            BlockName:""
        }
        var obj =
        {
            BaseAddress: _sBaseAddress,
            Object: oBlockMachineMapping,
            ControllerName: "BlockMachineMapping",
            ActionName: "BlockMachineMapping_Search",
            IsWinClose: false
        };
        $.icsDataGets(obj, function (response) {
            if (response.status && response.objs != null) {
                if (response.objs.length>0 && response.objs[0].BMMID > 0) {
                    $("#cboBlock").icsLoadCombo({
                        List: response.objs,
                        OptionValue: "BMMID",
                        DisplayText: "BlockName",
                        InitialValue:"--Select Block--"
                    });
                }
                else
                {
                    //alert(response.objs[0].ErrorMessage);
                    $("#cboBlock").empty();
                }
            }
        });
    }

    function ValidateInput_Block()
    {
        if(_oEmployee.EmployeeID <= 0)
        {
            alert("Please enter employee");
            return false;
        }
        if ($('#cboProductionProcess').val()<=0) {
            alert("Please select a Production process!");
            $("#cboProductionProcess").addClass("errorFieldBorder");
            $("#cboProductionProcess").focus();
            return false;
        } else {
            $("#cboProductionProcess").removeClass("errorFieldBorder");
        }
        if ($('#cboBlock').val()<=0) {
            alert("Please select a Block!");
            $("#cboBlock").addClass("errorFieldBorder");
            $("#cboBlock").focus();
            return false;
        } else {
            $("#cboBlock").removeClass("errorFieldBorder");
        }

        //var oBlocks = $('#tblEmployeeBlock').datagrid('getRows');
        for(var i=0;i<_oEmployee.BlockMachineMappingSupervisors.length;i++)
        {
            if(_oEmployee.BlockMachineMappingSupervisors[i].IsActive == true)
            {
                alert("This employee has an active block.Please inactive this block to assign a new block!");
                return false;
                break;
            }
        }
        return true;
    }

    function RefreshObject_Block()
    {
        var oBlock=
        {
            BMMSID : 0,
            BMMID : $('#cboBlock').val(),
            EmployeeID : _oEmployee.EmployeeID ,
            StartDate : $('#dtBlockStartDate').datebox('getValue')
        }
        return oBlock;
    }

    $('#btnAddEmployeeBlock').click(function (e)
    {
        debugger
        if (!ValidateInput_Block()) return;
        var oBlockMachineMappingSupervisor = RefreshObject_Block();

        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oBlockMachineMappingSupervisor,
            ObjectId: oBlockMachineMappingSupervisor.BMMSID,
            ControllerName: "BlockMachineMapping",
            ActionName: "BlockMachineMappingSupervisor_IU",
            TableId: "tblEmployeeBlock",
            IsWinClose: false,
            Message: (oBlockMachineMappingSupervisor.BMMSID>0)?"Update Successfully." : "Save Successfully."
        };
        $.icsSave(obj);
    });

    $('#chkBlockInactive').click(function ()
    {
        if($('#chkBlockInactive').is(':checked'))
        {
            DynamicRefreshList(_oInActiveBlocks, "tblEmployeeBlock");
        }
        else
        {
            DynamicRefreshList(_oActiveBlocks, "tblEmployeeBlock");
        }
    });
    $("#txtBoardorUniversity").keydown(function (e) {

      
        if (code == 8) //backspace=8
        {
            $('#txtBoardorUniversity').removeClass("fontColorOfPickItem");
            $('#txtBoardorUniversity').data('BoardUniversity', null);
        }
    });
    $('#btnInactiveBlock').click(function (e)
    {
        var oBlock = $('#tblEmployeeBlock').datagrid('getSelected');

        if (oBlock == null || oBlock.BMMSID <= 0) {
            alert("Please select an item from list!"); return false;
        }

        if(!oBlock.IsActive){
            alert("Already Inactivated"); return false;
        }

        if(new Date(oBlock.StartDateInString)> new Date(icsdateformat(new Date()))){
            alert("Unable to inactive, For inactivation start date must be equal or previous than current date.\nYou can delete it."); return false;
        }

        if (!confirm("Confirm to Inactive?")) return false;

        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oBlock,
            ObjectId: oBlock.BMMSID,
            ControllerName: "BlockMachineMapping",
            ActionName: "BlockMachineMappingSupervisor_Inactive",
            TableId: "tblEmployeeBlock",
            IsWinClose: false,
            Message: (oBlock.IsActive)?"Inactive Successfully." : "Active Successfully."
        };
        $.icsSave(obj);
    });

    $("#btnDeleteEmployeeBlock").click(function () {

        var oBlock = $('#tblEmployeeBlock').datagrid('getSelected');

        if (oBlock == null || oBlock.BMMSID <= 0) {
            alert("Please select an item from list!"); return false;
        }

        if(!oBlock.IsActive){
            alert("Unable to delete. Already Inactivated"); return false;
        }

        if (!confirm("Confirm to Delete?")) return false ;

        var obj =
        {
            BaseAddress: _sBaseAddress,
            Object: oBlock,
            ControllerName: "BlockMachineMapping",
            ActionName: "BlockMachineMappingSupervisorDelete",
            TableId: "tblEmployeeBlock",
            IsWinClose: false
        };
        $.icsDelete(obj);
    });
    /* ------------------Block end------------------ */

    /* ------------------TIN Start------------------ */
    function TINRefreshControl()
    {
        $("#cboTaxArea").icsLoadCombo({
            List:_TaxArea,
            OptionValue: "Value",
            DisplayText: "Text",

        });

        _nETINID=_oEmployeeTIN.ETINID;
        $("#txtTIN").val(_oEmployeeTIN.TIN);
        $("#txtETIN").val(_oEmployeeTIN.ETIN);
        $("#cboTaxArea").val(_oEmployeeTIN.TaxArea);
        $("#txtCircle").val(_oEmployeeTIN.Circle);
        $("#txtZone").val(_oEmployeeTIN.Zone);
        $("#chkIsNonResident").prop('checked',_oEmployeeTIN.IsNonResident)
    }

    function ValidateInput_TIN()
    {
        if (_oEmployee.EmployeeID<=0)
        {
            alert('Please Add Employee first.!!');
            return false;
        }

        //var nCMID=$("#cboCommissionMaterial").val();
        //if (nCMID<=0)
        //{
        //    alert('Please seelct a Commission Material.!!');
        //    return false;
        //}

        if ($.trim($("#txtTIN").val())=="")
        {
            alert('Please enter TIN.!!');
            $("#txtTIN").focus();
            return false;
        }
        if ($.trim($("#txtETIN").val())=="")
        {
            alert('Please enter ETIN.!!');
            $("#txtETIN").focus();
            return false;
        }
        return true;
    }

    function RefreshObject_TIN()
    {
        var oECM= {
            ETINID : _nETINID,
            EmployeeID : _oEmployee.EmployeeID,
            TIN : $.trim($("#txtTIN").val()),
            ETIN : $.trim($("#txtETIN").val()),
            TaxArea:parseInt($("#cboTaxArea option:selected").index()),
            Circle:$.trim($("#txtCircle").val()),
            Zone:$.trim($("#txtZone").val()),
            IsNonResident:$("#chkIsNonResident").is(':checked')
        };
        return oECM;
    }

    $("#btnSaveTIN").click(function () {
        if(!ValidateInput_TIN()) return;
        var oECM=RefreshObject_TIN();

        var obj = {
            BaseAddress: _sBaseAddress,
            Object: oECM,
            ObjectId: oECM.ECMID,
            ControllerName: "Employee",
            ActionName: "ETINIU",
            TableId: "",
            IsWinClose: true
        };
        $.icsSave(obj, function (response) {
            if (response.status && response.obj.ETINID>0) {
                _nETINID=response.obj.ETINID;
            }
        });
    });
    /* ------------------TIN end------------------ */

    /*------------------- Education Start ---------*/
    function ValidateInput_Education()
    {
        if(document.getElementById("txtDegree").value==null || document.getElementById("txtDegree").value=="")
        {
            alert("Please enter Degree!");
            $('#txtDegree').focus();
            return false;
        }

        //if(document.getElementById("txtSession").value==null || document.getElementById("txtSession").value=="")
        //{
        //    alert("Please enter Session!");
        //    $('#txtSession').focus();
        //    return false;
        //}
        //if(document.getElementById("txtPassingYear").value==null || document.getElementById("txtPassingYear").value=="")
        //{
        //    alert("Please enter Passing Year!");
        //    $('#txtPassingYear').focus();
        //    return false;
        //}
        //if(document.getElementById("txtInstitution").value==null || document.getElementById("txtInstitution").value=="")
        //{
        //    alert("Please enter Institution!");
        //    $('#txtInstitution').focus();
        //    return false;
        //}
        //if(document.getElementById("txtBoardUniversity").value==null || document.getElementById("txtInstitution").value=="")
        //{
        //    alert("Please enter Institution!");
        //    $('#txtInstitution').focus();
        //    return false;
        //}
        //if(document.getElementById("txtCountry").value==null || document.getElementById("txtCountry").value=="")
        //{
        //    alert("Please enter Country!");
        //    $('#txtCountry').focus();
        //    return false;
        //}
        //if(document.getElementById("txtResult").value==null || document.getElementById("txtResult").value=="")
        //{
        //    alert("Please enter Result!");
        //    $('#txtResult').focus();
        //    return false;
        //}

        return true;
    }

    function RefreshObject_Education()
    {
        var oEmployeeEducation= {
            EmployeeEducationID : _nTempEmployeeEducationID,
            EmployeeID : _oEmployee.EmployeeID,
            Degree :$("#txtDegree").val(),
            Major :$("#txtMajor").val(),
            PassingYear: $("#txtPassingYear").val(),
            Institution : $("#txtInstitution").val(),
            BoardUniversity : $("#txtBoardorUniversity").val(),
            Result : $("#txtResult").val(),
        };
        return oEmployeeEducation;
    }
    function RefreshAutoComplete()
    {
        debugger;
        $('#txtBoardorUniversity').autocomplete({
    
            serviceUrl: _sBaseAddress+'/Employee/GetsBoardNameAutocomplete',
            paramName: "BoardName",
            delimiter: ",",
            minChars : 2,
            transformResult: function(response) {
                
                return {
                    suggestions: $.map($.parseJSON(response), function(item) {
                        return { value: item.BoardUniversity, data: item.BoardUniversity };
                    })
                };
            },
            onSelect: function (suggestion) {                
                $('#txtBoardorUniversity').data('BoardUniversity', suggestion.data);
                $("#txtBoardorUniversity").addClass("fontColorOfPickItem");                
            }
            //onSearchStart: function (query) {
            //    $('#divContractor').data('SelectedContractor', 0); 
            //    $("#txtName").removeClass("fontColorOfPickItem");
            //}
        });

        //$('#txtAddress').autocomplete({            
        //    serviceUrl: _sBaseAddress+'/Contractor/GetsContractorAutocomplete2',
        //    paramName: "ContractorName",
        //    //params: { ContractorID : $('#txtName').data('ContractorID') },            
        //    delimiter: ",",
        //    minChars : 2,
        //    clearCache : true,
        //    transformResult: function(response) {
        //        return {
        //            suggestions: $.map($.parseJSON(response), function(item) {
        //                return { value: item.Name, data: item.ContractorID };
        //            })
        //        };
        //    },
        //    onSearchStart: function (query) {
        //        var oContractor = { ContractorID : $('#txtName').data('ContractorID') };
        //        $.ajax({
        //            type: "POST",
        //            dataType: "json",
        //            url : _sBaseAddress+  "/Contractor/SetAutocompleteSessionData",
        //            traditional: true,
        //            data:  JSON.stringify(oContractor),
        //            contentType: "application/json; charset=utf-8",
        //            success: function (data) {},
        //            error: function (xhr, status, error) { alert(error); }
        //        });
        //    }
        //});
    }
    $("#btnEducationSave").click(function ()
    {
        if(!ValidateInput_Education()) return;
        var oEmployeeEducation=RefreshObject_Education();

        var oData= $('#tblEmployeEducation').datagrid('getSelected');
        var SelectedRowIndex = $('#tblEmployeEducation').datagrid('getRowIndex', oData);
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Employee/EmployeeEducationIU",
            traditional: true,
            data:  JSON.stringify(oEmployeeEducation),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                var oEmployeeEducation = jQuery.parseJSON(data);
                if (oEmployeeEducation.EmployeeEducationID>0) {
                    alert("Data Saved sucessfully");
                    if(_nTempEmployeeEducationID==0)
                    {
                        var oEmployeeEducations = $('#tblEmployeEducation').datagrid('getRows');
                        var nIndex=oEmployeeEducations.length;
                        $('#tblEmployeEducation').datagrid('appendRow',oEmployeeEducation);
                        $('#tblEmployeEducation').datagrid('selectRow', nIndex);
                    }
                    else
                    {
                        $('#tblEmployeEducation').datagrid('updateRow', {index: SelectedRowIndex,row: oEmployeeEducation});
                    }
                    $("#txtBoardorUniversity").val("");
                    $('#txtBoardorUniversity').data('BoardUniversity',null);
                    $("#txtBoardorUniversity").removeClass("fontColorOfPickItem");  
                    $("#txtDegree").val("");
                    $("#txtMajor").val("");
                    $("#txtPassingYear").val("");
                    $("#txtInstitution").val("");
                    $("#txtResult").val("");
                    _nTempEmployeeEducationID = 0;
                }
                else {
                    alert(oEmployeeEducation.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }
        });
    });
    $("#btnEducationClear").click(function ()
    {
        $("#txtBoardorUniversity").val("");
        $('#txtBoardorUniversity').data('BoardUniversity', null);
        $("#txtBoardorUniversity").removeClass("fontColorOfPickItem");  
        $("#txtDegree").val("");
        $("#txtMajor").val("");
        $("#txtPassingYear").val("");
        $("#txtInstitution").val("");
        $("#txtResult").val("");
        _nTempEmployeeEducationID = 0;
    });
    function EditEmployeeEducation()
    {
        debugger;
        var oEmployeeEducation= $('#tblEmployeEducation').datagrid('getSelected');
        $("#txtBoardorUniversity").val(oEmployeeEducation.BoardUniversity);
        $("#txtDegree").val(oEmployeeEducation.Degree);
        $("#txtMajor").val(oEmployeeEducation.Major);
        $("#txtPassingYear").val(oEmployeeEducation.PassingYear);
        $("#txtInstitution").val(oEmployeeEducation.Institution);
        $("#txtResult").val(oEmployeeEducation.Result);
        _nTempEmployeeEducationID = oEmployeeEducation.EmployeeEducationID;
    }
    function DeleteEmployeeEducation()
    {
        var oEmployeeEducation= $('#tblEmployeEducation').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeEducation==null || oEmployeeEducation.EmployeeEducationID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeEducation').datagrid('getRowIndex',oEmployeeEducation);

        if (oEmployeeEducation.EmployeeEducationID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeEducationDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeEducation),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    oEmployeeEducation = jQuery.parseJSON(data);
                    if (oEmployeeEducation.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeEducation').datagrid('deleteRow',SelectedRowIndex);
                    }
                    else
                    {
                        alert(oEmployeeEducation.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }

            });
        }
    }

    /*------------------- Education End -----------*/

    /*------------------- Reference Start----------*/
    function ValidateInput_Reference()
    {
        if(document.getElementById("txtName").value==null || document.getElementById("txtName").value=="")
        {
            alert("Please enter Name!");
            $('#txtName').focus();
            return false;
        }
        //if(document.getElementById("txtOrganization").value==null || document.getElementById("txtOrganization").value=="")
        //{
        //    alert("Please enter Institution!");
        //    $('#txtOrganization').focus();
        //    return false;
        //}
        //if(document.getElementById("txtDesignation").value==null || document.getElementById("txtDesignation").value=="")
        //{
        //    alert("Please enter Designation!");
        //    $('#txtDesignation').focus();
        //    return false;
        //}

        //if(document.getElementById("txtEmail").value==null || document.getElementById("txtEmail").value=="")
        //{
        //    alert("Please enter Email!");
        //    $('#txtEmail').focus();
        //    return false;
        //}
        //if(document.getElementById("txtAddress").value==null || document.getElementById("txtAddress").value=="")
        //{
        //    alert("Please enter Address!");
        //    $('#txtAddress').focus();
        //    return false;
        //}
        //if(document.getElementById("txtRelation").value==null || document.getElementById("txtRelation").value=="")
        //{
        //    alert("Please enter Relation!");
        //    $('#txtDesignation').focus();
        //    return false;
        //}
        //if(document.getElementById("txtDescription").value==null || document.getElementById("txtDescription").value=="")
        //{
        //    alert("Please enter Description!");
        //    $('#txtDescription').focus();
        //    return false;
        //}
        return true;
    }

    function RefreshObject_Reference()
    {
        var oEmployeeReference= {
            EmployeeReferenceID : 0,
            EmployeeID : _oEmployee.EmployeeID,
            Name :$("#txtName").val(),
            ContactNo: $("#txtContactNo").val(),
            Address : $("#txtAddress").val(),
            Organization : $("#txtOrganization").val(),
            Designation: $("#txtDesignation").val(),
            Description: $("#txtDescription").val(),
            Relation : $("#txtRelation").val(),
        };
        return oEmployeeReference;
    }
    $("#btnReferenceClear").click(function ()
    {
        $("#txtName").val("");
        $("#txtContactNo").val("");
        $("#txtAddress").val("");
        $("#txtOrganization").val("");
        $("#txtDesignation").val("");
        $("#txtDescription").val("");
        $("#txtRelation").val("");
        _nTempEmployeeReferenceID = 0;
    });
    $("#btnReferenceSave").click(function ()
    {
        if(!ValidateInput_Reference()) return;
        var oEmployeeReference=RefreshObject_Reference();

        var oData= $('#tblEmployeReference').datagrid('getSelected');
        var SelectedRowIndex = $('#tblEmployeReference').datagrid('getRowIndex', oData);
        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Employee/EmployeeReferenceIU",
            traditional: true,
            data:  JSON.stringify(oEmployeeReference),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                var oEmployeeReference = jQuery.parseJSON(data);
                if (oEmployeeReference.EmployeeReferenceID>0) {
                    alert("Data Saved sucessfully");


                    if(_nTempEmployeeReferenceID==0)
                    {
                        var oEmployeeReferences = $('#tblEmployeReference').datagrid('getRows');
                        var nIndex=oEmployeeReferences.length;
                        $('#tblEmployeReference').datagrid('appendRow',oEmployeeReference);
                        $('#tblEmployeReference').datagrid('selectRow', nIndex);
                    }
                    else
                    {
                        $('#tblEmployeReference').datagrid('updateRow', {index: SelectedRowIndex,row: oEmployeeReference});
                    }
                    $("#txtName").val("");
                    $("#txtContactNo").val("");
                    $("#txtAddress").val("");
                    $("#txtOrganization").val("");
                    $("#txtDesignation").val("");
                    $("#txtDescription").val("");
                    $("#txtRelation").val("");
                    _nTempEmployeeReferenceID = 0;
                }
                else
                {
                    alert(oEmployeeReference.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    });
    function EditEmployeeReference()
    {
        debugger;
        var oData= $('#tblEmployeReference').datagrid('getSelected');
        $("#txtName").val(oData.Name);
        $("#txtContactNo").val(oData.ContactNo);
        $("#txtAddress").val(oData.Address);
        $("#txtOrganization").val(oData.Organization);
        $("#txtDesignation").val(oData.Designation);
        $("#txtRelation").val(oData.Relation);
        _nTempEmployeeReferenceID = oData.EmployeeEducationID;
    }

    function DeleteEmployeeReference()
    {
        var oEmployeeReference= $('#tblEmployeReference').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeReference==null || oEmployeeReference.EmployeeReferenceID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeReference').datagrid('getRowIndex',oEmployeeReference);

        if (oEmployeeReference.EmployeeReferenceID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeReferenceDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeReference),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    var oData = jQuery.parseJSON(data);
                    if (oData.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeReference').datagrid('deleteRow',SelectedRowIndex);

                    }
                    else
                    {
                        alert(oData.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }
            });
        }
    }

    /*------------------- Reference End------------*/

    /*------------------- Experience Start ---------*/
    function ValidateInput_Experience()
    {
        if(document.getElementById("txtOrganization_Experience").value==null || document.getElementById("txtOrganization_Experience").value=="")
        {
            alert("Please enter Organization!");
            $('#txtOrganization_Experience').focus();
            return false;
        }

        if(document.getElementById("txtAddress_Experience").value==null || document.getElementById("txtAddress_Experience").value=="")
        {
            alert("Please enter Address!");
            $('#txtAddress_Experience').focus();
            return false;
        }
        if(document.getElementById("txtDesignation_Experience").value==null || document.getElementById("txtDesignation_Experience").value=="")
        {
            alert("Please enter Designation!");
            $('#txtDesignation_Experience').focus();
            return false;
        }
        if(parseInt($("#cboStartDateExFormat").val())<=0){
            alert("Please Select Start Date Format");
            return false;
        }
        if(parseInt($("#cboEndDateExFormat").val())<=0){
            alert("Please Select End Date Format");
            return false;
        }
        var sStartDate= $('#txtStartDate-Experience').datebox('getValue');
        var dStartDate = new Date(sStartDate);
        var sEndDate= $('#txtEndDate-Experience').datebox('getValue');
        var dEndDate = new Date(sEndDate);

        if (dStartDate>dEndDate)
        {
            alert("End date must be greater then start date!");
            $('#txtStartDate').focus();
            return false;
        }
        return true;
    }

    function RefreshObject_Experience()
    {
        debugger;
        var sStartDate= $('#txtStartDate-Experience').datebox('getValue');
        var dStartDate = new Date(sStartDate);
        var sEndDate= $('#txtEndDate-Experience').datebox('getValue');
        var dEndDate = new Date(sEndDate);

        var oEmployeeExperience= {
            EmployeeExperienceID :_nTempEmployeeExperienceID,
            EmployeeID : _oEmployee.EmployeeID,
            Organization :$("#txtOrganization_Experience").val(),
            OrganizationType: $("#txtOrganizationType").val(),
            Address : $("#txtAddress_Experience").val(),
            Designation: $("#txtDesignation_Experience").val(),
            MajorResponsibility: $("#txtMajorResponsibility").val(),
            StartDate: dStartDate,
            EndDate : dEndDate,
            StartDateExFormatType:parseInt($("#cboStartDateExFormat").val()),
            EndDateExFormatType:parseInt($("#cboEndDateExFormat").val()),
        };
        return oEmployeeExperience;
    }


    $("#btnExperienceClear").click(function ()
    {
        $("#txtOrganization_Experience").val("");
        $("#txtOrganizationType").val("");
        $("#txtAddress_Experience").val("");
        $("#txtDesignation_Experience").val("");
        $("#txtMajorResponsibility").val("");
        $('#txtStartDate-Experience').datebox('setValue', icsdateformat(new Date()));
        $('#txtEndDate-Experience').datebox('setValue',icsdateformat(new Date()));
        $("#cboStartDateExFormat").val(1);
        $("#cboEndDateExFormat").val(1);
        _nTempEmployeeExperienceID = 0;
    });
    $("#btnExperienceSave").click(function ()
    {
        debugger;
        if(!ValidateInput_Experience()) return;
        var oData= $('#tblEmployeExperience').datagrid('getSelected');
        var SelectedRowIndex=$('#tblEmployeExperience').datagrid('getRowIndex',oData);
        var objData=RefreshObject_Experience();

        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Employee/EmployeeExperienceIU",
            traditional: true,
            data:  JSON.stringify(objData),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                var oEmployeeExperience = jQuery.parseJSON(data);
                if (oEmployeeExperience.EmployeeExperienceID>0)
                {
                    alert("Data Saved sucessfully");
                    if(_nTempEmployeeExperienceID==0)
                    {
                        var oEmployeeExperiences = $('#tblEmployeExperience').datagrid('getRows');
                        var nIndex=oEmployeeExperiences.length;
                        $('#tblEmployeExperience').datagrid('appendRow',oEmployeeExperience);
                        $('#tblEmployeExperience').datagrid('selectRow', nIndex);
                    }
                    else
                    {
                        $('#tblEmployeExperience').datagrid('updateRow', {index: SelectedRowIndex,row: oEmployeeExperience});
                    }




                    $("#txtOrganization_Experience").val("");
                    $("#txtOrganizationType").val("");
                    $("#txtAddress_Experience").val("");
                    $("#txtDesignation_Experience").val("");
                    $("#txtMajorResponsibility").val("");
                    $('#txtStartDate-Experience').datebox('setValue', icsdateformat(new Date()));
                    $('#txtEndDate-Experience').datebox('setValue',icsdateformat(new Date()));
                    $("#cboStartDateExFormat").val(1);
                    $("#cboEndDateExFormat").val(1);
                    _nTempEmployeeExperienceID = 0;
                }
                else
                {
                    alert(oEmployeeExperience.ErrorMessage);
                }
            },
            error: function (xhr, status, error)
            {
                alert(error);
            }
        });
    });
    function EditEmployeeExperience()
    {
        debugger;
        var oEmployeeExperience= $('#tblEmployeExperience').datagrid('getSelected');
        $("#txtOrganization_Experience").val(oEmployeeExperience.Organization),
        $("#txtOrganizationType").val(oEmployeeExperience.OrganizationType),
        $("#txtAddress_Experience").val(oEmployeeExperience.Address),
        $("#txtDesignation_Experience").val(oEmployeeExperience.Designation),
        $("#txtMajorResponsibility").val(oEmployeeExperience.MajorResponsibility),
        $('#txtStartDate-Experience').datebox('setValue',oEmployeeExperience.StartDateString);
        $('#txtEndDate-Experience').datebox('setValue',oEmployeeExperience.EndDateString);
        $("#cboStartDateExFormat").val(parseInt(oEmployeeExperience.StartDateExFormatType));
        $("#cboEndDateExFormat").val(parseInt(oEmployeeExperience.EndDateExFormatType));
        _nTempEmployeeExperienceID = oEmployeeExperience.EmployeeExperienceID;
    }
    function DeleteEmployeeExperience()
    {
        var oEmployeeExperience= $('#tblEmployeExperience').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeExperience==null || oEmployeeExperience.EmployeeExperienceID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeExperience').datagrid('getRowIndex',oEmployeeExperience);

        if (oEmployeeExperience.EmployeeExperienceID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeExperienceDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeExperience),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    debugger;
                    oEmployeeExperience = jQuery.parseJSON(data);
                    if (oEmployeeExperience.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeExperience').datagrid('deleteRow',SelectedRowIndex);
                    }
                    else
                    {
                        alert(oEmployeeExperience.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }
            });
        }
    }

    /*------------------- Experience End -----------*/

    /*------------------- Training Start ----------*/

    function ValidateInput_Training()
    {
        if(document.getElementById("txtCourseName").value==null || document.getElementById("txtCourseName").value=="")
        {
            alert("Please enter CourseName!");
            $('#txtCourseName').focus();
            return false;
        }

        if(document.getElementById("txtVendor").value==null || document.getElementById("txtVendor").value=="")
        {
            alert("Please enter Vendor!");
            $('#txtVendor').focus();
            return false;
        }
        if(document.getElementById("txtInstitution-Training").value==null || document.getElementById("txtInstitution-Training").value=="")
        {
            alert("Please enter Institution!");
            $('#txtInstitution-Training').focus();
            return false;
        }
        if(document.getElementById("txtVendor").value==null || document.getElementById("txtVendor").value=="")
        {
            alert("Please enter Vendor!");
            $('#txtDesignation').focus();
            return false;
        }
        if(document.getElementById("txtResult-Training").value==null || document.getElementById("txtResult-Training").value=="")
        {
            alert("Please enter Result!");
            $('#txtResult-Training').focus();
            return false;
        }
        if(document.getElementById("txtCountry").value==null || document.getElementById("txtCountry").value=="")
        {
            alert("Please enter Country!");
            $('#txtCountry').focus();
            return false;
        }
      
        if(document.getElementById("txtTrainingDuration").value==null || document.getElementById("txtTrainingDuration").value=="")
        {
            if(parseInt($("#cboStartDateTrainingFormat").val())<=0){
                alert("Please Select Start Date Format");
                return false;
            }
            if(parseInt($("#cboEndDateTrainingFormat").val())<=0){
                alert("Please Select End Date Format");
                return false;
            }
           
        }
    
        if(parseInt($("#cboPassingDateTrainingFormat").val())<=0){
            alert("Please Select Passing Date Format");
            return false;
        }
        var sStartDate= $('#txtStartDate-Training').datebox('getValue');
        var dStartDate = new Date(sStartDate);
        var sEndDate= $('#txtEndDate-Training').datebox('getValue');
        var dEndDate = new Date(sEndDate);

        if (dStartDate>dEndDate)
        {
            alert("End date must be greater then start date!");
            $('#txtStartDate').focus();
            return false;
        }
        return true;
    }


    function RefreshObject_Training()
    {
        debugger;
        var sStartDate= $('#txtStartDate-Training').datebox('getValue');
        var dStartDate = new Date(sStartDate);
        var sEndDate= $('#txtEndDate-Training').datebox('getValue');
        var dEndDate = new Date(sEndDate);
        var sPassDate= $('#txtPassingDate-Training').datebox('getValue');
        var dPassDate = new Date(sPassDate);

        var oEmployeeTraining= {
            EmployeeTrainingID :_nTempEmployeeTrainingID,
            EmployeeID : _oEmployee.EmployeeID,
            CourseName :$("#txtCourseName").val(),
            Specification: $("#txtSpecification").val(),
            CertificateRegNo: $("#txtCertificateRegNo").val(),
            Result : $("#txtResult-Training").val(),
            Institution : $("#txtInstitution-Training").val(),
            CertifyBodyVendor: $("#txtVendor").val(),
            Country : $("#txtCountry").val(),
            TrainingDuration:$("#txtTrainingDuration").val(),
            StartDate: dStartDate,
            EndDate : dEndDate,
            PassingDate : dPassDate,
            StartDateTrainingFormatType:parseInt($("#cboStartDateTrainingFormat").val()),
            EndDateTrainingFormatType:parseInt($("#cboEndDateTrainingFormat").val()),
            PassingDateTrainingFormatType:parseInt($("#cboPassingDateTrainingFormat").val()),
        };
        return oEmployeeTraining;
    }


    $("#btnTrainingClear").click(function ()
    {
        $("#txtCourseName").val("");
        $("#txtInstitution-Training").val("");
        $("#txtVendor").val("");
        $("#txtSpecification").val("");
        $("#txtCertificateRegNo").val("");
        $("#txtResult-Training").val("");
        $("#txtCountry").val("");
        $("#txtTrainingDuration").val("");
        $('#txtStartDate-Training').datebox('setValue', icsdateformat(new Date()));
        $('#txtEndDate-Training').datebox('setValue', icsdateformat(new Date()));
        $('#txtPassingDate-Training').datebox('setValue', icsdateformat(new Date()));
        $("#cboStartDateTrainingFormat").val(0);
        $("#cboEndDateTrainingFormat").val(0);
        $("#cboPassingDateTrainingFormat").val(1);
        _nTempEmployeeTrainingID = 0;
    });
    $("#btnTrainingSave").click(function ()
    {
        if(!ValidateInput_Training()) return;
        var oEmployeeTraining=RefreshObject_Training();
        var oData= $('#tblEmployeTraining').datagrid('getSelected');
        var SelectedRowIndex=$('#tblEmployeTraining').datagrid('getRowIndex',oData);

        $.ajax({
            type: "POST",
            dataType: "json",
            url : _sBaseAddress+  "/Employee/EmployeeTrainingIU",
            traditional: true,
            data:  JSON.stringify(oEmployeeTraining),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var oEmployeeTraining = jQuery.parseJSON(data);
                if (oEmployeeTraining.EmployeeTrainingID>0)
                {
                    alert("Data Saved sucessfully");
                    if(_nTempEmployeeTrainingID==0)
                    {
                        var oEmployeeTrainings = $('#tblEmployeTraining').datagrid('getRows');
                        var nIndex=oEmployeeTrainings.length;
                        $('#tblEmployeTraining').datagrid('appendRow',oEmployeeTraining);
                        $('#tblEmployeTraining').datagrid('selectRow', nIndex);
                    }
                    else
                    {
                        $('#tblEmployeTraining').datagrid('updateRow', {index: SelectedRowIndex,row: oEmployeeTraining});
                    }
                    $("#txtCourseName").val("");
                    $("#txtSpecification").val("");
                    $("#txtCertificateRegNo").val("");
                    $("#txtResult-Training").val("");
                    $("#txtInstitution-Training").val("");
                    $("#txtVendor").val("");
                    $("#txtCountry").val("");
                    $("#txtTrainingDuration").val("");
                    $('#txtStartDate-Training').datebox('setValue',icsdateformat(new Date()));
                    $('#txtEndDate-Training').datebox('setValue',icsdateformat(new Date()));
                    $('#txtPassingDate-Training').datebox('setValue',icsdateformat(new Date()));
                    $("#cboStartDateTrainingFormat").val(0);
                    $("#cboEndDateTrainingFormat").val(0);
                    $("#cboPassingDateTrainingFormat").val(0);
                    _nTempEmployeeTrainingID = 0;
                }
                else
                {
                    alert(oEmployeeTraining.ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }
        });
    });
    function EditEmployeeTraining()
    {
        debugger;
        var oEmployeeTraining= $('#tblEmployeTraining').datagrid('getSelected');
        $("#txtCourseName").val(oEmployeeTraining.CourseName);
        $("#txtInstitution-Training").val(oEmployeeTraining.Institution);
        $("#txtVendor").val(oEmployeeTraining.CertifyBodyVendor);
        $("#txtSpecification").val(oEmployeeTraining.Specification);
        $("#txtCertificateRegNo").val(oEmployeeTraining.CertificateRegNo);
        $("#txtResult-Training").val(oEmployeeTraining.Result);
        $("#txtCountry").val(oEmployeeTraining.Country);
        $("#txtTrainingDuration").val(oEmployeeTraining.TrainingDuration);
        $('#txtStartDate-Training').datebox('setValue',oEmployeeTraining.StartDateInString);
        $('#txtEndDate-Training').datebox('setValue',oEmployeeTraining.EndDateInString);
        $('#txtPassingDate-Training').datebox('setValue',oEmployeeTraining.PassingDateInString);
        $("#cboStartDateTrainingFormat").val(parseInt(oEmployeeTraining.StartDateTrainingFormatType));
        $("#cboEndDateTrainingFormat").val(parseInt(oEmployeeTraining.EndDateTrainingFormatType));
        $("#cboPassingDateTrainingFormat").val(parseInt(oEmployeeTraining.PassingDateTrainingFormatType));
        _nTempEmployeeTrainingID = oEmployeeTraining.EmployeeTrainingID;
    }
    function DeleteEmployeeTraining()
    {
        var oEmployeeTraining= $('#tblEmployeTraining').datagrid('getSelected');
        if (!confirm("Confirm to Delete?")) return ;

        if(oEmployeeTraining==null || oEmployeeTraining.EmployeeTrainingID<=0)
        {
            alert("Invalid Field!!! please select a valid Field!");
            return false;
        }
        var SelectedRowIndex=$('#tblEmployeTraining').datagrid('getRowIndex',oEmployeeTraining);

        if (oEmployeeTraining.EmployeeTrainingID > 0)
        {
            $.ajax
            ({
                type: "POST",
                dataType: "json",
                url : _sBaseAddress+  "/Employee/EmployeeTrainingDelete",
                traditional: true,
                data:  JSON.stringify(oEmployeeTraining),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    oEmployeeTraining = jQuery.parseJSON(data);
                    if (oEmployeeTraining.ErrorMessage == null)
                    {
                        alert("Delete sucessfully");
                        $('#tblEmployeTraining').datagrid('deleteRow',SelectedRowIndex);
                    }
                    else
                    {
                        alert(oEmployeeTraining.ErrorMessage);
                    }
                },
                error: function (xhr, status, error)
                {
                    alert(error);
                }
            });
        }
    }
    /*------------------- Training End -----------*/
    /*-------Degree Sequence Start-----------*/
    $("#btnDegreeSequenceConfigure").click(function () {
        var oEmployeeEducations = $('#tblEmployeEducation').datagrid('getRows');
        if (oEmployeeEducations == null) {
            alert("Sorry Empty List!");
            return;
        }
        $("#winDegreeSequence").icsWindow('open', "Selected Sequence : ");
        $("#winDegreeSequence input").val("");
        $("#winDegreeSequence select").val(0);
        DynamicRefreshList(oEmployeeEducations, 'tblDegreeSequence');
    });

    $('#btnCloseDegreeSequence').click(function(){
        $("#winDegreeSequence").icsWindow("close");
        $("#winDegreeSequence input").val("");
        $("#winDegreeSequence select").val(0);
    });

    function DegreeUP()
    {
        debugger;
        var oEmployeeEducation = $('#tblDegreeSequence').datagrid('getSelected');
        if(oEmployeeEducation==null)
        {
            alert("Please select an Item");
            return;
        }
        var SelectedRowIndex=$('#tblDegreeSequence').datagrid('getRowIndex',oEmployeeEducation);
        if(SelectedRowIndex==0)return;
        var oEmployeeEducations=$('#tblDegreeSequence').datagrid('getRows');
        var _oEmployeeEducations = [];
        for(var i=0; i<oEmployeeEducations.length; i++)
        {
            if(i==(SelectedRowIndex-1))
            {
                _oEmployeeEducations[i]=oEmployeeEducations[i+1];
            }
            else if(i==SelectedRowIndex)
            {
                _oEmployeeEducations[i]=oEmployeeEducations[i-1];
            }
            else
            {
                _oEmployeeEducations[i]=oEmployeeEducations[i];
            }
            _oEmployeeEducations[i].Sequence=i+1;
        }
        data = _oEmployeeEducations;
        data={"total":""+data.length+"","rows":data};
        $('#tblDegreeSequence').datagrid('loadData',data);
        var newSelectedRowIndex=SelectedRowIndex-1;
        $('#tblDegreeSequence').datagrid('selectRow',newSelectedRowIndex);

    }

    function DegreeDown()
    {
        debugger;
        var oEmployeeEducation = $('#tblDegreeSequence').datagrid('getSelected');
        if(oEmployeeEducation==null)
        {
            alert("Please select an Item");
            return;
        }
        var SelectedRowIndex=$('#tblDegreeSequence').datagrid('getRowIndex',oEmployeeEducation);
          
        var oEmployeeEducations=$('#tblDegreeSequence').datagrid('getRows');
        if(SelectedRowIndex==(oEmployeeEducations.length-1))return;
        var _oEmployeeEducations=[];
        for(var i=0; i<oEmployeeEducations.length; i++)
        {
            if(i==(SelectedRowIndex+1))
            {
                _oEmployeeEducations[i]=oEmployeeEducations[i-1];
            }
            else if(i==SelectedRowIndex)
            {
                _oEmployeeEducations[i]=oEmployeeEducations[i+1];
            }
            else
            {
                _oEmployeeEducations[i]=oEmployeeEducations[i];
            }
            _oEmployeeEducations[i].Sequence=i+1;
        }
        data = _oEmployeeEducations;
        data={"total":""+data.length+"","rows":data};
        $('#tblDegreeSequence').datagrid('loadData',data);

        var newSelectedRowIndex=SelectedRowIndex+1;
        $('#tblDegreeSequence').datagrid('selectRow',newSelectedRowIndex);
    }

    function RefreshDegreeSequence()
    {
        var oEmployeeEducations=$('#tblDegreeSequence').datagrid('getRows');
        if(oEmployeeEducations.length>0)
        {
            for(var i = 0;i<oEmployeeEducations.length;i++)
            {
                oEmployeeEducations[i].Sequence = i+1;
            }
            RefreshListSequence(oEmployeeEducations);
        }
    }

    function RefreshListSequence(oEmployeeEducations)
    {
        data=oEmployeeEducations;
        data={"total":""+data.length+"","rows":data};
        $('#tblDegreeSequence').datagrid('loadData',data);
    }

    function SaveDegreeSequence()
    {
        //debugger;
        var oEmployeeEducations=$('#tblDegreeSequence').datagrid('getRows');
  
        $.ajax({
            type: "POST",
            dataType: "json",
            url : sessionStorage.getItem("BaseAddress")+"/Employee/RefreshDegreeSequence",
            traditional: true,
            data:  JSON.stringify(oEmployeeEducations),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                //debugger;
                var  oEmployeeEducations = jQuery.parseJSON(data);
                if (oEmployeeEducations[0].ErrorMessage=="" || oEmployeeEducations[0].ErrorMessage==null)
                {
                    alert("Data Saved sucessfully");
                    $("#winDegreeSequence").icsWindow("close");
                    $("#winDegreeSequence input").val("");
                    $("#winDegreeSequence select").val(0);
                    var data=[];
                    data={"total":""+data.length+"","rows":data};
                    $('#tblEmployeEducation').datagrid('loadData',data);
                    DynamicRefreshList(oEmployeeEducations, 'tblEmployeEducation');
                }
                else {
                    alert(oEmployeeEducations[0].ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    }
    /*-------Degree Sequence End-----------*/

    /*------Training Sequence Start------*/
    $("#btnTrainingSequenceConfigure").click(function () {
        var oEmployeeTrainings = $('#tblEmployeTraining').datagrid('getRows');
        if (oEmployeeTrainings == null) {
            alert("Sorry Empty List!");
            return;
        }
        $("#winTrainingSequence").icsWindow('open', "Selected Sequence : ");
        $("#winTrainingSequence input").val("");
        $("#winTrainingSequence select").val(0);
        DynamicRefreshList(oEmployeeTrainings, 'tblTrainingSequence');
    });

    $('#btnCloseTrainingSequence').click(function(){
        $("#winTrainingSequence").icsWindow("close");
        $("#winTrainingSequence input").val("");
        $("#winTrainingSequence select").val(0);
    });

    function TrainingUP()
    {
        debugger;
        var oEmployeeTraining = $('#tblTrainingSequence').datagrid('getSelected');
        if(oEmployeeTraining==null)
        {
            alert("Please select an Item");
            return;
        }
        var SelectedRowIndex=$('#tblTrainingSequence').datagrid('getRowIndex',oEmployeeTraining);
        if(SelectedRowIndex==0)return;
        var oEmployeeTrainings=$('#tblTrainingSequence').datagrid('getRows');
        var _oEmployeeTrainings = [];
        for(var i=0; i<oEmployeeTrainings.length; i++)
        {
            if(i==(SelectedRowIndex-1))
            {
                _oEmployeeTrainings[i]=oEmployeeTrainings[i+1];
            }
            else if(i==SelectedRowIndex)
            {
                _oEmployeeTrainings[i]=oEmployeeTrainings[i-1];
            }
            else
            {
                _oEmployeeTrainings[i]=oEmployeeTrainings[i];
            }
            _oEmployeeTrainings[i].Sequence=i+1;
        }
        data = _oEmployeeTrainings;
        data={"total":""+data.length+"","rows":data};
        $('#tblTrainingSequence').datagrid('loadData',data);
        var newSelectedRowIndex=SelectedRowIndex-1;
        $('#tblTrainingSequence').datagrid('selectRow',newSelectedRowIndex);

    }

    function TrainingDown()
    {
        debugger;
        var oEmployeeTraining = $('#tblTrainingSequence').datagrid('getSelected');
        if(oEmployeeTraining==null)
        {
            alert("Please select an Item");
            return;
        }
        var SelectedRowIndex=$('#tblTrainingSequence').datagrid('getRowIndex',oEmployeeTraining);
          
        var oEmployeeTrainings=$('#tblTrainingSequence').datagrid('getRows');
        if(SelectedRowIndex==(oEmployeeTrainings.length-1))return;
        var _oEmployeeTrainings=[];
        for(var i=0; i<oEmployeeTrainings.length; i++)
        {
            if(i==(SelectedRowIndex+1))
            {
                _oEmployeeTrainings[i]=oEmployeeTrainings[i-1];
            }
            else if(i==SelectedRowIndex)
            {
                _oEmployeeTrainings[i]=oEmployeeTrainings[i+1];
            }
            else
            {
                _oEmployeeTrainings[i]=oEmployeeTrainings[i];
            }
            _oEmployeeTrainings[i].Sequence=i+1;
        }
        data = _oEmployeeTrainings;
        data={"total":""+data.length+"","rows":data};
        $('#tblTrainingSequence').datagrid('loadData',data);

        var newSelectedRowIndex=SelectedRowIndex+1;
        $('#tblTrainingSequence').datagrid('selectRow',newSelectedRowIndex);
    }

    function RefreshTrainingSequence()
    {
        var oEmployeeTrainings=$('#tblTrainingSequence').datagrid('getRows');
        if(oEmployeeTrainings.length>0)
        {
            for(var i = 0;i<oEmployeeTrainings.length;i++)
            {
                oEmployeeTrainings[i].Sequence = i+1;
            }
            RefreshListTrainingSequence(oEmployeeTrainings);
        }
    }

    function RefreshListTrainingSequence(oEmployeeTrainings)
    {
        data=oEmployeeTrainings;
        data={"total":""+data.length+"","rows":data};
        $('#tblTrainingSequence').datagrid('loadData',data);
    }

    function SaveTrainingSequence()
    {
        //debugger;
        var oEmployeeTrainings=$('#tblTrainingSequence').datagrid('getRows');
  
        $.ajax({
            type: "POST",
            dataType: "json",
            url : sessionStorage.getItem("BaseAddress")+"/Employee/RefreshTrainingSequence",
            traditional: true,
            data:  JSON.stringify(oEmployeeTrainings),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                //debugger;
                var  oEmployeeTrainings = jQuery.parseJSON(data);
                if (oEmployeeTrainings[0].ErrorMessage=="" || oEmployeeTrainings[0].ErrorMessage==null)
                {
                    alert("Data Saved sucessfully");
                    $("#winTrainingSequence").icsWindow("close");
                    $("#winTrainingSequence input").val("");
                    $("#winTrainingSequence select").val(0);
                    var data=[];
                    data={"total":""+data.length+"","rows":data};
                    $('#tblEmployeTraining').datagrid('loadData',data);
                    DynamicRefreshList(oEmployeeTrainings, 'tblEmployeTraining');
                }
                else {
                    alert(oEmployeeTrainings[0].ErrorMessage);
                }
            },
            error: function (xhr, status, error) {
                alert(error);
            }

        });
    }
    /*------Training Sequence End------*/
    $("#btnCloseBlockAndTin,#btnCloseEducationAndReference,#btnCloseExperience,#btnCloseTraingnig").click(function () {
        window.location.href = _sBaseAddress+ "/Employee/View_EmployeeInformation?sid="+_oEmployee.EncryptEmpID+"&sMsg=N/A";
    });
</script>
